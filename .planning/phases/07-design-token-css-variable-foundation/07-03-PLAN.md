---
phase: 07-design-token-css-variable-foundation
plan: 03
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - components/folder-item/folder-item.vue
  - components/folder-view/folder-view.vue
  - components/site-item/site-item.vue
  - entrypoints/newtab/App.vue
autonomous: true
requirements: [VSTL-01, VSTL-02, VSTL-03, FLDR-01, FLDR-02]

must_haves:
  truths:
    - "folder-item.vue uses var() for all gap, padding, font-size, and color values in <style scoped>"
    - "folder-view.vue hardcoded pixel dimensions (80px, 60px, 10px) are extracted to component-local CSS variables"
    - "site-item.vue font-size values use --text-title and --text-caption tokens"
    - "App.vue page padding uses component-local CSS variables instead of bare 60px 40px"
  artifacts:
    - path: "components/folder-item/folder-item.vue"
      provides: "Tokenized folder item styles — spacing, font sizes, text shadow"
    - path: "components/folder-view/folder-view.vue"
      provides: "Tokenized folder view with local size variables for grid items and add button"
    - path: "components/site-item/site-item.vue"
      provides: "Tokenized site item — font sizes aligned to scale, #fff replaced with var(--color-on-primary)"
    - path: "entrypoints/newtab/App.vue"
      provides: "Page layout padding using named local CSS variables"
  key_links:
    - from: "components/folder-item/folder-item.vue"
      to: "entrypoints/newtab/styles/variables.css"
      via: "var(--spacing-sm), var(--text-caption), var(--text-body)"
      pattern: "var\\(--spacing-|var\\(--text-"
    - from: "components/site-item/site-item.vue"
      to: "entrypoints/newtab/styles/variables.css"
      via: "var(--text-title), var(--text-caption), var(--color-on-primary)"
      pattern: "var\\(--text-title\\)|var\\(--text-caption\\)|var\\(--color-on-primary\\)"
    - from: "components/folder-view/folder-view.vue"
      to: "local --folder-grid-item-size, --folder-add-btn-size"
      via: "component-local CSS variables used in grid-template-columns and sizing"
      pattern: "--folder-grid-item-size|--folder-add-btn-size"
---

<objective>
Replace all hardcoded colors, spacing, and font sizes in layout-level components (folder-item, folder-view, site-item) and page root (App.vue) with CSS variable references.

Purpose: These components form the visible grid layout — tokenizing them completes the visual language unification across the entire new tab page.
Output: 4 component files with fully tokenized `<style scoped>` blocks.
</objective>

<execution_context>
@/home/whj/.claude/get-shit-done/workflows/execute-plan.md
@/home/whj/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-design-token-css-variable-foundation/07-01-SUMMARY.md
@entrypoints/newtab/styles/variables.css
@components/folder-item/folder-item.vue
@components/folder-view/folder-view.vue
@components/site-item/site-item.vue
@entrypoints/newtab/App.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Tokenize folder-item and folder-view</name>
  <files>
    components/folder-item/folder-item.vue
    components/folder-view/folder-view.vue
  </files>
  <action>
**folder-item.vue — 7 replacements in `<style scoped>`:**

1. `.folder-item`: `gap: 8px` → `gap: var(--spacing-sm)`
2. `.folder-content`: `padding: 12px` → Define component-local variable (12px doesn't fit spacing scale):
   ```css
   .folder-content {
     --folder-content-padding: 12px;
     padding: var(--folder-content-padding);
   }
   ```
3. `.folder-grid`: `gap: 8px` → `gap: var(--spacing-sm)`
4. `.folder-icon.fallback`: `font-size: 10px` → `font-size: var(--text-caption)` (align to nearest: 12px per user decision)
5. `.folder-title`: `font-size: 13px` → `font-size: var(--text-body)` (align to nearest: 14px per user decision)
6. `.folder-title`: `text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2)` → Define component-local:
   ```css
   .folder-title {
     --folder-title-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
     text-shadow: var(--folder-title-shadow);
   }
   ```
7. `.folder-title`: `padding: 0 4px` → `padding: 0 var(--spacing-xs)`

**folder-view.vue — 4 replacements in `<style scoped>`:**

Define component-local size variables at the top of the style block (on `.folder-view-content` or `:root`-scoped):
```css
.folder-view-content {
  --folder-grid-item-size: 80px;
  --folder-add-btn-size: 60px;
}
```

1. `.sites-grid`: `grid-template-columns: repeat(auto-fill, minmax(80px, 1fr))` → `repeat(auto-fill, minmax(var(--folder-grid-item-size), 1fr))`
2. `.folder-site-item`: `width: 80px; height: 80px` → `width: var(--folder-grid-item-size); height: var(--folder-grid-item-size)`
3. `.add-site-btn`: `width: 60px; height: 60px` → `width: var(--folder-add-btn-size); height: var(--folder-add-btn-size)`
4. `.add-site-btn`: `margin-top: 10px` → `margin-top: var(--spacing-sm)` (10px → 8px, close enough per user decision)

min-height: 200px values stay as-is (layout constraints, not design tokens).

**Important:** Do NOT change template or script code. Font sizes are aligned to nearest existing --text-* token per user decision (no new font-size tokens).
  </action>
  <verify>
Grep each file for remaining hardcoded values:
- `grep -E 'gap: [0-9]+px|padding: [0-9]+px|font-size: [0-9]+px' components/folder-item/folder-item.vue` — should return 0 matches (all converted to var() or local properties)
- `grep '80px\|60px\|10px' components/folder-view/folder-view.vue` — 80px and 60px should only appear inside CSS variable definitions, 10px should not appear
- `grep 'rgba(' components/folder-item/folder-item.vue` — should only appear inside local custom property definitions
Run `npx vue-tsc --noEmit` to confirm no type errors.
  </verify>
  <done>
folder-item.vue uses var(--spacing-sm), var(--text-caption), var(--text-body), var(--spacing-xs), and local --folder-content-padding and --folder-title-shadow. folder-view.vue uses local --folder-grid-item-size and --folder-add-btn-size variables, with margin using var(--spacing-sm).
  </done>
</task>

<task type="auto">
  <name>Task 2: Tokenize site-item and App.vue</name>
  <files>
    components/site-item/site-item.vue
    entrypoints/newtab/App.vue
  </files>
  <action>
**site-item.vue — 5 replacements in `<style scoped>`:**

1. `.site-item`: `gap: 10px` → `gap: var(--spacing-sm)` (10px → 8px, close enough per user decision)
2. `.site-icon`: `padding: 4px` → `padding: var(--spacing-xs)`
3. `.site-icon--fallback`: `font-size: 18px` → `font-size: var(--text-title)` (exact match: 18px = 1.125rem)
4. `.site-title`: `font-size: 11px` → `font-size: var(--text-caption)` (align to nearest: 12px per user decision)
5. `.site-check.checked::after`: `border: solid #fff` → `border: solid var(--color-on-primary)`

Leave these as-is:
- `width: 54px; height: 54px` on .site-icon (component-specific dimension, not spacing)
- `padding: 0 2px` on .site-title (micro-spacing)
- `width: 16px; height: 16px` on .site-check (indicator dimensions)
- `backdrop-filter: blur(8px)` on .site-check (unique blur, no matching token)

**App.vue — 1 replacement in `<style scoped>`:**

1. `.main`: `padding: 60px 40px` → Define component-local variables and use them:
   ```css
   .main {
     --app-padding-y: 60px;
     --app-padding-x: 40px;
     padding: var(--app-padding-y) var(--app-padding-x);
   }
   ```

These are layout-specific values that don't fit the spacing scale — component-local tokens name them for maintainability.

**Important:** Do NOT change template or script code.
  </action>
  <verify>
Grep for remaining hardcoded values:
- `grep -E 'font-size: [0-9]+px' components/site-item/site-item.vue` — should return 0 matches
- `grep '#fff' components/site-item/site-item.vue` — should return 0 matches
- `grep ': 60px 40px' entrypoints/newtab/App.vue` — should return 0 matches (replaced with var())
Run `npx vue-tsc --noEmit` to confirm no type errors.
  </verify>
  <done>
site-item.vue uses var(--spacing-sm), var(--spacing-xs), var(--text-title), var(--text-caption), var(--color-on-primary). App.vue page padding uses local --app-padding-y and --app-padding-x. No bare font-size px values or #fff hex colors remain.
  </done>
</task>

</tasks>

<verification>
1. Across all 4 files: no bare `font-size: Npx` values (all use var(--text-*))
2. No `#fff` or `#ffffff` in site-item.vue
3. No `rgba(` in folder-item.vue except inside CSS custom property definitions
4. `npx vue-tsc --noEmit` passes
</verification>

<success_criteria>
- All folder-item gap/padding/font-size values tokenized
- folder-view dimensions extracted to component-local CSS variables
- site-item font sizes aligned to --text-* scale
- App.vue padding uses named variables
- All changes are style-only — no template or script changes
</success_criteria>

<output>
After completion, create `.planning/phases/07-design-token-css-variable-foundation/07-03-SUMMARY.md`
</output>
