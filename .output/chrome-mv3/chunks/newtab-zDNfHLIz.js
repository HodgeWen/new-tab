(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();try{}catch(n){console.error("[wxt] Failed to initialize plugins",n)}function Fa(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const tt={},Vr=[],_n=()=>{},oc=()=>!1,Xs=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Ba=n=>n.startsWith("onUpdate:"),St=Object.assign,za=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},xh=Object.prototype.hasOwnProperty,Xe=(n,e)=>xh.call(n,e),Ne=Array.isArray,Gr=n=>Js(n)==="[object Map]",ac=n=>Js(n)==="[object Set]",Ie=n=>typeof n=="function",pt=n=>typeof n=="string",ur=n=>typeof n=="symbol",st=n=>n!==null&&typeof n=="object",lc=n=>(st(n)||Ie(n))&&Ie(n.then)&&Ie(n.catch),uc=Object.prototype.toString,Js=n=>uc.call(n),_h=n=>Js(n).slice(8,-1),cc=n=>Js(n)==="[object Object]",Zs=n=>pt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,yi=Fa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qs=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},Eh=/-\w/g,sr=Qs(n=>n.replace(Eh,e=>e.slice(1).toUpperCase())),Ch=/\B([A-Z])/g,cr=Qs(n=>n.replace(Ch,"-$1").toLowerCase()),fc=Qs(n=>n.charAt(0).toUpperCase()+n.slice(1)),Vo=Qs(n=>n?`on${fc(n)}`:""),rr=(n,e)=>!Object.is(n,e),xs=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},hc=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Ha=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Sh=n=>{const e=pt(n)?Number(n):NaN;return isNaN(e)?n:e};let Wl;const eo=()=>Wl||(Wl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function or(n){if(Ne(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=pt(r)?Th(r):or(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(pt(n)||st(n))return n}const kh=/;(?![^(]*\))/g,Oh=/:([^]+)/,Ah=/\/\*[^]*?\*\//g;function Th(n){const e={};return n.replace(Ah,"").split(kh).forEach(t=>{if(t){const r=t.split(Oh);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Je(n){let e="";if(pt(n))e=n;else if(Ne(n))for(let t=0;t<n.length;t++){const r=Je(n[t]);r&&(e+=r+" ")}else if(st(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Ph="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Rh=Fa(Ph);function dc(n){return!!n||n===""}const pc=n=>!!(n&&n.__v_isRef===!0),Qe=n=>pt(n)?n:n==null?"":Ne(n)||st(n)&&(n.toString===uc||!Ie(n.toString))?pc(n)?Qe(n.value):JSON.stringify(n,gc,2):String(n),gc=(n,e)=>pc(e)?gc(n,e.value):Gr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[Go(r,s)+" =>"]=i,t),{})}:ac(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Go(t))}:ur(e)?Go(e):st(e)&&!Ne(e)&&!cc(e)?String(e):e,Go=(n,e="")=>{var t;return ur(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};let Tt;class mc{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tt,!e&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Tt;try{return Tt=this,e()}finally{Tt=t}}}on(){++this._on===1&&(this.prevScope=Tt,Tt=this)}off(){this._on>0&&--this._on===0&&(Tt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function vc(n){return new mc(n)}function yc(){return Tt}function Nh(n,e=!1){Tt&&Tt.cleanups.push(n)}let it;const Yo=new WeakSet;class bc{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tt&&Tt.active&&Tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yo.has(this)&&(Yo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Kl(this),_c(this);const e=it,t=ln;it=this,ln=!0;try{return this.fn()}finally{Ec(this),it=e,ln=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ka(e);this.deps=this.depsTail=void 0,Kl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ya(this)&&this.run()}get dirty(){return ya(this)}}let wc=0,bi,wi;function xc(n,e=!1){if(n.flags|=8,e){n.next=wi,wi=n;return}n.next=bi,bi=n}function Ua(){wc++}function Wa(){if(--wc>0)return;if(wi){let e=wi;for(wi=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;bi;){let e=bi;for(bi=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function _c(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ec(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),Ka(r),Dh(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function ya(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Cc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Cc(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ti)||(n.globalVersion=Ti,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!ya(n))))return;n.flags|=2;const e=n.dep,t=it,r=ln;it=n,ln=!0;try{_c(n);const i=n.fn(n._value);(e.version===0||rr(i,n._value))&&(n.flags|=128,n._value=i,e.version++)}catch(i){throw e.version++,i}finally{it=t,ln=r,Ec(n),n.flags&=-3}}function Ka(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Ka(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function Dh(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let ln=!0;const Sc=[];function In(){Sc.push(ln),ln=!1}function jn(){const n=Sc.pop();ln=n===void 0?!0:n}function Kl(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=it;it=void 0;try{e()}finally{it=t}}}let Ti=0;class Mh{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qa{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!it||!ln||it===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==it)t=this.activeLink=new Mh(it,this),it.deps?(t.prevDep=it.depsTail,it.depsTail.nextDep=t,it.depsTail=t):it.deps=it.depsTail=t,kc(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=it.depsTail,t.nextDep=void 0,it.depsTail.nextDep=t,it.depsTail=t,it.deps===t&&(it.deps=r)}return t}trigger(e){this.version++,Ti++,this.notify(e)}notify(e){Ua();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Wa()}}}function kc(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)kc(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const ks=new WeakMap,kr=Symbol(""),ba=Symbol(""),Pi=Symbol("");function Pt(n,e,t){if(ln&&it){let r=ks.get(n);r||ks.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new qa),i.map=r,i.key=t),i.track()}}function Nn(n,e,t,r,i,s){const a=ks.get(n);if(!a){Ti++;return}const l=h=>{h&&h.trigger()};if(Ua(),e==="clear")a.forEach(l);else{const h=Ne(n),f=h&&Zs(t);if(h&&t==="length"){const c=Number(r);a.forEach((p,g)=>{(g==="length"||g===Pi||!ur(g)&&g>=c)&&l(p)})}else switch((t!==void 0||a.has(void 0))&&l(a.get(t)),f&&l(a.get(Pi)),e){case"add":h?f&&l(a.get("length")):(l(a.get(kr)),Gr(n)&&l(a.get(ba)));break;case"delete":h||(l(a.get(kr)),Gr(n)&&l(a.get(ba)));break;case"set":Gr(n)&&l(a.get(kr));break}}Wa()}function Ih(n,e){const t=ks.get(n);return t&&t.get(e)}function zr(n){const e=He(n);return e===n?e:(Pt(e,"iterate",Pi),Jt(n)?e:e.map(un))}function to(n){return Pt(n=He(n),"iterate",Pi),n}function er(n,e){return $n(n)?Mn(n)?Xr(un(e)):Xr(e):un(e)}const jh={__proto__:null,[Symbol.iterator](){return Xo(this,Symbol.iterator,n=>er(this,n))},concat(...n){return zr(this).concat(...n.map(e=>Ne(e)?zr(e):e))},entries(){return Xo(this,"entries",n=>(n[1]=er(this,n[1]),n))},every(n,e){return On(this,"every",n,e,void 0,arguments)},filter(n,e){return On(this,"filter",n,e,t=>t.map(r=>er(this,r)),arguments)},find(n,e){return On(this,"find",n,e,t=>er(this,t),arguments)},findIndex(n,e){return On(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return On(this,"findLast",n,e,t=>er(this,t),arguments)},findLastIndex(n,e){return On(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return On(this,"forEach",n,e,void 0,arguments)},includes(...n){return Jo(this,"includes",n)},indexOf(...n){return Jo(this,"indexOf",n)},join(n){return zr(this).join(n)},lastIndexOf(...n){return Jo(this,"lastIndexOf",n)},map(n,e){return On(this,"map",n,e,void 0,arguments)},pop(){return ci(this,"pop")},push(...n){return ci(this,"push",n)},reduce(n,...e){return ql(this,"reduce",n,e)},reduceRight(n,...e){return ql(this,"reduceRight",n,e)},shift(){return ci(this,"shift")},some(n,e){return On(this,"some",n,e,void 0,arguments)},splice(...n){return ci(this,"splice",n)},toReversed(){return zr(this).toReversed()},toSorted(n){return zr(this).toSorted(n)},toSpliced(...n){return zr(this).toSpliced(...n)},unshift(...n){return ci(this,"unshift",n)},values(){return Xo(this,"values",n=>er(this,n))}};function Xo(n,e,t){const r=to(n),i=r[e]();return r!==n&&!Jt(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.done||(s.value=t(s.value)),s}),i}const $h=Array.prototype;function On(n,e,t,r,i,s){const a=to(n),l=a!==n&&!Jt(n),h=a[e];if(h!==$h[e]){const p=h.apply(n,s);return l?un(p):p}let f=t;a!==n&&(l?f=function(p,g){return t.call(this,er(n,p),g,n)}:t.length>2&&(f=function(p,g){return t.call(this,p,g,n)}));const c=h.call(a,f,r);return l&&i?i(c):c}function ql(n,e,t,r){const i=to(n);let s=t;return i!==n&&(Jt(n)?t.length>3&&(s=function(a,l,h){return t.call(this,a,l,h,n)}):s=function(a,l,h){return t.call(this,a,er(n,l),h,n)}),i[e](s,...r)}function Jo(n,e,t){const r=He(n);Pt(r,"iterate",Pi);const i=r[e](...t);return(i===-1||i===!1)&&ro(t[0])?(t[0]=He(t[0]),r[e](...t)):i}function ci(n,e,t=[]){In(),Ua();const r=He(n)[e].apply(n,t);return Wa(),jn(),r}const Lh=Fa("__proto__,__v_isRef,__isVue"),Oc=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ur));function Fh(n){ur(n)||(n=String(n));const e=He(this);return Pt(e,"has",n),e.hasOwnProperty(n)}class Ac{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Yh:Nc:s?Rc:Pc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Ne(e);if(!i){let h;if(a&&(h=jh[t]))return h;if(t==="hasOwnProperty")return Fh}const l=Reflect.get(e,t,dt(e)?e:r);if((ur(t)?Oc.has(t):Lh(t))||(i||Pt(e,"get",t),s))return l;if(dt(l)){const h=a&&Zs(t)?l:l.value;return i&&st(h)?xa(h):h}return st(l)?i?xa(l):no(l):l}}class Tc extends Ac{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];const a=Ne(e)&&Zs(t);if(!this._isShallow){const f=$n(s);if(!Jt(r)&&!$n(r)&&(s=He(s),r=He(r)),!a&&dt(s)&&!dt(r))return f||(s.value=r),!0}const l=a?Number(t)<e.length:Xe(e,t),h=Reflect.set(e,t,r,dt(e)?e:i);return e===He(i)&&(l?rr(r,s)&&Nn(e,"set",t,r):Nn(e,"add",t,r)),h}deleteProperty(e,t){const r=Xe(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Nn(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!ur(t)||!Oc.has(t))&&Pt(e,"has",t),r}ownKeys(e){return Pt(e,"iterate",Ne(e)?"length":kr),Reflect.ownKeys(e)}}class Bh extends Ac{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const zh=new Tc,Hh=new Bh,Uh=new Tc(!0);const wa=n=>n,ps=n=>Reflect.getPrototypeOf(n);function Wh(n,e,t){return function(...r){const i=this.__v_raw,s=He(i),a=Gr(s),l=n==="entries"||n===Symbol.iterator&&a,h=n==="keys"&&a,f=i[n](...r),c=t?wa:e?Xr:un;return!e&&Pt(s,"iterate",h?ba:kr),{next(){const{value:p,done:g}=f.next();return g?{value:p,done:g}:{value:l?[c(p[0]),c(p[1])]:c(p),done:g}},[Symbol.iterator](){return this}}}}function gs(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function Kh(n,e){const t={get(i){const s=this.__v_raw,a=He(s),l=He(i);n||(rr(i,l)&&Pt(a,"get",i),Pt(a,"get",l));const{has:h}=ps(a),f=e?wa:n?Xr:un;if(h.call(a,i))return f(s.get(i));if(h.call(a,l))return f(s.get(l));s!==a&&s.get(i)},get size(){const i=this.__v_raw;return!n&&Pt(He(i),"iterate",kr),i.size},has(i){const s=this.__v_raw,a=He(s),l=He(i);return n||(rr(i,l)&&Pt(a,"has",i),Pt(a,"has",l)),i===l?s.has(i):s.has(i)||s.has(l)},forEach(i,s){const a=this,l=a.__v_raw,h=He(l),f=e?wa:n?Xr:un;return!n&&Pt(h,"iterate",kr),l.forEach((c,p)=>i.call(s,f(c),f(p),a))}};return St(t,n?{add:gs("add"),set:gs("set"),delete:gs("delete"),clear:gs("clear")}:{add(i){!e&&!Jt(i)&&!$n(i)&&(i=He(i));const s=He(this);return ps(s).has.call(s,i)||(s.add(i),Nn(s,"add",i,i)),this},set(i,s){!e&&!Jt(s)&&!$n(s)&&(s=He(s));const a=He(this),{has:l,get:h}=ps(a);let f=l.call(a,i);f||(i=He(i),f=l.call(a,i));const c=h.call(a,i);return a.set(i,s),f?rr(s,c)&&Nn(a,"set",i,s):Nn(a,"add",i,s),this},delete(i){const s=He(this),{has:a,get:l}=ps(s);let h=a.call(s,i);h||(i=He(i),h=a.call(s,i)),l&&l.call(s,i);const f=s.delete(i);return h&&Nn(s,"delete",i,void 0),f},clear(){const i=He(this),s=i.size!==0,a=i.clear();return s&&Nn(i,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Wh(i,n,e)}),t}function Va(n,e){const t=Kh(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Xe(t,i)&&i in r?t:r,i,s)}const qh={get:Va(!1,!1)},Vh={get:Va(!1,!0)},Gh={get:Va(!0,!1)};const Pc=new WeakMap,Rc=new WeakMap,Nc=new WeakMap,Yh=new WeakMap;function Xh(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jh(n){return n.__v_skip||!Object.isExtensible(n)?0:Xh(_h(n))}function no(n){return $n(n)?n:Ga(n,!1,zh,qh,Pc)}function Zh(n){return Ga(n,!1,Uh,Vh,Rc)}function xa(n){return Ga(n,!0,Hh,Gh,Nc)}function Ga(n,e,t,r,i){if(!st(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=Jh(n);if(s===0)return n;const a=i.get(n);if(a)return a;const l=new Proxy(n,s===2?r:t);return i.set(n,l),l}function Mn(n){return $n(n)?Mn(n.__v_raw):!!(n&&n.__v_isReactive)}function $n(n){return!!(n&&n.__v_isReadonly)}function Jt(n){return!!(n&&n.__v_isShallow)}function ro(n){return n?!!n.__v_raw:!1}function He(n){const e=n&&n.__v_raw;return e?He(e):n}function Ya(n){return!Xe(n,"__v_skip")&&Object.isExtensible(n)&&hc(n,"__v_skip",!0),n}const un=n=>st(n)?no(n):n,Xr=n=>st(n)?xa(n):n;function dt(n){return n?n.__v_isRef===!0:!1}function De(n){return Qh(n,!1)}function Qh(n,e){return dt(n)?n:new ed(n,e)}class ed{constructor(e,t){this.dep=new qa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:He(e),this._value=t?e:un(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Jt(e)||$n(e);e=r?e:He(e),rr(e,t)&&(this._rawValue=e,this._value=r?e:un(e),this.dep.trigger())}}function Le(n){return dt(n)?n.value:n}const td={get:(n,e,t)=>e==="__v_raw"?n:Le(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return dt(i)&&!dt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Dc(n){return Mn(n)?n:new Proxy(n,td)}function nd(n){const e=Ne(n)?new Array(n.length):{};for(const t in n)e[t]=id(n,t);return e}class rd{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0,this._raw=He(e);let i=!0,s=e;if(!Ne(e)||!Zs(String(t)))do i=!ro(s)||Jt(s);while(i&&(s=s.__v_raw));this._shallow=i}get value(){let e=this._object[this._key];return this._shallow&&(e=Le(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&dt(this._raw[this._key])){const t=this._object[this._key];if(dt(t)){t.value=e;return}}this._object[this._key]=e}get dep(){return Ih(this._raw,this._key)}}function id(n,e,t){return new rd(n,e,t)}class sd{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new qa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ti-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&it!==this)return xc(this,!0),!0}get value(){const e=this.dep.track();return Cc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function od(n,e,t=!1){let r,i;return Ie(n)?r=n:(r=n.get,i=n.set),new sd(r,i,t)}const ms={},Os=new WeakMap;let Er;function ad(n,e=!1,t=Er){if(t){let r=Os.get(t);r||Os.set(t,r=[]),r.push(n)}}function ld(n,e,t=tt){const{immediate:r,deep:i,once:s,scheduler:a,augmentJob:l,call:h}=t,f=S=>i?S:Jt(S)||i===!1||i===0?Dn(S,1):Dn(S);let c,p,g,v,y=!1,w=!1;if(dt(n)?(p=()=>n.value,y=Jt(n)):Mn(n)?(p=()=>f(n),y=!0):Ne(n)?(w=!0,y=n.some(S=>Mn(S)||Jt(S)),p=()=>n.map(S=>{if(dt(S))return S.value;if(Mn(S))return f(S);if(Ie(S))return h?h(S,2):S()})):Ie(n)?e?p=h?()=>h(n,2):n:p=()=>{if(g){In();try{g()}finally{jn()}}const S=Er;Er=c;try{return h?h(n,3,[v]):n(v)}finally{Er=S}}:p=_n,e&&i){const S=p,A=i===!0?1/0:i;p=()=>Dn(S(),A)}const E=yc(),N=()=>{c.stop(),E&&E.active&&za(E.effects,c)};if(s&&e){const S=e;e=(...A)=>{S(...A),N()}}let _=w?new Array(n.length).fill(ms):ms;const C=S=>{if(!(!(c.flags&1)||!c.dirty&&!S))if(e){const A=c.run();if(i||y||(w?A.some((k,D)=>rr(k,_[D])):rr(A,_))){g&&g();const k=Er;Er=c;try{const D=[A,_===ms?void 0:w&&_[0]===ms?[]:_,v];_=A,h?h(e,3,D):e(...D)}finally{Er=k}}}else c.run()};return l&&l(C),c=new bc(p),c.scheduler=a?()=>a(C,!1):C,v=S=>ad(S,!1,c),g=c.onStop=()=>{const S=Os.get(c);if(S){if(h)h(S,4);else for(const A of S)A();Os.delete(c)}},e?r?C(!0):_=c.run():a?a(C.bind(null,!0),!0):c.run(),N.pause=c.pause.bind(c),N.resume=c.resume.bind(c),N.stop=N,N}function Dn(n,e=1/0,t){if(e<=0||!st(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,dt(n))Dn(n.value,e,t);else if(Ne(n))for(let r=0;r<n.length;r++)Dn(n[r],e,t);else if(ac(n)||Gr(n))n.forEach(r=>{Dn(r,e,t)});else if(cc(n)){for(const r in n)Dn(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Dn(n[r],e,t)}return n}function Fi(n,e,t,r){try{return r?n(...r):n()}catch(i){io(i,e,t)}}function cn(n,e,t,r){if(Ie(n)){const i=Fi(n,e,t,r);return i&&lc(i)&&i.catch(s=>{io(s,e,t)}),i}if(Ne(n)){const i=[];for(let s=0;s<n.length;s++)i.push(cn(n[s],e,t,r));return i}}function io(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||tt;if(e){let l=e.parent;const h=e.proxy,f=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const c=l.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](n,h,f)===!1)return}l=l.parent}if(s){In(),Fi(s,null,10,[n,h,f]),jn();return}}ud(n,t,i,r,a)}function ud(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Ft=[];let vn=-1;const Yr=[];let tr=null,Ur=0;const Mc=Promise.resolve();let As=null;function Ts(n){const e=As||Mc;return n?e.then(this?n.bind(this):n):e}function cd(n){let e=vn+1,t=Ft.length;for(;e<t;){const r=e+t>>>1,i=Ft[r],s=Ri(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function Xa(n){if(!(n.flags&1)){const e=Ri(n),t=Ft[Ft.length-1];!t||!(n.flags&2)&&e>=Ri(t)?Ft.push(n):Ft.splice(cd(e),0,n),n.flags|=1,Ic()}}function Ic(){As||(As=Mc.then($c))}function fd(n){Ne(n)?Yr.push(...n):tr&&n.id===-1?tr.splice(Ur+1,0,n):n.flags&1||(Yr.push(n),n.flags|=1),Ic()}function Vl(n,e,t=vn+1){for(;t<Ft.length;t++){const r=Ft[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Ft.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function jc(n){if(Yr.length){const e=[...new Set(Yr)].sort((t,r)=>Ri(t)-Ri(r));if(Yr.length=0,tr){tr.push(...e);return}for(tr=e,Ur=0;Ur<tr.length;Ur++){const t=tr[Ur];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}tr=null,Ur=0}}const Ri=n=>n.id==null?n.flags&2?-1:1/0:n.id;function $c(n){try{for(vn=0;vn<Ft.length;vn++){const e=Ft[vn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fi(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vn<Ft.length;vn++){const e=Ft[vn];e&&(e.flags&=-2)}vn=-1,Ft.length=0,jc(),As=null,(Ft.length||Yr.length)&&$c()}}let sn=null,Lc=null;function Ps(n){const e=sn;return sn=n,Lc=n&&n.type.__scopeId||null,e}function Cn(n,e=sn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&Ds(-1);const s=Ps(e);let a;try{a=n(...i)}finally{Ps(s),r._d&&Ds(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function yn(n,e){if(sn===null)return n;const t=uo(sn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,a,l,h=tt]=e[i];s&&(Ie(s)&&(s={mounted:s,updated:s}),s.deep&&Dn(a),r.push({dir:s,instance:t,value:a,oldValue:void 0,arg:l,modifiers:h}))}return n}function br(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let a=0;a<i.length;a++){const l=i[a];s&&(l.oldValue=s[a].value);let h=l.dir[r];h&&(In(),cn(h,t,8,[n.el,l,n,e]),jn())}}function hd(n,e){if(Ut){let t=Ut.provides;const r=Ut.parent&&Ut.parent.provides;r===t&&(t=Ut.provides=Object.create(r)),t[n]=e}}function xi(n,e,t=!1){const r=tl();if(r||Or){let i=Or?Or._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Ie(e)?e.call(r&&r.proxy):e}}function dd(){return!!(tl()||Or)}const pd=Symbol.for("v-scx"),gd=()=>xi(pd);function En(n,e,t){return Fc(n,e,t)}function Fc(n,e,t=tt){const{immediate:r,deep:i,flush:s,once:a}=t,l=St({},t),h=e&&r||!e&&s!=="post";let f;if(Mi){if(s==="sync"){const v=gd();f=v.__watcherHandles||(v.__watcherHandles=[])}else if(!h){const v=()=>{};return v.stop=_n,v.resume=_n,v.pause=_n,v}}const c=Ut;l.call=(v,y,w)=>cn(v,c,y,w);let p=!1;s==="post"?l.scheduler=v=>{Lt(v,c&&c.suspense)}:s!=="sync"&&(p=!0,l.scheduler=(v,y)=>{y?v():Xa(v)}),l.augmentJob=v=>{e&&(v.flags|=4),p&&(v.flags|=2,c&&(v.id=c.uid,v.i=c))};const g=ld(n,e,l);return Mi&&(f?f.push(g):h&&g()),g}function md(n,e,t){const r=this.proxy,i=pt(n)?n.includes(".")?Bc(r,n):()=>r[n]:n.bind(r,r);let s;Ie(e)?s=e:(s=e.handler,t=e);const a=Hi(this),l=Fc(i,s.bind(r),t);return a(),l}function Bc(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const zc=Symbol("_vte"),Hc=n=>n.__isTeleport,_i=n=>n&&(n.disabled||n.disabled===""),Gl=n=>n&&(n.defer||n.defer===""),Yl=n=>typeof SVGElement<"u"&&n instanceof SVGElement,Xl=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,_a=(n,e)=>{const t=n&&n.to;return pt(t)?e?e(t):null:t},Uc={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,a,l,h,f){const{mc:c,pc:p,pbc:g,o:{insert:v,querySelector:y,createText:w,createComment:E}}=f,N=_i(e.props);let{shapeFlag:_,children:C,dynamicChildren:S}=e;if(n==null){const A=e.el=w(""),k=e.anchor=w("");v(A,t,r),v(k,t,r);const D=(I,X)=>{_&16&&c(C,I,X,i,s,a,l,h)},T=()=>{const I=e.target=_a(e.props,y),X=Wc(I,e,w,v);I&&(a!=="svg"&&Yl(I)?a="svg":a!=="mathml"&&Xl(I)&&(a="mathml"),i&&i.isCE&&(i.ce._teleportTargets||(i.ce._teleportTargets=new Set)).add(I),N||(D(I,X),_s(e,!1)))};N&&(D(t,k),_s(e,!0)),Gl(e.props)?(e.el.__isMounted=!1,Lt(()=>{T(),delete e.el.__isMounted},s)):T()}else{if(Gl(e.props)&&n.el.__isMounted===!1){Lt(()=>{Uc.process(n,e,t,r,i,s,a,l,h,f)},s);return}e.el=n.el,e.targetStart=n.targetStart;const A=e.anchor=n.anchor,k=e.target=n.target,D=e.targetAnchor=n.targetAnchor,T=_i(n.props),I=T?t:k,X=T?A:D;if(a==="svg"||Yl(k)?a="svg":(a==="mathml"||Xl(k))&&(a="mathml"),S?(g(n.dynamicChildren,S,I,i,s,a,l),Qa(n,e,!0)):h||p(n,e,I,X,i,s,a,l,!1),N)T?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):vs(e,t,A,f,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const te=e.target=_a(e.props,y);te&&vs(e,te,null,f,0)}else T&&vs(e,k,D,f,1);_s(e,N)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:l,anchor:h,targetStart:f,targetAnchor:c,target:p,props:g}=n;if(p&&(i(f),i(c)),s&&i(h),a&16){const v=s||!_i(g);for(let y=0;y<l.length;y++){const w=l[y];r(w,e,t,v,!!w.dynamicChildren)}}},move:vs,hydrate:vd};function vs(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:a,anchor:l,shapeFlag:h,children:f,props:c}=n,p=s===2;if(p&&r(a,e,t),(!p||_i(c))&&h&16)for(let g=0;g<f.length;g++)i(f[g],e,t,2);p&&r(l,e,t)}function vd(n,e,t,r,i,s,{o:{nextSibling:a,parentNode:l,querySelector:h,insert:f,createText:c}},p){function g(w,E,N,_){E.anchor=p(a(w),E,l(w),t,r,i,s),E.targetStart=N,E.targetAnchor=_}const v=e.target=_a(e.props,h),y=_i(e.props);if(v){const w=v._lpa||v.firstChild;if(e.shapeFlag&16)if(y)g(n,e,w,w&&a(w));else{e.anchor=a(n);let E=w;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&a(e.targetAnchor);break}}E=a(E)}e.targetAnchor||Wc(v,e,c,f),p(w&&a(w),e,v,t,r,i,s)}_s(e,y)}else y&&e.shapeFlag&16&&g(n,e,n,a(n));return e.anchor&&a(e.anchor)}const Bi=Uc;function _s(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Wc(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[zc]=s,n&&(r(i,n),r(s,n)),s}const Pn=Symbol("_leaveCb"),ys=Symbol("_enterCb");function yd(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return zi(()=>{n.isMounted=!0}),Zc(()=>{n.isUnmounting=!0}),n}const en=[Function,Array],Kc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:en,onEnter:en,onAfterEnter:en,onEnterCancelled:en,onBeforeLeave:en,onLeave:en,onAfterLeave:en,onLeaveCancelled:en,onBeforeAppear:en,onAppear:en,onAfterAppear:en,onAppearCancelled:en},qc=n=>{const e=n.subTree;return e.component?qc(e.component):e},bd={name:"BaseTransition",props:Kc,setup(n,{slots:e}){const t=tl(),r=yd();return()=>{const i=e.default&&Yc(e.default(),!0);if(!i||!i.length)return;const s=Vc(i),a=He(n),{mode:l}=a;if(r.isLeaving)return Zo(s);const h=Jl(s);if(!h)return Zo(s);let f=Ea(h,a,r,t,p=>f=p);h.type!==Ht&&Ni(h,f);let c=t.subTree&&Jl(t.subTree);if(c&&c.type!==Ht&&!Cr(c,h)&&qc(t).type!==Ht){let p=Ea(c,a,r,t);if(Ni(c,p),l==="out-in"&&h.type!==Ht)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,c=void 0},Zo(s);l==="in-out"&&h.type!==Ht?p.delayLeave=(g,v,y)=>{const w=Gc(r,c);w[String(c.key)]=c,g[Pn]=()=>{v(),g[Pn]=void 0,delete f.delayedLeave,c=void 0},f.delayedLeave=()=>{y(),delete f.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function Vc(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Ht){e=t;break}}return e}const wd=bd;function Gc(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Ea(n,e,t,r,i){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:h,onEnter:f,onAfterEnter:c,onEnterCancelled:p,onBeforeLeave:g,onLeave:v,onAfterLeave:y,onLeaveCancelled:w,onBeforeAppear:E,onAppear:N,onAfterAppear:_,onAppearCancelled:C}=e,S=String(n.key),A=Gc(t,n),k=(I,X)=>{I&&cn(I,r,9,X)},D=(I,X)=>{const te=X[1];k(I,X),Ne(I)?I.every(J=>J.length<=1)&&te():I.length<=1&&te()},T={mode:a,persisted:l,beforeEnter(I){let X=h;if(!t.isMounted)if(s)X=E||h;else return;I[Pn]&&I[Pn](!0);const te=A[S];te&&Cr(n,te)&&te.el[Pn]&&te.el[Pn](),k(X,[I])},enter(I){let X=f,te=c,J=p;if(!t.isMounted)if(s)X=N||f,te=_||c,J=C||p;else return;let F=!1;const ne=I[ys]=Z=>{F||(F=!0,Z?k(J,[I]):k(te,[I]),T.delayedLeave&&T.delayedLeave(),I[ys]=void 0)};X?D(X,[I,ne]):ne()},leave(I,X){const te=String(n.key);if(I[ys]&&I[ys](!0),t.isUnmounting)return X();k(g,[I]);let J=!1;const F=I[Pn]=ne=>{J||(J=!0,X(),ne?k(w,[I]):k(y,[I]),I[Pn]=void 0,A[te]===n&&delete A[te])};A[te]=n,v?D(v,[I,F]):F()},clone(I){const X=Ea(I,e,t,r,i);return i&&i(X),X}};return T}function Zo(n){if(so(n))return n=lr(n),n.children=null,n}function Jl(n){if(!so(n))return Hc(n.type)&&n.children?Vc(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Ie(t.default))return t.default()}}function Ni(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Ni(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Yc(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let a=n[s];const l=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===lt?(a.patchFlag&128&&i++,r=r.concat(Yc(a.children,e,l))):(e||a.type!==Ht)&&r.push(l!=null?lr(a,{key:l}):a)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function fn(n,e){return Ie(n)?St({name:n.name},e,{setup:n}):n}function Xc(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}const Rs=new WeakMap;function Ei(n,e,t,r,i=!1){if(Ne(n)){n.forEach((y,w)=>Ei(y,e&&(Ne(e)?e[w]:e),t,r,i));return}if(Ci(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ei(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?uo(r.component):r.el,a=i?null:s,{i:l,r:h}=n,f=e&&e.r,c=l.refs===tt?l.refs={}:l.refs,p=l.setupState,g=He(p),v=p===tt?oc:y=>Xe(g,y);if(f!=null&&f!==h){if(Zl(e),pt(f))c[f]=null,v(f)&&(p[f]=null);else if(dt(f)){f.value=null;const y=e;y.k&&(c[y.k]=null)}}if(Ie(h))Fi(h,l,12,[a,c]);else{const y=pt(h),w=dt(h);if(y||w){const E=()=>{if(n.f){const N=y?v(h)?p[h]:c[h]:h.value;if(i)Ne(N)&&za(N,s);else if(Ne(N))N.includes(s)||N.push(s);else if(y)c[h]=[s],v(h)&&(p[h]=c[h]);else{const _=[s];h.value=_,n.k&&(c[n.k]=_)}}else y?(c[h]=a,v(h)&&(p[h]=a)):w&&(h.value=a,n.k&&(c[n.k]=a))};if(a){const N=()=>{E(),Rs.delete(n)};N.id=-1,Rs.set(n,N),Lt(N,t)}else Zl(n),E()}}}function Zl(n){const e=Rs.get(n);e&&(e.flags|=8,Rs.delete(n))}eo().requestIdleCallback;eo().cancelIdleCallback;const Ci=n=>!!n.type.__asyncLoader,so=n=>n.type.__isKeepAlive;function xd(n,e){Jc(n,"a",e)}function _d(n,e){Jc(n,"da",e)}function Jc(n,e,t=Ut){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(oo(e,r,t),t){let i=t.parent;for(;i&&i.parent;)so(i.parent.vnode)&&Ed(r,e,t,i),i=i.parent}}function Ed(n,e,t,r){const i=oo(e,n,r,!0);Zr(()=>{za(r[e],i)},t)}function oo(n,e,t=Ut,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{In();const l=Hi(t),h=cn(e,t,n,a);return l(),jn(),h});return r?i.unshift(s):i.push(s),s}}const Bn=n=>(e,t=Ut)=>{(!Mi||n==="sp")&&oo(n,(...r)=>e(...r),t)},Cd=Bn("bm"),zi=Bn("m"),Sd=Bn("bu"),kd=Bn("u"),Zc=Bn("bum"),Zr=Bn("um"),Od=Bn("sp"),Ad=Bn("rtg"),Td=Bn("rtc");function Pd(n,e=Ut){oo("ec",n,e)}const Rd=Symbol.for("v-ndc");function ar(n,e,t,r){let i;const s=t,a=Ne(n);if(a||pt(n)){const l=a&&Mn(n);let h=!1,f=!1;l&&(h=!Jt(n),f=$n(n),n=to(n)),i=new Array(n.length);for(let c=0,p=n.length;c<p;c++)i[c]=e(h?f?Xr(un(n[c])):un(n[c]):n[c],c,void 0,s)}else if(typeof n=="number"){i=new Array(n);for(let l=0;l<n;l++)i[l]=e(l+1,l,void 0,s)}else if(st(n))if(n[Symbol.iterator])i=Array.from(n,(l,h)=>e(l,h,void 0,s));else{const l=Object.keys(n);i=new Array(l.length);for(let h=0,f=l.length;h<f;h++){const c=l[h];i[h]=e(n[c],c,h,s)}}else i=[];return i}const Ca=n=>n?vf(n)?uo(n):Ca(n.parent):null,Si=St(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ca(n.parent),$root:n=>Ca(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>ef(n),$forceUpdate:n=>n.f||(n.f=()=>{Xa(n.update)}),$nextTick:n=>n.n||(n.n=Ts.bind(n.proxy)),$watch:n=>md.bind(n)}),Qo=(n,e)=>n!==tt&&!n.__isScriptSetup&&Xe(n,e),Nd={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:a,type:l,appContext:h}=n;if(e[0]!=="$"){const g=a[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(Qo(r,e))return a[e]=1,r[e];if(i!==tt&&Xe(i,e))return a[e]=2,i[e];if(Xe(s,e))return a[e]=3,s[e];if(t!==tt&&Xe(t,e))return a[e]=4,t[e];Sa&&(a[e]=0)}}const f=Si[e];let c,p;if(f)return e==="$attrs"&&Pt(n.attrs,"get",""),f(n);if((c=l.__cssModules)&&(c=c[e]))return c;if(t!==tt&&Xe(t,e))return a[e]=4,t[e];if(p=h.config.globalProperties,Xe(p,e))return p[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return Qo(i,e)?(i[e]=t,!0):r!==tt&&Xe(r,e)?(r[e]=t,!0):Xe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,props:s,type:a}},l){let h;return!!(t[l]||n!==tt&&l[0]!=="$"&&Xe(n,l)||Qo(e,l)||Xe(s,l)||Xe(r,l)||Xe(Si,l)||Xe(i.config.globalProperties,l)||(h=a.__cssModules)&&h[l])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Xe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Ql(n){return Ne(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let Sa=!0;function Dd(n){const e=ef(n),t=n.proxy,r=n.ctx;Sa=!1,e.beforeCreate&&eu(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:a,watch:l,provide:h,inject:f,created:c,beforeMount:p,mounted:g,beforeUpdate:v,updated:y,activated:w,deactivated:E,beforeDestroy:N,beforeUnmount:_,destroyed:C,unmounted:S,render:A,renderTracked:k,renderTriggered:D,errorCaptured:T,serverPrefetch:I,expose:X,inheritAttrs:te,components:J,directives:F,filters:ne}=e;if(f&&Md(f,r,null),a)for(const _e in a){const Oe=a[_e];Ie(Oe)&&(r[_e]=Oe.bind(t))}if(i){const _e=i.call(t,t);st(_e)&&(n.data=no(_e))}if(Sa=!0,s)for(const _e in s){const Oe=s[_e],ze=Ie(Oe)?Oe.bind(t,t):Ie(Oe.get)?Oe.get.bind(t,t):_n,et=!Ie(Oe)&&Ie(Oe.set)?Oe.set.bind(t):_n,qe=Ge({get:ze,set:et});Object.defineProperty(r,_e,{enumerable:!0,configurable:!0,get:()=>qe.value,set:Ye=>qe.value=Ye})}if(l)for(const _e in l)Qc(l[_e],r,t,_e);if(h){const _e=Ie(h)?h.call(t):h;Reflect.ownKeys(_e).forEach(Oe=>{hd(Oe,_e[Oe])})}c&&eu(c,n,"c");function ue(_e,Oe){Ne(Oe)?Oe.forEach(ze=>_e(ze.bind(t))):Oe&&_e(Oe.bind(t))}if(ue(Cd,p),ue(zi,g),ue(Sd,v),ue(kd,y),ue(xd,w),ue(_d,E),ue(Pd,T),ue(Td,k),ue(Ad,D),ue(Zc,_),ue(Zr,S),ue(Od,I),Ne(X))if(X.length){const _e=n.exposed||(n.exposed={});X.forEach(Oe=>{Object.defineProperty(_e,Oe,{get:()=>t[Oe],set:ze=>t[Oe]=ze,enumerable:!0})})}else n.exposed||(n.exposed={});A&&n.render===_n&&(n.render=A),te!=null&&(n.inheritAttrs=te),J&&(n.components=J),F&&(n.directives=F),I&&Xc(n)}function Md(n,e,t=_n){Ne(n)&&(n=ka(n));for(const r in n){const i=n[r];let s;st(i)?"default"in i?s=xi(i.from||r,i.default,!0):s=xi(i.from||r):s=xi(i),dt(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[r]=s}}function eu(n,e,t){cn(Ne(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function Qc(n,e,t,r){let i=r.includes(".")?Bc(t,r):()=>t[r];if(pt(n)){const s=e[n];Ie(s)&&En(i,s)}else if(Ie(n))En(i,n.bind(t));else if(st(n))if(Ne(n))n.forEach(s=>Qc(s,e,t,r));else{const s=Ie(n.handler)?n.handler.bind(t):e[n.handler];Ie(s)&&En(i,s,n)}}function ef(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,l=s.get(e);let h;return l?h=l:!i.length&&!t&&!r?h=e:(h={},i.length&&i.forEach(f=>Ns(h,f,a,!0)),Ns(h,e,a)),st(e)&&s.set(e,h),h}function Ns(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Ns(n,s,t,!0),i&&i.forEach(a=>Ns(n,a,t,!0));for(const a in e)if(!(r&&a==="expose")){const l=Id[a]||t&&t[a];n[a]=l?l(n[a],e[a]):e[a]}return n}const Id={data:tu,props:nu,emits:nu,methods:mi,computed:mi,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:mi,directives:mi,watch:$d,provide:tu,inject:jd};function tu(n,e){return e?n?function(){return St(Ie(n)?n.call(this,this):n,Ie(e)?e.call(this,this):e)}:e:n}function jd(n,e){return mi(ka(n),ka(e))}function ka(n){if(Ne(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function jt(n,e){return n?[...new Set([].concat(n,e))]:e}function mi(n,e){return n?St(Object.create(null),n,e):e}function nu(n,e){return n?Ne(n)&&Ne(e)?[...new Set([...n,...e])]:St(Object.create(null),Ql(n),Ql(e??{})):e}function $d(n,e){if(!n)return e;if(!e)return n;const t=St(Object.create(null),n);for(const r in e)t[r]=jt(n[r],e[r]);return t}function tf(){return{app:null,config:{isNativeTag:oc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ld=0;function Fd(n,e){return function(r,i=null){Ie(r)||(r=St({},r)),i!=null&&!st(i)&&(i=null);const s=tf(),a=new WeakSet,l=[];let h=!1;const f=s.app={_uid:Ld++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:mp,get config(){return s.config},set config(c){},use(c,...p){return a.has(c)||(c&&Ie(c.install)?(a.add(c),c.install(f,...p)):Ie(c)&&(a.add(c),c(f,...p))),f},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),f},component(c,p){return p?(s.components[c]=p,f):s.components[c]},directive(c,p){return p?(s.directives[c]=p,f):s.directives[c]},mount(c,p,g){if(!h){const v=f._ceVNode||Ze(r,i);return v.appContext=s,g===!0?g="svg":g===!1&&(g=void 0),n(v,c,g),h=!0,f._container=c,c.__vue_app__=f,uo(v.component)}},onUnmount(c){l.push(c)},unmount(){h&&(cn(l,f._instance,16),n(null,f._container),delete f._container.__vue_app__)},provide(c,p){return s.provides[c]=p,f},runWithContext(c){const p=Or;Or=f;try{return c()}finally{Or=p}}};return f}}let Or=null;const Bd=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${sr(e)}Modifiers`]||n[`${cr(e)}Modifiers`];function zd(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||tt;let i=t;const s=e.startsWith("update:"),a=s&&Bd(r,e.slice(7));a&&(a.trim&&(i=t.map(c=>pt(c)?c.trim():c)),a.number&&(i=t.map(Ha)));let l,h=r[l=Vo(e)]||r[l=Vo(sr(e))];!h&&s&&(h=r[l=Vo(cr(e))]),h&&cn(h,n,6,i);const f=r[l+"Once"];if(f){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,cn(f,n,6,i)}}const Hd=new WeakMap;function nf(n,e,t=!1){const r=t?Hd:e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let a={},l=!1;if(!Ie(n)){const h=f=>{const c=nf(f,e,!0);c&&(l=!0,St(a,c))};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!s&&!l?(st(n)&&r.set(n,null),null):(Ne(s)?s.forEach(h=>a[h]=null):St(a,s),st(n)&&r.set(n,a),a)}function ao(n,e){return!n||!Xs(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(n,e[0].toLowerCase()+e.slice(1))||Xe(n,cr(e))||Xe(n,e))}function ru(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:a,attrs:l,emit:h,render:f,renderCache:c,props:p,data:g,setupState:v,ctx:y,inheritAttrs:w}=n,E=Ps(n);let N,_;try{if(t.shapeFlag&4){const S=i||r,A=S;N=bn(f.call(A,S,c,p,v,g,y)),_=l}else{const S=e;N=bn(S.length>1?S(p,{attrs:l,slots:a,emit:h}):S(p,null)),_=e.props?l:Ud(l)}}catch(S){ki.length=0,io(S,n,1),N=Ze(Ht)}let C=N;if(_&&w!==!1){const S=Object.keys(_),{shapeFlag:A}=C;S.length&&A&7&&(s&&S.some(Ba)&&(_=Wd(_,s)),C=lr(C,_,!1,!0))}return t.dirs&&(C=lr(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(t.dirs):t.dirs),t.transition&&Ni(C,t.transition),N=C,Ps(E),N}const Ud=n=>{let e;for(const t in n)(t==="class"||t==="style"||Xs(t))&&((e||(e={}))[t]=n[t]);return e},Wd=(n,e)=>{const t={};for(const r in n)(!Ba(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function Kd(n,e,t){const{props:r,children:i,component:s}=n,{props:a,children:l,patchFlag:h}=e,f=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&h>=0){if(h&1024)return!0;if(h&16)return r?iu(r,a,f):!!a;if(h&8){const c=e.dynamicProps;for(let p=0;p<c.length;p++){const g=c[p];if(a[g]!==r[g]&&!ao(f,g))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?iu(r,a,f):!0:!!a;return!1}function iu(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!ao(t,s))return!0}return!1}function qd({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const rf={},sf=()=>Object.create(rf),of=n=>Object.getPrototypeOf(n)===rf;function Vd(n,e,t,r=!1){const i={},s=sf();n.propsDefaults=Object.create(null),af(n,e,i,s);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);t?n.props=r?i:Zh(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function Gd(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=n,l=He(i),[h]=n.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const c=n.vnode.dynamicProps;for(let p=0;p<c.length;p++){let g=c[p];if(ao(n.emitsOptions,g))continue;const v=e[g];if(h)if(Xe(s,g))v!==s[g]&&(s[g]=v,f=!0);else{const y=sr(g);i[y]=Oa(h,l,y,v,n,!1)}else v!==s[g]&&(s[g]=v,f=!0)}}}else{af(n,e,i,s)&&(f=!0);let c;for(const p in l)(!e||!Xe(e,p)&&((c=cr(p))===p||!Xe(e,c)))&&(h?t&&(t[p]!==void 0||t[c]!==void 0)&&(i[p]=Oa(h,l,p,void 0,n,!0)):delete i[p]);if(s!==l)for(const p in s)(!e||!Xe(e,p))&&(delete s[p],f=!0)}f&&Nn(n.attrs,"set","")}function af(n,e,t,r){const[i,s]=n.propsOptions;let a=!1,l;if(e)for(let h in e){if(yi(h))continue;const f=e[h];let c;i&&Xe(i,c=sr(h))?!s||!s.includes(c)?t[c]=f:(l||(l={}))[c]=f:ao(n.emitsOptions,h)||(!(h in r)||f!==r[h])&&(r[h]=f,a=!0)}if(s){const h=He(t),f=l||tt;for(let c=0;c<s.length;c++){const p=s[c];t[p]=Oa(i,h,p,f[p],n,!Xe(f,p))}}return a}function Oa(n,e,t,r,i,s){const a=n[t];if(a!=null){const l=Xe(a,"default");if(l&&r===void 0){const h=a.default;if(a.type!==Function&&!a.skipFactory&&Ie(h)){const{propsDefaults:f}=i;if(t in f)r=f[t];else{const c=Hi(i);r=f[t]=h.call(null,e),c()}}else r=h;i.ce&&i.ce._setProp(t,r)}a[0]&&(s&&!l?r=!1:a[1]&&(r===""||r===cr(t))&&(r=!0))}return r}const Yd=new WeakMap;function lf(n,e,t=!1){const r=t?Yd:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,a={},l=[];let h=!1;if(!Ie(n)){const c=p=>{h=!0;const[g,v]=lf(p,e,!0);St(a,g),v&&l.push(...v)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!s&&!h)return st(n)&&r.set(n,Vr),Vr;if(Ne(s))for(let c=0;c<s.length;c++){const p=sr(s[c]);su(p)&&(a[p]=tt)}else if(s)for(const c in s){const p=sr(c);if(su(p)){const g=s[c],v=a[p]=Ne(g)||Ie(g)?{type:g}:St({},g),y=v.type;let w=!1,E=!0;if(Ne(y))for(let N=0;N<y.length;++N){const _=y[N],C=Ie(_)&&_.name;if(C==="Boolean"){w=!0;break}else C==="String"&&(E=!1)}else w=Ie(y)&&y.name==="Boolean";v[0]=w,v[1]=E,(w||Xe(v,"default"))&&l.push(p)}}const f=[a,l];return st(n)&&r.set(n,f),f}function su(n){return n[0]!=="$"&&!yi(n)}const Ja=n=>n==="_"||n==="_ctx"||n==="$stable",Za=n=>Ne(n)?n.map(bn):[bn(n)],Xd=(n,e,t)=>{if(e._n)return e;const r=Cn((...i)=>Za(e(...i)),t);return r._c=!1,r},uf=(n,e,t)=>{const r=n._ctx;for(const i in n){if(Ja(i))continue;const s=n[i];if(Ie(s))e[i]=Xd(i,s,r);else if(s!=null){const a=Za(s);e[i]=()=>a}}},cf=(n,e)=>{const t=Za(e);n.slots.default=()=>t},ff=(n,e,t)=>{for(const r in e)(t||!Ja(r))&&(n[r]=e[r])},Jd=(n,e,t)=>{const r=n.slots=sf();if(n.vnode.shapeFlag&32){const i=e._;i?(ff(r,e,t),t&&hc(r,"_",i,!0)):uf(e,r)}else e&&cf(n,e)},Zd=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,a=tt;if(r.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:ff(i,e,t):(s=!e.$stable,uf(e,i)),a=e}else e&&(cf(n,e),a={default:1});if(s)for(const l in i)!Ja(l)&&a[l]==null&&delete i[l]},Lt=rp;function Qd(n){return ep(n)}function ep(n,e){const t=eo();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:l,createComment:h,setText:f,setElementText:c,parentNode:p,nextSibling:g,setScopeId:v=_n,insertStaticContent:y}=n,w=(P,z,Q,se=null,oe=null,ae=null,ve=void 0,pe=null,fe=!!z.dynamicChildren)=>{if(P===z)return;P&&!Cr(P,z)&&(se=Hn(P),Ye(P,oe,ae,!0),P=null),z.patchFlag===-2&&(fe=!1,z.dynamicChildren=null);const{type:ie,ref:Te,shapeFlag:ye}=z;switch(ie){case lo:E(P,z,Q,se);break;case Ht:N(P,z,Q,se);break;case ta:P==null&&_(z,Q,se,ve);break;case lt:J(P,z,Q,se,oe,ae,ve,pe,fe);break;default:ye&1?A(P,z,Q,se,oe,ae,ve,pe,fe):ye&6?F(P,z,Q,se,oe,ae,ve,pe,fe):(ye&64||ye&128)&&ie.process(P,z,Q,se,oe,ae,ve,pe,fe,Un)}Te!=null&&oe?Ei(Te,P&&P.ref,ae,z||P,!z):Te==null&&P&&P.ref!=null&&Ei(P.ref,null,ae,P,!0)},E=(P,z,Q,se)=>{if(P==null)r(z.el=l(z.children),Q,se);else{const oe=z.el=P.el;z.children!==P.children&&f(oe,z.children)}},N=(P,z,Q,se)=>{P==null?r(z.el=h(z.children||""),Q,se):z.el=P.el},_=(P,z,Q,se)=>{[P.el,P.anchor]=y(P.children,z,Q,se,P.el,P.anchor)},C=({el:P,anchor:z},Q,se)=>{let oe;for(;P&&P!==z;)oe=g(P),r(P,Q,se),P=oe;r(z,Q,se)},S=({el:P,anchor:z})=>{let Q;for(;P&&P!==z;)Q=g(P),i(P),P=Q;i(z)},A=(P,z,Q,se,oe,ae,ve,pe,fe)=>{if(z.type==="svg"?ve="svg":z.type==="math"&&(ve="mathml"),P==null)k(z,Q,se,oe,ae,ve,pe,fe);else{const ie=P.el&&P.el._isVueCE?P.el:null;try{ie&&ie._beginPatch(),I(P,z,oe,ae,ve,pe,fe)}finally{ie&&ie._endPatch()}}},k=(P,z,Q,se,oe,ae,ve,pe)=>{let fe,ie;const{props:Te,shapeFlag:ye,transition:Se,dirs:Pe}=P;if(fe=P.el=a(P.type,ae,Te&&Te.is,Te),ye&8?c(fe,P.children):ye&16&&T(P.children,fe,null,se,oe,ea(P,ae),ve,pe),Pe&&br(P,null,se,"created"),D(fe,P,P.scopeId,ve,se),Te){for(const We in Te)We!=="value"&&!yi(We)&&s(fe,We,null,Te[We],ae,se);"value"in Te&&s(fe,"value",null,Te.value,ae),(ie=Te.onVnodeBeforeMount)&&mn(ie,se,P)}Pe&&br(P,null,se,"beforeMount");const je=tp(oe,Se);je&&Se.beforeEnter(fe),r(fe,z,Q),((ie=Te&&Te.onVnodeMounted)||je||Pe)&&Lt(()=>{ie&&mn(ie,se,P),je&&Se.enter(fe),Pe&&br(P,null,se,"mounted")},oe)},D=(P,z,Q,se,oe)=>{if(Q&&v(P,Q),se)for(let ae=0;ae<se.length;ae++)v(P,se[ae]);if(oe){let ae=oe.subTree;if(z===ae||pf(ae.type)&&(ae.ssContent===z||ae.ssFallback===z)){const ve=oe.vnode;D(P,ve,ve.scopeId,ve.slotScopeIds,oe.parent)}}},T=(P,z,Q,se,oe,ae,ve,pe,fe=0)=>{for(let ie=fe;ie<P.length;ie++){const Te=P[ie]=pe?nr(P[ie]):bn(P[ie]);w(null,Te,z,Q,se,oe,ae,ve,pe)}},I=(P,z,Q,se,oe,ae,ve)=>{const pe=z.el=P.el;let{patchFlag:fe,dynamicChildren:ie,dirs:Te}=z;fe|=P.patchFlag&16;const ye=P.props||tt,Se=z.props||tt;let Pe;if(Q&&wr(Q,!1),(Pe=Se.onVnodeBeforeUpdate)&&mn(Pe,Q,z,P),Te&&br(z,P,Q,"beforeUpdate"),Q&&wr(Q,!0),(ye.innerHTML&&Se.innerHTML==null||ye.textContent&&Se.textContent==null)&&c(pe,""),ie?X(P.dynamicChildren,ie,pe,Q,se,ea(z,oe),ae):ve||Oe(P,z,pe,null,Q,se,ea(z,oe),ae,!1),fe>0){if(fe&16)te(pe,ye,Se,Q,oe);else if(fe&2&&ye.class!==Se.class&&s(pe,"class",null,Se.class,oe),fe&4&&s(pe,"style",ye.style,Se.style,oe),fe&8){const je=z.dynamicProps;for(let We=0;We<je.length;We++){const Ke=je[We],vt=ye[Ke],xt=Se[Ke];(xt!==vt||Ke==="value")&&s(pe,Ke,vt,xt,oe,Q)}}fe&1&&P.children!==z.children&&c(pe,z.children)}else!ve&&ie==null&&te(pe,ye,Se,Q,oe);((Pe=Se.onVnodeUpdated)||Te)&&Lt(()=>{Pe&&mn(Pe,Q,z,P),Te&&br(z,P,Q,"updated")},se)},X=(P,z,Q,se,oe,ae,ve)=>{for(let pe=0;pe<z.length;pe++){const fe=P[pe],ie=z[pe],Te=fe.el&&(fe.type===lt||!Cr(fe,ie)||fe.shapeFlag&198)?p(fe.el):Q;w(fe,ie,Te,null,se,oe,ae,ve,!0)}},te=(P,z,Q,se,oe)=>{if(z!==Q){if(z!==tt)for(const ae in z)!yi(ae)&&!(ae in Q)&&s(P,ae,z[ae],null,oe,se);for(const ae in Q){if(yi(ae))continue;const ve=Q[ae],pe=z[ae];ve!==pe&&ae!=="value"&&s(P,ae,pe,ve,oe,se)}"value"in Q&&s(P,"value",z.value,Q.value,oe)}},J=(P,z,Q,se,oe,ae,ve,pe,fe)=>{const ie=z.el=P?P.el:l(""),Te=z.anchor=P?P.anchor:l("");let{patchFlag:ye,dynamicChildren:Se,slotScopeIds:Pe}=z;Pe&&(pe=pe?pe.concat(Pe):Pe),P==null?(r(ie,Q,se),r(Te,Q,se),T(z.children||[],Q,Te,oe,ae,ve,pe,fe)):ye>0&&ye&64&&Se&&P.dynamicChildren&&P.dynamicChildren.length===Se.length?(X(P.dynamicChildren,Se,Q,oe,ae,ve,pe),(z.key!=null||oe&&z===oe.subTree)&&Qa(P,z,!0)):Oe(P,z,Q,Te,oe,ae,ve,pe,fe)},F=(P,z,Q,se,oe,ae,ve,pe,fe)=>{z.slotScopeIds=pe,P==null?z.shapeFlag&512?oe.ctx.activate(z,Q,se,ve,fe):ne(z,Q,se,oe,ae,ve,fe):Z(P,z,fe)},ne=(P,z,Q,se,oe,ae,ve)=>{const pe=P.component=cp(P,se,oe);if(so(P)&&(pe.ctx.renderer=Un),fp(pe,!1,ve),pe.asyncDep){if(oe&&oe.registerDep(pe,ue,ve),!P.el){const fe=pe.subTree=Ze(Ht);N(null,fe,z,Q),P.placeholder=fe.el}}else ue(pe,P,z,Q,oe,ae,ve)},Z=(P,z,Q)=>{const se=z.component=P.component;if(Kd(P,z,Q))if(se.asyncDep&&!se.asyncResolved){_e(se,z,Q);return}else se.next=z,se.update();else z.el=P.el,se.vnode=z},ue=(P,z,Q,se,oe,ae,ve)=>{const pe=()=>{if(P.isMounted){let{next:ye,bu:Se,u:Pe,parent:je,vnode:We}=P;{const _t=hf(P);if(_t){ye&&(ye.el=We.el,_e(P,ye,ve)),_t.asyncDep.then(()=>{P.isUnmounted||pe()});return}}let Ke=ye,vt;wr(P,!1),ye?(ye.el=We.el,_e(P,ye,ve)):ye=We,Se&&xs(Se),(vt=ye.props&&ye.props.onVnodeBeforeUpdate)&&mn(vt,je,ye,We),wr(P,!0);const xt=ru(P),Dt=P.subTree;P.subTree=xt,w(Dt,xt,p(Dt.el),Hn(Dt),P,oe,ae),ye.el=xt.el,Ke===null&&qd(P,xt.el),Pe&&Lt(Pe,oe),(vt=ye.props&&ye.props.onVnodeUpdated)&&Lt(()=>mn(vt,je,ye,We),oe)}else{let ye;const{el:Se,props:Pe}=z,{bm:je,m:We,parent:Ke,root:vt,type:xt}=P,Dt=Ci(z);wr(P,!1),je&&xs(je),!Dt&&(ye=Pe&&Pe.onVnodeBeforeMount)&&mn(ye,Ke,z),wr(P,!0);{vt.ce&&vt.ce._def.shadowRoot!==!1&&vt.ce._injectChildStyle(xt);const _t=P.subTree=ru(P);w(null,_t,Q,se,P,oe,ae),z.el=_t.el}if(We&&Lt(We,oe),!Dt&&(ye=Pe&&Pe.onVnodeMounted)){const _t=z;Lt(()=>mn(ye,Ke,_t),oe)}(z.shapeFlag&256||Ke&&Ci(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&P.a&&Lt(P.a,oe),P.isMounted=!0,z=Q=se=null}};P.scope.on();const fe=P.effect=new bc(pe);P.scope.off();const ie=P.update=fe.run.bind(fe),Te=P.job=fe.runIfDirty.bind(fe);Te.i=P,Te.id=P.uid,fe.scheduler=()=>Xa(Te),wr(P,!0),ie()},_e=(P,z,Q)=>{z.component=P;const se=P.vnode.props;P.vnode=z,P.next=null,Gd(P,z.props,se,Q),Zd(P,z.children,Q),In(),Vl(P),jn()},Oe=(P,z,Q,se,oe,ae,ve,pe,fe=!1)=>{const ie=P&&P.children,Te=P?P.shapeFlag:0,ye=z.children,{patchFlag:Se,shapeFlag:Pe}=z;if(Se>0){if(Se&128){et(ie,ye,Q,se,oe,ae,ve,pe,fe);return}else if(Se&256){ze(ie,ye,Q,se,oe,ae,ve,pe,fe);return}}Pe&8?(Te&16&&qt(ie,oe,ae),ye!==ie&&c(Q,ye)):Te&16?Pe&16?et(ie,ye,Q,se,oe,ae,ve,pe,fe):qt(ie,oe,ae,!0):(Te&8&&c(Q,""),Pe&16&&T(ye,Q,se,oe,ae,ve,pe,fe))},ze=(P,z,Q,se,oe,ae,ve,pe,fe)=>{P=P||Vr,z=z||Vr;const ie=P.length,Te=z.length,ye=Math.min(ie,Te);let Se;for(Se=0;Se<ye;Se++){const Pe=z[Se]=fe?nr(z[Se]):bn(z[Se]);w(P[Se],Pe,Q,null,oe,ae,ve,pe,fe)}ie>Te?qt(P,oe,ae,!0,!1,ye):T(z,Q,se,oe,ae,ve,pe,fe,ye)},et=(P,z,Q,se,oe,ae,ve,pe,fe)=>{let ie=0;const Te=z.length;let ye=P.length-1,Se=Te-1;for(;ie<=ye&&ie<=Se;){const Pe=P[ie],je=z[ie]=fe?nr(z[ie]):bn(z[ie]);if(Cr(Pe,je))w(Pe,je,Q,null,oe,ae,ve,pe,fe);else break;ie++}for(;ie<=ye&&ie<=Se;){const Pe=P[ye],je=z[Se]=fe?nr(z[Se]):bn(z[Se]);if(Cr(Pe,je))w(Pe,je,Q,null,oe,ae,ve,pe,fe);else break;ye--,Se--}if(ie>ye){if(ie<=Se){const Pe=Se+1,je=Pe<Te?z[Pe].el:se;for(;ie<=Se;)w(null,z[ie]=fe?nr(z[ie]):bn(z[ie]),Q,je,oe,ae,ve,pe,fe),ie++}}else if(ie>Se)for(;ie<=ye;)Ye(P[ie],oe,ae,!0),ie++;else{const Pe=ie,je=ie,We=new Map;for(ie=je;ie<=Se;ie++){const ht=z[ie]=fe?nr(z[ie]):bn(z[ie]);ht.key!=null&&We.set(ht.key,ie)}let Ke,vt=0;const xt=Se-je+1;let Dt=!1,_t=0;const hn=new Array(xt);for(ie=0;ie<xt;ie++)hn[ie]=0;for(ie=Pe;ie<=ye;ie++){const ht=P[ie];if(vt>=xt){Ye(ht,oe,ae,!0);continue}let we;if(ht.key!=null)we=We.get(ht.key);else for(Ke=je;Ke<=Se;Ke++)if(hn[Ke-je]===0&&Cr(ht,z[Ke])){we=Ke;break}we===void 0?Ye(ht,oe,ae,!0):(hn[we-je]=ie+1,we>=_t?_t=we:Dt=!0,w(ht,z[we],Q,null,oe,ae,ve,pe,fe),vt++)}const Nr=Dt?np(hn):Vr;for(Ke=Nr.length-1,ie=xt-1;ie>=0;ie--){const ht=je+ie,we=z[ht],Wn=z[ht+1],dn=ht+1<Te?Wn.el||df(Wn):se;hn[ie]===0?w(null,we,Q,dn,oe,ae,ve,pe,fe):Dt&&(Ke<0||ie!==Nr[Ke]?qe(we,Q,dn,2):Ke--)}}},qe=(P,z,Q,se,oe=null)=>{const{el:ae,type:ve,transition:pe,children:fe,shapeFlag:ie}=P;if(ie&6){qe(P.component.subTree,z,Q,se);return}if(ie&128){P.suspense.move(z,Q,se);return}if(ie&64){ve.move(P,z,Q,Un);return}if(ve===lt){r(ae,z,Q);for(let ye=0;ye<fe.length;ye++)qe(fe[ye],z,Q,se);r(P.anchor,z,Q);return}if(ve===ta){C(P,z,Q);return}if(se!==2&&ie&1&&pe)if(se===0)pe.beforeEnter(ae),r(ae,z,Q),Lt(()=>pe.enter(ae),oe);else{const{leave:ye,delayLeave:Se,afterLeave:Pe}=pe,je=()=>{P.ctx.isUnmounted?i(ae):r(ae,z,Q)},We=()=>{ae._isLeaving&&ae[Pn](!0),ye(ae,()=>{je(),Pe&&Pe()})};Se?Se(ae,je,We):We()}else r(ae,z,Q)},Ye=(P,z,Q,se=!1,oe=!1)=>{const{type:ae,props:ve,ref:pe,children:fe,dynamicChildren:ie,shapeFlag:Te,patchFlag:ye,dirs:Se,cacheIndex:Pe}=P;if(ye===-2&&(oe=!1),pe!=null&&(In(),Ei(pe,null,Q,P,!0),jn()),Pe!=null&&(z.renderCache[Pe]=void 0),Te&256){z.ctx.deactivate(P);return}const je=Te&1&&Se,We=!Ci(P);let Ke;if(We&&(Ke=ve&&ve.onVnodeBeforeUnmount)&&mn(Ke,z,P),Te&6)Kt(P.component,Q,se);else{if(Te&128){P.suspense.unmount(Q,se);return}je&&br(P,null,z,"beforeUnmount"),Te&64?P.type.remove(P,z,Q,Un,se):ie&&!ie.hasOnce&&(ae!==lt||ye>0&&ye&64)?qt(ie,z,Q,!1,!0):(ae===lt&&ye&384||!oe&&Te&16)&&qt(fe,z,Q),se&&Zt(P)}(We&&(Ke=ve&&ve.onVnodeUnmounted)||je)&&Lt(()=>{Ke&&mn(Ke,z,P),je&&br(P,null,z,"unmounted")},Q)},Zt=P=>{const{type:z,el:Q,anchor:se,transition:oe}=P;if(z===lt){hr(Q,se);return}if(z===ta){S(P);return}const ae=()=>{i(Q),oe&&!oe.persisted&&oe.afterLeave&&oe.afterLeave()};if(P.shapeFlag&1&&oe&&!oe.persisted){const{leave:ve,delayLeave:pe}=oe,fe=()=>ve(Q,ae);pe?pe(P.el,ae,fe):fe()}else ae()},hr=(P,z)=>{let Q;for(;P!==z;)Q=g(P),i(P),P=Q;i(z)},Kt=(P,z,Q)=>{const{bum:se,scope:oe,job:ae,subTree:ve,um:pe,m:fe,a:ie}=P;ou(fe),ou(ie),se&&xs(se),oe.stop(),ae&&(ae.flags|=8,Ye(ve,P,z,Q)),pe&&Lt(pe,z),Lt(()=>{P.isUnmounted=!0},z)},qt=(P,z,Q,se=!1,oe=!1,ae=0)=>{for(let ve=ae;ve<P.length;ve++)Ye(P[ve],z,Q,se,oe)},Hn=P=>{if(P.shapeFlag&6)return Hn(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const z=g(P.anchor||P.el),Q=z&&z[zc];return Q?g(Q):z};let Qr=!1;const Ce=(P,z,Q)=>{let se;P==null?z._vnode&&(Ye(z._vnode,null,null,!0),se=z._vnode.component):w(z._vnode||null,P,z,null,null,null,Q),z._vnode=P,Qr||(Qr=!0,Vl(se),jc(),Qr=!1)},Un={p:w,um:Ye,m:qe,r:Zt,mt:ne,mc:T,pc:Oe,pbc:X,n:Hn,o:n};return{render:Ce,hydrate:void 0,createApp:Fd(Ce)}}function ea({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function wr({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function tp(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Qa(n,e,t=!1){const r=n.children,i=e.children;if(Ne(r)&&Ne(i))for(let s=0;s<r.length;s++){const a=r[s];let l=i[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[s]=nr(i[s]),l.el=a.el),!t&&l.patchFlag!==-2&&Qa(a,l)),l.type===lo&&(l.patchFlag!==-1?l.el=a.el:l.__elIndex=s+(n.type===lt?1:0)),l.type===Ht&&!l.el&&(l.el=a.el)}}function np(n){const e=n.slice(),t=[0];let r,i,s,a,l;const h=n.length;for(r=0;r<h;r++){const f=n[r];if(f!==0){if(i=t[t.length-1],n[i]<f){e[r]=i,t.push(r);continue}for(s=0,a=t.length-1;s<a;)l=s+a>>1,n[t[l]]<f?s=l+1:a=l;f<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function hf(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:hf(e)}function ou(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}function df(n){if(n.placeholder)return n.placeholder;const e=n.component;return e?df(e.subTree):null}const pf=n=>n.__isSuspense;function rp(n,e){e&&e.pendingBranch?Ne(n)?e.effects.push(...n):e.effects.push(n):fd(n)}const lt=Symbol.for("v-fgt"),lo=Symbol.for("v-txt"),Ht=Symbol.for("v-cmt"),ta=Symbol.for("v-stc"),ki=[];let Xt=null;function Ee(n=!1){ki.push(Xt=n?null:[])}function ip(){ki.pop(),Xt=ki[ki.length-1]||null}let Di=1;function Ds(n,e=!1){Di+=n,n<0&&Xt&&e&&(Xt.hasOnce=!0)}function gf(n){return n.dynamicChildren=Di>0?Xt||Vr:null,ip(),Di>0&&Xt&&Xt.push(n),n}function ke(n,e,t,r,i,s){return gf(B(n,e,t,r,i,s,!0))}function Pr(n,e,t,r,i){return gf(Ze(n,e,t,r,i,!0))}function Ms(n){return n?n.__v_isVNode===!0:!1}function Cr(n,e){return n.type===e.type&&n.key===e.key}const mf=({key:n})=>n??null,Es=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?pt(n)||dt(n)||Ie(n)?{i:sn,r:n,k:e,f:!!t}:n:null);function B(n,e=null,t=null,r=0,i=null,s=n===lt?0:1,a=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&mf(e),ref:e&&Es(e),scopeId:Lc,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:sn};return l?(el(h,t),s&128&&n.normalize(h)):t&&(h.shapeFlag|=pt(t)?8:16),Di>0&&!a&&Xt&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&Xt.push(h),h}const Ze=sp;function sp(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===Rd)&&(n=Ht),Ms(n)){const l=lr(n,e,!0);return t&&el(l,t),Di>0&&!s&&Xt&&(l.shapeFlag&6?Xt[Xt.indexOf(n)]=l:Xt.push(l)),l.patchFlag=-2,l}if(gp(n)&&(n=n.__vccOpts),e){e=op(e);let{class:l,style:h}=e;l&&!pt(l)&&(e.class=Je(l)),st(h)&&(ro(h)&&!Ne(h)&&(h=St({},h)),e.style=or(h))}const a=pt(n)?1:pf(n)?128:Hc(n)?64:st(n)?4:Ie(n)?2:0;return B(n,e,t,r,i,a,s,!0)}function op(n){return n?ro(n)||of(n)?St({},n):n:null}function lr(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:a,children:l,transition:h}=n,f=e?ap(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:f,key:f&&mf(f),ref:e&&e.ref?t&&s?Ne(s)?s.concat(Es(e)):[s,Es(e)]:Es(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==lt?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&lr(n.ssContent),ssFallback:n.ssFallback&&lr(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&r&&Ni(c,h.clone(c)),c}function rn(n=" ",e=0){return Ze(lo,null,n,e)}function ut(n="",e=!1){return e?(Ee(),Pr(Ht,null,n)):Ze(Ht,null,n)}function bn(n){return n==null||typeof n=="boolean"?Ze(Ht):Ne(n)?Ze(lt,null,n.slice()):Ms(n)?nr(n):Ze(lo,null,String(n))}function nr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:lr(n)}function el(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Ne(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),el(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!of(e)?e._ctx=sn:i===3&&sn&&(sn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ie(e)?(e={default:e,_ctx:sn},t=32):(e=String(e),r&64?(t=16,e=[rn(e)]):t=8);n.children=e,n.shapeFlag|=t}function ap(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Je([e.class,r.class]));else if(i==="style")e.style=or([e.style,r.style]);else if(Xs(i)){const s=e[i],a=r[i];a&&s!==a&&!(Ne(s)&&s.includes(a))&&(e[i]=s?[].concat(s,a):a)}else i!==""&&(e[i]=r[i])}return e}function mn(n,e,t,r=null){cn(n,e,7,[t,r])}const lp=tf();let up=0;function cp(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||lp,s={uid:up++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new mc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lf(r,i),emitsOptions:nf(r,i),emit:null,emitted:null,propsDefaults:tt,inheritAttrs:r.inheritAttrs,ctx:tt,data:tt,props:tt,attrs:tt,slots:tt,refs:tt,setupState:tt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=zd.bind(null,s),n.ce&&n.ce(s),s}let Ut=null;const tl=()=>Ut||sn;let Is,Aa;{const n=eo(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(a=>a(s)):i[0](s)}};Is=e("__VUE_INSTANCE_SETTERS__",t=>Ut=t),Aa=e("__VUE_SSR_SETTERS__",t=>Mi=t)}const Hi=n=>{const e=Ut;return Is(n),n.scope.on(),()=>{n.scope.off(),Is(e)}},au=()=>{Ut&&Ut.scope.off(),Is(null)};function vf(n){return n.vnode.shapeFlag&4}let Mi=!1;function fp(n,e=!1,t=!1){e&&Aa(e);const{props:r,children:i}=n.vnode,s=vf(n);Vd(n,r,s,e),Jd(n,i,t||e);const a=s?hp(n,e):void 0;return e&&Aa(!1),a}function hp(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Nd);const{setup:r}=t;if(r){In();const i=n.setupContext=r.length>1?pp(n):null,s=Hi(n),a=Fi(r,n,0,[n.props,i]),l=lc(a);if(jn(),s(),(l||n.sp)&&!Ci(n)&&Xc(n),l){if(a.then(au,au),e)return a.then(h=>{lu(n,h)}).catch(h=>{io(h,n,0)});n.asyncDep=a}else lu(n,a)}else yf(n)}function lu(n,e,t){Ie(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:st(e)&&(n.setupState=Dc(e)),yf(n)}function yf(n,e,t){const r=n.type;n.render||(n.render=r.render||_n);{const i=Hi(n);In();try{Dd(n)}finally{jn(),i()}}}const dp={get(n,e){return Pt(n,"get",""),n[e]}};function pp(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,dp),slots:n.slots,emit:n.emit,expose:e}}function uo(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Dc(Ya(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Si)return Si[t](n)},has(e,t){return t in e||t in Si}})):n.proxy}function gp(n){return Ie(n)&&"__vccOpts"in n}const Ge=(n,e)=>od(n,e,Mi);function Ta(n,e,t){try{Ds(-1);const r=arguments.length;return r===2?st(e)&&!Ne(e)?Ms(e)?Ze(n,null,[e]):Ze(n,e):Ze(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Ms(t)&&(t=[t]),Ze(n,e,t))}finally{Ds(1)}}const mp="3.5.26";let Pa;const uu=typeof window<"u"&&window.trustedTypes;if(uu)try{Pa=uu.createPolicy("vue",{createHTML:n=>n})}catch{}const bf=Pa?n=>Pa.createHTML(n):n=>n,vp="http://www.w3.org/2000/svg",yp="http://www.w3.org/1998/Math/MathML",Tn=typeof document<"u"?document:null,cu=Tn&&Tn.createElement("template"),bp={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Tn.createElementNS(vp,n):e==="mathml"?Tn.createElementNS(yp,n):t?Tn.createElement(n,{is:t}):Tn.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Tn.createTextNode(n),createComment:n=>Tn.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Tn.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const a=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{cu.innerHTML=bf(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const l=cu.content;if(r==="svg"||r==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}e.insertBefore(l,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Jn="transition",fi="animation",Ii=Symbol("_vtc"),wf={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},wp=St({},Kc,wf),xp=n=>(n.displayName="Transition",n.props=wp,n),Ln=xp((n,{slots:e})=>Ta(wd,_p(n),e)),xr=(n,e=[])=>{Ne(n)?n.forEach(t=>t(...e)):n&&n(...e)},fu=n=>n?Ne(n)?n.some(e=>e.length>1):n.length>1:!1;function _p(n){const e={};for(const J in n)J in wf||(e[J]=n[J]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:h=s,appearActiveClass:f=a,appearToClass:c=l,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:g=`${t}-leave-active`,leaveToClass:v=`${t}-leave-to`}=n,y=Ep(i),w=y&&y[0],E=y&&y[1],{onBeforeEnter:N,onEnter:_,onEnterCancelled:C,onLeave:S,onLeaveCancelled:A,onBeforeAppear:k=N,onAppear:D=_,onAppearCancelled:T=C}=e,I=(J,F,ne,Z)=>{J._enterCancelled=Z,_r(J,F?c:l),_r(J,F?f:a),ne&&ne()},X=(J,F)=>{J._isLeaving=!1,_r(J,p),_r(J,v),_r(J,g),F&&F()},te=J=>(F,ne)=>{const Z=J?D:_,ue=()=>I(F,J,ne);xr(Z,[F,ue]),hu(()=>{_r(F,J?h:s),An(F,J?c:l),fu(Z)||du(F,r,w,ue)})};return St(e,{onBeforeEnter(J){xr(N,[J]),An(J,s),An(J,a)},onBeforeAppear(J){xr(k,[J]),An(J,h),An(J,f)},onEnter:te(!1),onAppear:te(!0),onLeave(J,F){J._isLeaving=!0;const ne=()=>X(J,F);An(J,p),J._enterCancelled?(An(J,g),mu(J)):(mu(J),An(J,g)),hu(()=>{J._isLeaving&&(_r(J,p),An(J,v),fu(S)||du(J,r,E,ne))}),xr(S,[J,ne])},onEnterCancelled(J){I(J,!1,void 0,!0),xr(C,[J])},onAppearCancelled(J){I(J,!0,void 0,!0),xr(T,[J])},onLeaveCancelled(J){X(J),xr(A,[J])}})}function Ep(n){if(n==null)return null;if(st(n))return[na(n.enter),na(n.leave)];{const e=na(n);return[e,e]}}function na(n){return Sh(n)}function An(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Ii]||(n[Ii]=new Set)).add(e)}function _r(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Ii];t&&(t.delete(e),t.size||(n[Ii]=void 0))}function hu(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Cp=0;function du(n,e,t,r){const i=n._endId=++Cp,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:a,timeout:l,propCount:h}=Sp(n,e);if(!a)return r();const f=a+"end";let c=0;const p=()=>{n.removeEventListener(f,g),s()},g=v=>{v.target===n&&++c>=h&&p()};setTimeout(()=>{c<h&&p()},l+1),n.addEventListener(f,g)}function Sp(n,e){const t=window.getComputedStyle(n),r=y=>(t[y]||"").split(", "),i=r(`${Jn}Delay`),s=r(`${Jn}Duration`),a=pu(i,s),l=r(`${fi}Delay`),h=r(`${fi}Duration`),f=pu(l,h);let c=null,p=0,g=0;e===Jn?a>0&&(c=Jn,p=a,g=s.length):e===fi?f>0&&(c=fi,p=f,g=h.length):(p=Math.max(a,f),c=p>0?a>f?Jn:fi:null,g=c?c===Jn?s.length:h.length:0);const v=c===Jn&&/\b(?:transform|all)(?:,|$)/.test(r(`${Jn}Property`).toString());return{type:c,timeout:p,propCount:g,hasTransform:v}}function pu(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>gu(t)+gu(n[r])))}function gu(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function mu(n){return(n?n.ownerDocument:document).body.offsetHeight}function kp(n,e,t){const r=n[Ii];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const js=Symbol("_vod"),xf=Symbol("_vsh"),ra={name:"show",beforeMount(n,{value:e},{transition:t}){n[js]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):hi(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),hi(n,!0),r.enter(n)):r.leave(n,()=>{hi(n,!1)}):hi(n,e))},beforeUnmount(n,{value:e}){hi(n,e)}};function hi(n,e){n.style.display=e?n[js]:"none",n[xf]=!e}const Op=Symbol(""),Ap=/(?:^|;)\s*display\s*:/;function Tp(n,e,t){const r=n.style,i=pt(t);let s=!1;if(t&&!i){if(e)if(pt(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();t[l]==null&&Cs(r,l,"")}else for(const a in e)t[a]==null&&Cs(r,a,"");for(const a in t)a==="display"&&(s=!0),Cs(r,a,t[a])}else if(i){if(e!==t){const a=r[Op];a&&(t+=";"+a),r.cssText=t,s=Ap.test(t)}}else e&&n.removeAttribute("style");js in n&&(n[js]=s?r.display:"",n[xf]&&(r.display="none"))}const vu=/\s*!important$/;function Cs(n,e,t){if(Ne(t))t.forEach(r=>Cs(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=Pp(n,e);vu.test(t)?n.setProperty(cr(r),t.replace(vu,""),"important"):n[r]=t}}const yu=["Webkit","Moz","ms"],ia={};function Pp(n,e){const t=ia[e];if(t)return t;let r=sr(e);if(r!=="filter"&&r in n)return ia[e]=r;r=fc(r);for(let i=0;i<yu.length;i++){const s=yu[i]+r;if(s in n)return ia[e]=s}return e}const bu="http://www.w3.org/1999/xlink";function wu(n,e,t,r,i,s=Rh(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(bu,e.slice(6,e.length)):n.setAttributeNS(bu,e,t):t==null||s&&!dc(t)?n.removeAttribute(e):n.setAttribute(e,s?"":ur(t)?String(t):t)}function xu(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?bf(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?n.getAttribute("value")||"":n.value,h=t==null?n.type==="checkbox"?"on":"":String(t);(l!==h||!("_value"in n))&&(n.value=h),t==null&&n.removeAttribute(e),n._value=t;return}let a=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=dc(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(i||e)}function Wr(n,e,t,r){n.addEventListener(e,t,r)}function Rp(n,e,t,r){n.removeEventListener(e,t,r)}const _u=Symbol("_vei");function Np(n,e,t,r,i=null){const s=n[_u]||(n[_u]={}),a=s[e];if(r&&a)a.value=r;else{const[l,h]=Dp(e);if(r){const f=s[e]=jp(r,i);Wr(n,l,f,h)}else a&&(Rp(n,l,a,h),s[e]=void 0)}}const Eu=/(?:Once|Passive|Capture)$/;function Dp(n){let e;if(Eu.test(n)){e={};let r;for(;r=n.match(Eu);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):cr(n.slice(2)),e]}let sa=0;const Mp=Promise.resolve(),Ip=()=>sa||(Mp.then(()=>sa=0),sa=Date.now());function jp(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;cn($p(r,t.value),e,5,[r])};return t.value=n,t.attached=Ip(),t}function $p(n,e){if(Ne(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Cu=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Lp=(n,e,t,r,i,s)=>{const a=i==="svg";e==="class"?kp(n,r,a):e==="style"?Tp(n,t,r):Xs(e)?Ba(e)||Np(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Fp(n,e,r,a))?(xu(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wu(n,e,r,a,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!pt(r))?xu(n,sr(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),wu(n,e,r,a))};function Fp(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Cu(e)&&Ie(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&n.tagName==="IFRAME"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Cu(e)&&pt(t)?!1:e in n}const Su=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Ne(e)?t=>xs(e,t):e};function Bp(n){n.target.composing=!0}function ku(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const oa=Symbol("_assign");function Ou(n,e,t){return e&&(n=n.trim()),t&&(n=Ha(n)),n}const Ar={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[oa]=Su(i);const s=r||i.props&&i.props.type==="number";Wr(n,e?"change":"input",a=>{a.target.composing||n[oa](Ou(n.value,t,s))}),(t||s)&&Wr(n,"change",()=>{n.value=Ou(n.value,t,s)}),e||(Wr(n,"compositionstart",Bp),Wr(n,"compositionend",ku),Wr(n,"change",ku))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},a){if(n[oa]=Su(a),n.composing)return;const l=(s||n.type==="number")&&!/^0\d/.test(n.value)?Ha(n.value):n.value,h=e??"";l!==h&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===h)||(n.value=h))}},zp=["ctrl","shift","alt","meta"],Hp={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>zp.some(t=>n[`${t}Key`]&&!e.includes(t))},Jr=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=((i,...s)=>{for(let a=0;a<e.length;a++){const l=Hp[e[a]];if(l&&l(i,e))return}return n(i,...s)}))},Up={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wp=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=(i=>{if(!("key"in i))return;const s=cr(i.key);if(e.some(a=>a===s||Up[a]===s))return n(i)}))},Kp=St({patchProp:Lp},bp);let Au;function _f(){return Au||(Au=Qd(Kp))}const di=((...n)=>{_f().render(...n)}),qp=((...n)=>{const e=_f().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=Gp(r);if(!i)return;const s=e._component;!Ie(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const a=t(i,!1,Vp(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e});function Vp(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Gp(n){return pt(n)?document.querySelector(n):n}let Ef;const co=n=>Ef=n,Cf=Symbol();function Ra(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Oi;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Oi||(Oi={}));function Yp(){const n=vc(!0),e=n.run(()=>De({}));let t=[],r=[];const i=Ya({install(s){co(i),i._a=s,s.provide(Cf,i),s.config.globalProperties.$pinia=i,r.forEach(a=>t.push(a)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const Sf=()=>{};function Tu(n,e,t,r=Sf){n.add(e);const i=()=>{n.delete(e)&&r()};return!t&&yc()&&Nh(i),i}function Hr(n,...e){n.forEach(t=>{t(...e)})}const Xp=n=>n(),Pu=Symbol(),aa=Symbol();function Na(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];Ra(i)&&Ra(r)&&n.hasOwnProperty(t)&&!dt(r)&&!Mn(r)?n[t]=Na(i,r):n[t]=r}return n}const Jp=Symbol();function Zp(n){return!Ra(n)||!Object.prototype.hasOwnProperty.call(n,Jp)}const{assign:Qn}=Object;function Qp(n){return!!(dt(n)&&n.effect)}function eg(n,e,t,r){const{state:i,actions:s,getters:a}=e,l=t.state.value[n];let h;function f(){l||(t.state.value[n]=i?i():{});const c=nd(t.state.value[n]);return Qn(c,s,Object.keys(a||{}).reduce((p,g)=>(p[g]=Ya(Ge(()=>{co(t);const v=t._s.get(n);return a[g].call(v,v)})),p),{}))}return h=kf(n,f,e,t,r,!0),h}function kf(n,e,t={},r,i,s){let a;const l=Qn({actions:{}},t),h={deep:!0};let f,c,p=new Set,g=new Set,v;const y=r.state.value[n];!s&&!y&&(r.state.value[n]={}),De({});let w;function E(T){let I;f=c=!1,typeof T=="function"?(T(r.state.value[n]),I={type:Oi.patchFunction,storeId:n,events:v}):(Na(r.state.value[n],T),I={type:Oi.patchObject,payload:T,storeId:n,events:v});const X=w=Symbol();Ts().then(()=>{w===X&&(f=!0)}),c=!0,Hr(p,I,r.state.value[n])}const N=s?function(){const{state:I}=t,X=I?I():{};this.$patch(te=>{Qn(te,X)})}:Sf;function _(){a.stop(),p.clear(),g.clear(),r._s.delete(n)}const C=(T,I="")=>{if(Pu in T)return T[aa]=I,T;const X=function(){co(r);const te=Array.from(arguments),J=new Set,F=new Set;function ne(_e){J.add(_e)}function Z(_e){F.add(_e)}Hr(g,{args:te,name:X[aa],store:A,after:ne,onError:Z});let ue;try{ue=T.apply(this&&this.$id===n?this:A,te)}catch(_e){throw Hr(F,_e),_e}return ue instanceof Promise?ue.then(_e=>(Hr(J,_e),_e)).catch(_e=>(Hr(F,_e),Promise.reject(_e))):(Hr(J,ue),ue)};return X[Pu]=!0,X[aa]=I,X},S={_p:r,$id:n,$onAction:Tu.bind(null,g),$patch:E,$reset:N,$subscribe(T,I={}){const X=Tu(p,T,I.detached,()=>te()),te=a.run(()=>En(()=>r.state.value[n],J=>{(I.flush==="sync"?c:f)&&T({storeId:n,type:Oi.direct,events:v},J)},Qn({},h,I)));return X},$dispose:_},A=no(S);r._s.set(n,A);const D=(r._a&&r._a.runWithContext||Xp)(()=>r._e.run(()=>(a=vc()).run(()=>e({action:C}))));for(const T in D){const I=D[T];if(dt(I)&&!Qp(I)||Mn(I))s||(y&&Zp(I)&&(dt(I)?I.value=y[T]:Na(I,y[T])),r.state.value[n][T]=I);else if(typeof I=="function"){const X=C(I,T);D[T]=X,l.actions[T]=I}}return Qn(A,D),Qn(He(A),D),Object.defineProperty(A,"$state",{get:()=>r.state.value[n],set:T=>{E(I=>{Qn(I,T)})}}),r._p.forEach(T=>{Qn(A,a.run(()=>T({store:A,app:r._a,pinia:r,options:l})))}),y&&s&&t.hydrate&&t.hydrate(A.$state,y),f=!0,c=!0,A}function fo(n,e,t){let r;const i=typeof e=="function";r=i?t:e;function s(a,l){const h=dd();return a=a||(h?xi(Cf,null):null),a&&co(a),a=Ef,a._s.has(n)||(i?kf(n,e,r,a):eg(n,r,a)),a._s.get(n)}return s.$id=n,s}function ir(n){return n.type==="site"}function ot(n){return n.type==="folder"}var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ng(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ss={exports:{}},rg=Ss.exports,Ru;function ig(){return Ru||(Ru=1,(function(n,e){(function(t,r){n.exports=r()})(rg,function(){var t=function(o,u){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(d[b]=m[b])})(o,u)},r=function(){return(r=Object.assign||function(o){for(var u,d=1,m=arguments.length;d<m;d++)for(var b in u=arguments[d])Object.prototype.hasOwnProperty.call(u,b)&&(o[b]=u[b]);return o}).apply(this,arguments)};function i(o,u,d){for(var m,b=0,x=u.length;b<x;b++)!m&&b in u||((m=m||Array.prototype.slice.call(u,0,b))[b]=u[b]);return o.concat(m||Array.prototype.slice.call(u))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:tg,a=Object.keys,l=Array.isArray;function h(o,u){return typeof u!="object"||a(u).forEach(function(d){o[d]=u[d]}),o}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var f=Object.getPrototypeOf,c={}.hasOwnProperty;function p(o,u){return c.call(o,u)}function g(o,u){typeof u=="function"&&(u=u(f(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(u).forEach(function(d){y(o,d,u[d])})}var v=Object.defineProperty;function y(o,u,d,m){v(o,u,h(d&&p(d,"get")&&typeof d.get=="function"?{get:d.get,set:d.set,configurable:!0}:{value:d,configurable:!0,writable:!0},m))}function w(o){return{from:function(u){return o.prototype=Object.create(u.prototype),y(o.prototype,"constructor",o),{extend:g.bind(null,o.prototype)}}}}var E=Object.getOwnPropertyDescriptor,N=[].slice;function _(o,u,d){return N.call(o,u,d)}function C(o,u){return u(o)}function S(o){if(!o)throw new Error("Assertion Failed")}function A(o){s.setImmediate?setImmediate(o):setTimeout(o,0)}function k(o,u){if(typeof u=="string"&&p(o,u))return o[u];if(!u)return o;if(typeof u!="string"){for(var d=[],m=0,b=u.length;m<b;++m){var x=k(o,u[m]);d.push(x)}return d}var O=u.indexOf(".");if(O!==-1){var R=o[u.substr(0,O)];return R==null?void 0:k(R,u.substr(O+1))}}function D(o,u,d){if(o&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof u!="string"&&"length"in u){S(typeof d!="string"&&"length"in d);for(var m=0,b=u.length;m<b;++m)D(o,u[m],d[m])}else{var x,O,R=u.indexOf(".");R!==-1?(x=u.substr(0,R),(O=u.substr(R+1))===""?d===void 0?l(o)&&!isNaN(parseInt(x))?o.splice(x,1):delete o[x]:o[x]=d:D(R=!(R=o[x])||!p(o,x)?o[x]={}:R,O,d)):d===void 0?l(o)&&!isNaN(parseInt(u))?o.splice(u,1):delete o[u]:o[u]=d}}function T(o){var u,d={};for(u in o)p(o,u)&&(d[u]=o[u]);return d}var I=[].concat;function X(o){return I.apply([],o)}var je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(X([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(u){return u+o+"Array"})}))).filter(function(o){return s[o]}),te=new Set(je.map(function(o){return s[o]})),J=null;function F(o){return J=new WeakMap,o=(function u(d){if(!d||typeof d!="object")return d;var m=J.get(d);if(m)return m;if(l(d)){m=[],J.set(d,m);for(var b=0,x=d.length;b<x;++b)m.push(u(d[b]))}else if(te.has(d.constructor))m=d;else{var O,R=f(d);for(O in m=R===Object.prototype?{}:Object.create(R),J.set(d,m),d)p(d,O)&&(m[O]=u(d[O]))}return m})(o),J=null,o}var ne={}.toString;function Z(o){return ne.call(o).slice(8,-1)}var ue=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_e=typeof ue=="symbol"?function(o){var u;return o!=null&&(u=o[ue])&&u.apply(o)}:function(){return null};function Oe(o,u){return u=o.indexOf(u),0<=u&&o.splice(u,1),0<=u}var ze={};function et(o){var u,d,m,b;if(arguments.length===1){if(l(o))return o.slice();if(this===ze&&typeof o=="string")return[o];if(b=_e(o)){for(d=[];!(m=b.next()).done;)d.push(m.value);return d}if(o==null)return[o];if(typeof(u=o.length)!="number")return[o];for(d=new Array(u);u--;)d[u]=o[u];return d}for(u=arguments.length,d=new Array(u);u--;)d[u]=arguments[u];return d}var qe=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Qt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Pe),Ye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Zt(o,u){this.name=o,this.message=u}function hr(o,u){return o+". Errors: "+Object.keys(u).map(function(d){return u[d].toString()}).filter(function(d,m,b){return b.indexOf(d)===m}).join(`
`)}function Kt(o,u,d,m){this.failures=u,this.failedKeys=m,this.successCount=d,this.message=hr(o,u)}function qt(o,u){this.name="BulkError",this.failures=Object.keys(u).map(function(d){return u[d]}),this.failuresByPos=u,this.message=hr(o,this.failures)}w(Zt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(Kt).from(Zt),w(qt).from(Zt);var Hn=Qt.reduce(function(o,u){return o[u]=u+"Error",o},{}),Qr=Zt,Ce=Qt.reduce(function(o,u){var d=u+"Error";function m(b,x){this.name=d,b?typeof b=="string"?(this.message="".concat(b).concat(x?`
 `+x:""),this.inner=x||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=Ye[u]||d,this.inner=null)}return w(m).from(Qr),o[u]=m,o},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Un=Pe.reduce(function(o,u){return o[u+"Error"]=Ce[u],o},{}),ei=Qt.reduce(function(o,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(o[u+"Error"]=Ce[u]),o},{});function P(){}function z(o){return o}function Q(o,u){return o==null||o===z?u:function(d){return u(o(d))}}function se(o,u){return function(){o.apply(this,arguments),u.apply(this,arguments)}}function oe(o,u){return o===P?u:function(){var d=o.apply(this,arguments);d!==void 0&&(arguments[0]=d);var m=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var x=u.apply(this,arguments);return m&&(this.onsuccess=this.onsuccess?se(m,this.onsuccess):m),b&&(this.onerror=this.onerror?se(b,this.onerror):b),x!==void 0?x:d}}function ae(o,u){return o===P?u:function(){o.apply(this,arguments);var d=this.onsuccess,m=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?se(d,this.onsuccess):d),m&&(this.onerror=this.onerror?se(m,this.onerror):m)}}function ve(o,u){return o===P?u:function(d){var m=o.apply(this,arguments);h(d,m);var b=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,d=u.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?se(b,this.onsuccess):b),x&&(this.onerror=this.onerror?se(x,this.onerror):x),m===void 0?d===void 0?void 0:d:h(m,d)}}function pe(o,u){return o===P?u:function(){return u.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function fe(o,u){return o===P?u:function(){var d=o.apply(this,arguments);if(d&&typeof d.then=="function"){for(var m=this,b=arguments.length,x=new Array(b);b--;)x[b]=arguments[b];return d.then(function(){return u.apply(m,x)})}return u.apply(this,arguments)}}ei.ModifyError=Kt,ei.DexieError=Zt,ei.BulkError=qt;var ie=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Te(o){ie=o}var ye={},Se=100,je=typeof Promise>"u"?[]:(function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,f(o),o];var u=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[u,f(u),o]})(),Pe=je[0],Qt=je[1],je=je[2],Qt=Qt&&Qt.then,We=Pe&&Pe.constructor,Ke=!!je,vt=function(o,u){Wn.push([o,u]),Dt&&(queueMicrotask(Jf),Dt=!1)},xt=!0,Dt=!0,_t=[],hn=[],Nr=z,ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:P,pgp:!1,env:{},finalize:P},we=ht,Wn=[],dn=0,Wi=[];function be(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=we;if(typeof o!="function"){if(o!==ye)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&vo(this,this._value))}this._state=null,this._value=null,++u.ref,(function d(m,b){try{b(function(x){if(m._state===null){if(x===m)throw new TypeError("A promise cannot be resolved with itself.");var O=m._lib&&Dr();x&&typeof x.then=="function"?d(m,function(R,j){x instanceof be?x._then(R,j):x.then(R,j)}):(m._state=!0,m._value=x,hl(m)),O&&Mr()}},vo.bind(null,m))}catch(x){vo(m,x)}})(this,o)}var mo={get:function(){var o=we,u=Gi;function d(m,b){var x=this,O=!o.global&&(o!==we||u!==Gi),R=O&&!qn(),j=new be(function($,W){yo(x,new fl(pl(m,o,O,R),pl(b,o,O,R),$,W,o))});return this._consoleTask&&(j._consoleTask=this._consoleTask),j}return d.prototype=ye,d},set:function(o){y(this,"then",o&&o.prototype===ye?mo:{get:function(){return o},set:mo.set})}};function fl(o,u,d,m,b){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof u=="function"?u:null,this.resolve=d,this.reject=m,this.psd=b}function vo(o,u){var d,m;hn.push(u),o._state===null&&(d=o._lib&&Dr(),u=Nr(u),o._state=!1,o._value=u,m=o,_t.some(function(b){return b._value===m._value})||_t.push(m),hl(o),d&&Mr())}function hl(o){var u=o._listeners;o._listeners=[];for(var d=0,m=u.length;d<m;++d)yo(o,u[d]);var b=o._PSD;--b.ref||b.finalize(),dn===0&&(++dn,vt(function(){--dn==0&&bo()},[]))}function yo(o,u){if(o._state!==null){var d=o._state?u.onFulfilled:u.onRejected;if(d===null)return(o._state?u.resolve:u.reject)(o._value);++u.psd.ref,++dn,vt(Xf,[d,o,u])}else o._listeners.push(u)}function Xf(o,u,d){try{var m,b=u._value;!u._state&&hn.length&&(hn=[]),m=ie&&u._consoleTask?u._consoleTask.run(function(){return o(b)}):o(b),u._state||hn.indexOf(b)!==-1||(function(x){for(var O=_t.length;O;)if(_t[--O]._value===x._value)return _t.splice(O,1)})(u),d.resolve(m)}catch(x){d.reject(x)}finally{--dn==0&&bo(),--d.psd.ref||d.psd.finalize()}}function Jf(){dr(ht,function(){Dr()&&Mr()})}function Dr(){var o=xt;return Dt=xt=!1,o}function Mr(){var o,u,d;do for(;0<Wn.length;)for(o=Wn,Wn=[],d=o.length,u=0;u<d;++u){var m=o[u];m[0].apply(null,m[1])}while(0<Wn.length);Dt=xt=!0}function bo(){var o=_t;_t=[],o.forEach(function(m){m._PSD.onunhandled.call(null,m._value,m)});for(var u=Wi.slice(0),d=u.length;d;)u[--d]()}function Ki(o){return new be(ye,!1,o)}function at(o,u){var d=we;return function(){var m=Dr(),b=we;try{return Vn(d,!0),o.apply(this,arguments)}catch(x){u&&u(x)}finally{Vn(b,!1),m&&Mr()}}}g(be.prototype,{then:mo,_then:function(o,u){yo(this,new fl(null,null,o,u,we))},catch:function(o){if(arguments.length===1)return this.then(null,o);var u=o,d=arguments[1];return typeof u=="function"?this.then(null,function(m){return(m instanceof u?d:Ki)(m)}):this.then(null,function(m){return(m&&m.name===u?d:Ki)(m)})},finally:function(o){return this.then(function(u){return be.resolve(o()).then(function(){return u})},function(u){return be.resolve(o()).then(function(){return Ki(u)})})},timeout:function(o,u){var d=this;return o<1/0?new be(function(m,b){var x=setTimeout(function(){return b(new Ce.Timeout(u))},o);d.then(m,b).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(be.prototype,Symbol.toStringTag,"Dexie.Promise"),ht.env=dl(),g(be,{all:function(){var o=et.apply(null,arguments).map(Yi);return new be(function(u,d){o.length===0&&u([]);var m=o.length;o.forEach(function(b,x){return be.resolve(b).then(function(O){o[x]=O,--m||u(o)},d)})})},resolve:function(o){return o instanceof be?o:o&&typeof o.then=="function"?new be(function(u,d){o.then(u,d)}):new be(ye,!0,o)},reject:Ki,race:function(){var o=et.apply(null,arguments).map(Yi);return new be(function(u,d){o.map(function(m){return be.resolve(m).then(u,d)})})},PSD:{get:function(){return we},set:function(o){return we=o}},totalEchoes:{get:function(){return Gi}},newPSD:Kn,usePSD:dr,scheduler:{get:function(){return vt},set:function(o){vt=o}},rejectionMapper:{get:function(){return Nr},set:function(o){Nr=o}},follow:function(o,u){return new be(function(d,m){return Kn(function(b,x){var O=we;O.unhandleds=[],O.onunhandled=x,O.finalize=se(function(){var R,j=this;R=function(){j.unhandleds.length===0?b():x(j.unhandleds[0])},Wi.push(function $(){R(),Wi.splice(Wi.indexOf($),1)}),++dn,vt(function(){--dn==0&&bo()},[])},O.finalize),o()},u,d,m)})}}),We&&(We.allSettled&&y(be,"allSettled",function(){var o=et.apply(null,arguments).map(Yi);return new be(function(u){o.length===0&&u([]);var d=o.length,m=new Array(d);o.forEach(function(b,x){return be.resolve(b).then(function(O){return m[x]={status:"fulfilled",value:O}},function(O){return m[x]={status:"rejected",reason:O}}).then(function(){return--d||u(m)})})})}),We.any&&typeof AggregateError<"u"&&y(be,"any",function(){var o=et.apply(null,arguments).map(Yi);return new be(function(u,d){o.length===0&&d(new AggregateError([]));var m=o.length,b=new Array(m);o.forEach(function(x,O){return be.resolve(x).then(function(R){return u(R)},function(R){b[O]=R,--m||d(new AggregateError(b))})})})}),We.withResolvers&&(be.withResolvers=We.withResolvers));var Et={awaits:0,echoes:0,id:0},Zf=0,qi=[],Vi=0,Gi=0,Qf=0;function Kn(o,u,d,m){var b=we,x=Object.create(b);return x.parent=b,x.ref=0,x.global=!1,x.id=++Qf,ht.env,x.env=Ke?{Promise:be,PromiseProp:{value:be,configurable:!0,writable:!0},all:be.all,race:be.race,allSettled:be.allSettled,any:be.any,resolve:be.resolve,reject:be.reject}:{},u&&h(x,u),++b.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},m=dr(x,o,d,m),x.ref===0&&x.finalize(),m}function Ir(){return Et.id||(Et.id=++Zf),++Et.awaits,Et.echoes+=Se,Et.id}function qn(){return!!Et.awaits&&(--Et.awaits==0&&(Et.id=0),Et.echoes=Et.awaits*Se,!0)}function Yi(o){return Et.echoes&&o&&o.constructor===We?(Ir(),o.then(function(u){return qn(),u},function(u){return qn(),gt(u)})):o}function eh(){var o=qi[qi.length-1];qi.pop(),Vn(o,!1)}function Vn(o,u){var d,m=we;(u?!Et.echoes||Vi++&&o===we:!Vi||--Vi&&o===we)||queueMicrotask(u?(function(b){++Gi,Et.echoes&&--Et.echoes!=0||(Et.echoes=Et.awaits=Et.id=0),qi.push(we),Vn(b,!0)}).bind(null,o):eh),o!==we&&(we=o,m===ht&&(ht.env=dl()),Ke&&(d=ht.env.Promise,u=o.env,(m.global||o.global)&&(Object.defineProperty(s,"Promise",u.PromiseProp),d.all=u.all,d.race=u.race,d.resolve=u.resolve,d.reject=u.reject,u.allSettled&&(d.allSettled=u.allSettled),u.any&&(d.any=u.any))))}function dl(){var o=s.Promise;return Ke?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function dr(o,u,d,m,b){var x=we;try{return Vn(o,!0),u(d,m,b)}finally{Vn(x,!1)}}function pl(o,u,d,m){return typeof o!="function"?o:function(){var b=we;d&&Ir(),Vn(u,!0);try{return o.apply(this,arguments)}finally{Vn(b,!1),m&&queueMicrotask(qn)}}}function wo(o){Promise===We&&Et.echoes===0?Vi===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Qt).indexOf("[native code]")===-1&&(Ir=qn=P);var gt=be.reject,pr="",Sn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gl="String expected.",jr=[],Xi="__dbnames",xo="readonly",_o="readwrite";function gr(o,u){return o?u?function(){return o.apply(this,arguments)&&u.apply(this,arguments)}:o:u}var ml={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ji(o){return typeof o!="string"||/\./.test(o)?function(u){return u}:function(u){return u[o]===void 0&&o in u&&delete(u=F(u))[o],u}}function vl(){throw Ce.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ue(o,u){try{var d=yl(o),m=yl(u);if(d!==m)return d==="Array"?1:m==="Array"?-1:d==="binary"?1:m==="binary"?-1:d==="string"?1:m==="string"?-1:d==="Date"?1:m!=="Date"?NaN:-1;switch(d){case"number":case"Date":case"string":return u<o?1:o<u?-1:0;case"binary":return(function(b,x){for(var O=b.length,R=x.length,j=O<R?O:R,$=0;$<j;++$)if(b[$]!==x[$])return b[$]<x[$]?-1:1;return O===R?0:O<R?-1:1})(bl(o),bl(u));case"Array":return(function(b,x){for(var O=b.length,R=x.length,j=O<R?O:R,$=0;$<j;++$){var W=Ue(b[$],x[$]);if(W!==0)return W}return O===R?0:O<R?-1:1})(o,u)}}catch{}return NaN}function yl(o){var u=typeof o;return u!="object"?u:ArrayBuffer.isView(o)?"binary":(o=Z(o),o==="ArrayBuffer"?"binary":o)}function bl(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function Zi(o,u,d){var m=o.schema.yProps;return m?(u&&0<d.numFailures&&(u=u.filter(function(b,x){return!d.failures[x]})),Promise.all(m.map(function(b){return b=b.updatesTable,u?o.db.table(b).where("k").anyOf(u).delete():o.db.table(b).clear()})).then(function(){return d})):d}var ti=(wl.prototype.execute=function(o){var u=this["@@propmod"];if(u.add!==void 0){var d=u.add;if(l(d))return i(i([],l(o)?o:[],!0),d).sort();if(typeof d=="number")return(Number(o)||0)+d;if(typeof d=="bigint")try{return BigInt(o)+d}catch{return BigInt(0)+d}throw new TypeError("Invalid term ".concat(d))}if(u.remove!==void 0){var m=u.remove;if(l(m))return l(o)?o.filter(function(b){return!m.includes(b)}).sort():[];if(typeof m=="number")return Number(o)-m;if(typeof m=="bigint")try{return BigInt(o)-m}catch{return BigInt(0)-m}throw new TypeError("Invalid subtrahend ".concat(m))}return d=(d=u.replacePrefix)===null||d===void 0?void 0:d[0],d&&typeof o=="string"&&o.startsWith(d)?u.replacePrefix[1]+o.substring(d.length):o},wl);function wl(o){this["@@propmod"]=o}function xl(o,u){for(var d=a(u),m=d.length,b=!1,x=0;x<m;++x){var O=d[x],R=u[O],j=k(o,O);R instanceof ti?(D(o,O,R.execute(j)),b=!0):j!==R&&(D(o,O,R),b=!0)}return b}var _l=(rt.prototype._trans=function(o,u,d){var m=this._tx||we.trans,b=this.name,x=ie&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function O($,W,M){if(!M.schema[b])throw new Ce.NotFound("Table "+b+" not part of transaction");return u(M.idbtrans,M)}var R=Dr();try{var j=m&&m.db._novip===this.db._novip?m===we.trans?m._promise(o,O,d):Kn(function(){return m._promise(o,O,d)},{trans:m,transless:we.transless||we}):(function $(W,M,q,L){if(W.idbdb&&(W._state.openComplete||we.letThrough||W._vip)){var H=W._createTransaction(M,q,W._dbSchema);try{H.create(),W._state.PR1398_maxLoop=3}catch(U){return U.name===Hn.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return $(W,M,q,L)})):gt(U)}return H._promise(M,function(U,K){return Kn(function(){return we.trans=H,L(U,K,H)})}).then(function(U){if(M==="readwrite")try{H.idbtrans.commit()}catch{}return M==="readonly"?U:H._completion.then(function(){return U})})}if(W._state.openComplete)return gt(new Ce.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return gt(new Ce.DatabaseClosed);W.open().catch(P)}return W._state.dbReadyPromise.then(function(){return $(W,M,q,L)})})(this.db,o,[this.name],O);return x&&(j._consoleTask=x,j=j.catch(function($){return console.trace($),gt($)})),j}finally{R&&Mr()}},rt.prototype.get=function(o,u){var d=this;return o&&o.constructor===Object?this.where(o).first(u):o==null?gt(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(m){return d.core.get({trans:m,key:o}).then(function(b){return d.hook.reading.fire(b)})}).then(u)},rt.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(l(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var u=a(o);if(u.length===1)return this.where(u[0]).equals(o[u[0]]);var d=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&u.every(function($){return 0<=R.keyPath.indexOf($)})){for(var j=0;j<u.length;++j)if(u.indexOf(R.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(R,j){return R.keyPath.length-j.keyPath.length})[0];if(d&&this.db._maxKey!==pr){var x=d.keyPath.slice(0,u.length);return this.where(x).equals(x.map(function(j){return o[j]}))}!d&&ie&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var m=this.schema.idxByName;function b(R,j){return Ue(R,j)===0}var O=u.reduce(function(M,j){var $=M[0],W=M[1],M=m[j],q=o[j];return[$||M,$||!M?gr(W,M&&M.multi?function(L){return L=k(L,j),l(L)&&L.some(function(H){return b(q,H)})}:function(L){return b(q,k(L,j))}):W]},[null,null]),x=O[0],O=O[1];return x?this.where(x.name).equals(o[x.keyPath]).filter(O):d?this.filter(O):this.where(u).equals("")},rt.prototype.filter=function(o){return this.toCollection().and(o)},rt.prototype.count=function(o){return this.toCollection().count(o)},rt.prototype.offset=function(o){return this.toCollection().offset(o)},rt.prototype.limit=function(o){return this.toCollection().limit(o)},rt.prototype.each=function(o){return this.toCollection().each(o)},rt.prototype.toArray=function(o){return this.toCollection().toArray(o)},rt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},rt.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,l(o)?"[".concat(o.join("+"),"]"):o))},rt.prototype.reverse=function(){return this.toCollection().reverse()},rt.prototype.mapToClass=function(o){var u,d=this.db,m=this.name;function b(){return u!==null&&u.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof vl&&((function(j,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function W(){this.constructor=j}t(j,$),j.prototype=$===null?Object.create($):(W.prototype=$.prototype,new W)})(b,u=o),Object.defineProperty(b.prototype,"db",{get:function(){return d},enumerable:!1,configurable:!0}),b.prototype.table=function(){return m},o=b);for(var x=new Set,O=o.prototype;O;O=f(O))Object.getOwnPropertyNames(O).forEach(function(j){return x.add(j)});function R(j){if(!j)return j;var $,W=Object.create(o.prototype);for($ in j)if(!x.has($))try{W[$]=j[$]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=R,this.hook("reading",R),o},rt.prototype.defineClass=function(){return this.mapToClass(function(o){h(this,o)})},rt.prototype.add=function(o,u){var d=this,m=this.schema.primKey,b=m.auto,x=m.keyPath,O=o;return x&&b&&(O=Ji(x)(o)),this._trans("readwrite",function(R){return d.core.mutate({trans:R,type:"add",keys:u!=null?[u]:null,values:[O]})}).then(function(R){return R.numFailures?be.reject(R.failures[0]):R.lastResult}).then(function(R){if(x)try{D(o,x,R)}catch{}return R})},rt.prototype.upsert=function(o,u){var d=this,m=this.schema.primKey.keyPath;return this._trans("readwrite",function(b){return d.core.get({trans:b,key:o}).then(function(x){var O=x??{};return xl(O,u),m&&D(O,m,o),d.core.mutate({trans:b,type:"put",values:[O],keys:[o],upsert:!0,updates:{keys:[o],changeSpecs:[u]}}).then(function(R){return R.numFailures?be.reject(R.failures[0]):!!x})})})},rt.prototype.update=function(o,u){return typeof o!="object"||l(o)?this.where(":id").equals(o).modify(u):(o=k(o,this.schema.primKey.keyPath),o===void 0?gt(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(u))},rt.prototype.put=function(o,u){var d=this,m=this.schema.primKey,b=m.auto,x=m.keyPath,O=o;return x&&b&&(O=Ji(x)(o)),this._trans("readwrite",function(R){return d.core.mutate({trans:R,type:"put",values:[O],keys:u!=null?[u]:null})}).then(function(R){return R.numFailures?be.reject(R.failures[0]):R.lastResult}).then(function(R){if(x)try{D(o,x,R)}catch{}return R})},rt.prototype.delete=function(o){var u=this;return this._trans("readwrite",function(d){return u.core.mutate({trans:d,type:"delete",keys:[o]}).then(function(m){return Zi(u,[o],m)}).then(function(m){return m.numFailures?be.reject(m.failures[0]):void 0})})},rt.prototype.clear=function(){var o=this;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"deleteRange",range:ml}).then(function(d){return Zi(o,null,d)})}).then(function(u){return u.numFailures?be.reject(u.failures[0]):void 0})},rt.prototype.bulkGet=function(o){var u=this;return this._trans("readonly",function(d){return u.core.getMany({keys:o,trans:d}).then(function(m){return m.map(function(b){return u.hook.reading.fire(b)})})})},rt.prototype.bulkAdd=function(o,u,d){var m=this,b=Array.isArray(u)?u:void 0,x=(d=d||(b?void 0:u))?d.allKeys:void 0;return this._trans("readwrite",function(O){var $=m.schema.primKey,R=$.auto,$=$.keyPath;if($&&b)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==o.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var j=o.length,$=$&&R?o.map(Ji($)):o;return m.core.mutate({trans:O,type:"add",keys:b,values:$,wantResults:x}).then(function(H){var M=H.numFailures,q=H.results,L=H.lastResult,H=H.failures;if(M===0)return x?q:L;throw new qt("".concat(m.name,".bulkAdd(): ").concat(M," of ").concat(j," operations failed"),H)})})},rt.prototype.bulkPut=function(o,u,d){var m=this,b=Array.isArray(u)?u:void 0,x=(d=d||(b?void 0:u))?d.allKeys:void 0;return this._trans("readwrite",function(O){var $=m.schema.primKey,R=$.auto,$=$.keyPath;if($&&b)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==o.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var j=o.length,$=$&&R?o.map(Ji($)):o;return m.core.mutate({trans:O,type:"put",keys:b,values:$,wantResults:x}).then(function(H){var M=H.numFailures,q=H.results,L=H.lastResult,H=H.failures;if(M===0)return x?q:L;throw new qt("".concat(m.name,".bulkPut(): ").concat(M," of ").concat(j," operations failed"),H)})})},rt.prototype.bulkUpdate=function(o){var u=this,d=this.core,m=o.map(function(O){return O.key}),b=o.map(function(O){return O.changes}),x=[];return this._trans("readwrite",function(O){return d.getMany({trans:O,keys:m,cache:"clone"}).then(function(R){var j=[],$=[];o.forEach(function(M,q){var L=M.key,H=M.changes,U=R[q];if(U){for(var K=0,V=Object.keys(H);K<V.length;K++){var Y=V[K],ee=H[Y];if(Y===u.schema.primKey.keyPath){if(Ue(ee,L)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else D(U,Y,ee)}x.push(q),j.push(L),$.push(U)}});var W=j.length;return d.mutate({trans:O,type:"put",keys:j,values:$,updates:{keys:m,changeSpecs:b}}).then(function(M){var q=M.numFailures,L=M.failures;if(q===0)return W;for(var H=0,U=Object.keys(L);H<U.length;H++){var K,V=U[H],Y=x[Number(V)];Y!=null&&(K=L[V],delete L[V],L[Y]=K)}throw new qt("".concat(u.name,".bulkUpdate(): ").concat(q," of ").concat(W," operations failed"),L)})})})},rt.prototype.bulkDelete=function(o){var u=this,d=o.length;return this._trans("readwrite",function(m){return u.core.mutate({trans:m,type:"delete",keys:o}).then(function(b){return Zi(u,o,b)})}).then(function(O){var b=O.numFailures,x=O.lastResult,O=O.failures;if(b===0)return x;throw new qt("".concat(u.name,".bulkDelete(): ").concat(b," of ").concat(d," operations failed"),O)})},rt);function rt(){}function ni(o){function u(O,R){if(R){for(var j=arguments.length,$=new Array(j-1);--j;)$[j-1]=arguments[j];return d[O].subscribe.apply(null,$),o}if(typeof O=="string")return d[O]}var d={};u.addEventType=x;for(var m=1,b=arguments.length;m<b;++m)x(arguments[m]);return u;function x(O,R,j){if(typeof O!="object"){var $;R=R||pe;var W={subscribers:[],fire:j=j||P,subscribe:function(M){W.subscribers.indexOf(M)===-1&&(W.subscribers.push(M),W.fire=R(W.fire,M))},unsubscribe:function(M){W.subscribers=W.subscribers.filter(function(q){return q!==M}),W.fire=W.subscribers.reduce(R,j)}};return d[O]=u[O]=W}a($=O).forEach(function(M){var q=$[M];if(l(q))x(M,$[M][0],$[M][1]);else{if(q!=="asap")throw new Ce.InvalidArgument("Invalid event config");var L=x(M,z,function(){for(var H=arguments.length,U=new Array(H);H--;)U[H]=arguments[H];L.subscribers.forEach(function(K){A(function(){K.apply(null,U)})})})}})}}function ri(o,u){return w(u).from({prototype:o}),u}function $r(o,u){return!(o.filter||o.algorithm||o.or)&&(u?o.justLimit:!o.replayFilter)}function Eo(o,u){o.filter=gr(o.filter,u)}function Co(o,u,d){var m=o.replayFilter;o.replayFilter=m?function(){return gr(m(),u())}:u,o.justLimit=d&&!m}function Qi(o,u){if(o.isPrimKey)return u.primaryKey;var d=u.getIndexByKeyPath(o.index);if(!d)throw new Ce.Schema("KeyPath "+o.index+" on object store "+u.name+" is not indexed");return d}function El(o,u,d){var m=Qi(o,u.schema);return u.openCursor({trans:d,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:m,range:o.range}})}function es(o,u,d,m){var b=o.replayFilter?gr(o.filter,o.replayFilter()):o.filter;if(o.or){var x={},O=function(R,j,$){var W,M;b&&!b(j,$,function(q){return j.stop(q)},function(q){return j.fail(q)})||((M=""+(W=j.primaryKey))=="[object ArrayBuffer]"&&(M=""+new Uint8Array(W)),p(x,M)||(x[M]=!0,u(R,j,$)))};return Promise.all([o.or._iterate(O,d),Cl(El(o,m,d),o.algorithm,O,!o.keysOnly&&o.valueMapper)])}return Cl(El(o,m,d),gr(o.algorithm,b),u,!o.keysOnly&&o.valueMapper)}function Cl(o,u,d,m){var b=at(m?function(x,O,R){return d(m(x),O,R)}:d);return o.then(function(x){if(x)return x.start(function(){var O=function(){return x.continue()};u&&!u(x,function(R){return O=R},function(R){x.stop(R),O=P},function(R){x.fail(R),O=P})||b(x.value,x,function(R){return O=R}),O()})})}var th=(Ve.prototype._read=function(o,u){var d=this._ctx;return d.error?d.table._trans(null,gt.bind(null,d.error)):d.table._trans("readonly",o).then(u)},Ve.prototype._write=function(o){var u=this._ctx;return u.error?u.table._trans(null,gt.bind(null,u.error)):u.table._trans("readwrite",o,"locked")},Ve.prototype._addAlgorithm=function(o){var u=this._ctx;u.algorithm=gr(u.algorithm,o)},Ve.prototype._iterate=function(o,u){return es(this._ctx,o,u,this._ctx.table.core)},Ve.prototype.clone=function(o){var u=Object.create(this.constructor.prototype),d=Object.create(this._ctx);return o&&h(d,o),u._ctx=d,u},Ve.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ve.prototype.each=function(o){var u=this._ctx;return this._read(function(d){return es(u,o,d,u.table.core)})},Ve.prototype.count=function(o){var u=this;return this._read(function(d){var m=u._ctx,b=m.table.core;if($r(m,!0))return b.count({trans:d,query:{index:Qi(m,b.schema),range:m.range}}).then(function(O){return Math.min(O,m.limit)});var x=0;return es(m,function(){return++x,!1},d,b).then(function(){return x})}).then(o)},Ve.prototype.sortBy=function(o,u){var d=o.split(".").reverse(),m=d[0],b=d.length-1;function x(j,$){return $?x(j[d[$]],$-1):j[m]}var O=this._ctx.dir==="next"?1:-1;function R(j,$){return Ue(x(j,b),x($,b))*O}return this.toArray(function(j){return j.sort(R)}).then(u)},Ve.prototype.toArray=function(o){var u=this;return this._read(function(d){var m=u._ctx;if(m.dir==="next"&&$r(m,!0)&&0<m.limit){var b=m.valueMapper,x=Qi(m,m.table.core.schema);return m.table.core.query({trans:d,limit:m.limit,values:!0,query:{index:x,range:m.range}}).then(function(R){return R=R.result,b?R.map(b):R})}var O=[];return es(m,function(R){return O.push(R)},d,m.table.core).then(function(){return O})},o)},Ve.prototype.offset=function(o){var u=this._ctx;return o<=0||(u.offset+=o,$r(u)?Co(u,function(){var d=o;return function(m,b){return d===0||(d===1?--d:b(function(){m.advance(d),d=0}),!1)}}):Co(u,function(){var d=o;return function(){return--d<0}})),this},Ve.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),Co(this._ctx,function(){var u=o;return function(d,m,b){return--u<=0&&m(b),0<=u}},!0),this},Ve.prototype.until=function(o,u){return Eo(this._ctx,function(d,m,b){return!o(d.value)||(m(b),u)}),this},Ve.prototype.first=function(o){return this.limit(1).toArray(function(u){return u[0]}).then(o)},Ve.prototype.last=function(o){return this.reverse().first(o)},Ve.prototype.filter=function(o){var u;return Eo(this._ctx,function(d){return o(d.value)}),(u=this._ctx).isMatch=gr(u.isMatch,o),this},Ve.prototype.and=function(o){return this.filter(o)},Ve.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},Ve.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ve.prototype.desc=function(){return this.reverse()},Ve.prototype.eachKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,m){o(m.key,m)})},Ve.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},Ve.prototype.eachPrimaryKey=function(o){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(d,m){o(m.primaryKey,m)})},Ve.prototype.keys=function(o){var u=this._ctx;u.keysOnly=!u.isMatch;var d=[];return this.each(function(m,b){d.push(b.key)}).then(function(){return d}).then(o)},Ve.prototype.primaryKeys=function(o){var u=this._ctx;if(u.dir==="next"&&$r(u,!0)&&0<u.limit)return this._read(function(m){var b=Qi(u,u.table.core.schema);return u.table.core.query({trans:m,values:!1,limit:u.limit,query:{index:b,range:u.range}})}).then(function(m){return m.result}).then(o);u.keysOnly=!u.isMatch;var d=[];return this.each(function(m,b){d.push(b.primaryKey)}).then(function(){return d}).then(o)},Ve.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},Ve.prototype.firstKey=function(o){return this.limit(1).keys(function(u){return u[0]}).then(o)},Ve.prototype.lastKey=function(o){return this.reverse().firstKey(o)},Ve.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var u={};return Eo(this._ctx,function(b){var m=b.primaryKey.toString(),b=p(u,m);return u[m]=!0,!b}),this},Ve.prototype.modify=function(o){var u=this,d=this._ctx;return this._write(function(m){var b=typeof o=="function"?o:function(U){return xl(U,o)},x=d.table.core,$=x.schema.primaryKey,O=$.outbound,R=$.extractKey,j=200,$=u.db._options.modifyChunkSize;$&&(j=typeof $=="object"?$[x.name]||$["*"]||200:$);function W(U,Y){var V=Y.failures,Y=Y.numFailures;q+=U-Y;for(var ee=0,re=a(V);ee<re.length;ee++){var ce=re[ee];M.push(V[ce])}}var M=[],q=0,L=[],H=o===Sl;return u.clone().primaryKeys().then(function(U){function K(Y){var ee=Math.min(j,U.length-Y),re=U.slice(Y,Y+ee);return(H?Promise.resolve([]):x.getMany({trans:m,keys:re,cache:"immutable"})).then(function(ce){var ge=[],le=[],he=O?[]:null,me=H?re:[];if(!H)for(var de=0;de<ee;++de){var xe=ce[de],$e={value:F(xe),primKey:U[Y+de]};b.call($e,$e.value,$e)!==!1&&($e.value==null?me.push(U[Y+de]):O||Ue(R(xe),R($e.value))===0?(le.push($e.value),O&&he.push(U[Y+de])):(me.push(U[Y+de]),ge.push($e.value)))}return Promise.resolve(0<ge.length&&x.mutate({trans:m,type:"add",values:ge}).then(function(Fe){for(var Be in Fe.failures)me.splice(parseInt(Be),1);W(ge.length,Fe)})).then(function(){return(0<le.length||V&&typeof o=="object")&&x.mutate({trans:m,type:"put",keys:he,values:le,criteria:V,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<Y}).then(function(Fe){return W(le.length,Fe)})}).then(function(){return(0<me.length||V&&H)&&x.mutate({trans:m,type:"delete",keys:me,criteria:V,isAdditionalChunk:0<Y}).then(function(Fe){return Zi(d.table,me,Fe)}).then(function(Fe){return W(me.length,Fe)})}).then(function(){return U.length>Y+ee&&K(Y+j)})})}var V=$r(d)&&d.limit===1/0&&(typeof o!="function"||H)&&{index:d.index,range:d.range};return K(0).then(function(){if(0<M.length)throw new Kt("Error modifying one or more objects",M,q,L);return U.length})})})},Ve.prototype.delete=function(){var o=this._ctx,u=o.range;return!$r(o)||o.table.schema.yProps||!o.isPrimKey&&u.type!==3?this.modify(Sl):this._write(function(d){var m=o.table.core.schema.primaryKey,b=u;return o.table.core.count({trans:d,query:{index:m,range:b}}).then(function(x){return o.table.core.mutate({trans:d,type:"deleteRange",range:b}).then(function(j){var R=j.failures,j=j.numFailures;if(j)throw new Kt("Could not delete some values",Object.keys(R).map(function($){return R[$]}),x-j);return x-j})})})},Ve);function Ve(){}var Sl=function(o,u){return u.value=null};function nh(o,u){return o<u?-1:o===u?0:1}function rh(o,u){return u<o?-1:o===u?0:1}function Vt(o,u,d){return o=o instanceof Ol?new o.Collection(o):o,o._ctx.error=new(d||TypeError)(u),o}function Lr(o){return new o.Collection(o,function(){return kl("")}).limit(0)}function ts(o,u,d,m){var b,x,O,R,j,$,W,M=d.length;if(!d.every(function(H){return typeof H=="string"}))return Vt(o,gl);function q(H){b=H==="next"?function(K){return K.toUpperCase()}:function(K){return K.toLowerCase()},x=H==="next"?function(K){return K.toLowerCase()}:function(K){return K.toUpperCase()},O=H==="next"?nh:rh;var U=d.map(function(K){return{lower:x(K),upper:b(K)}}).sort(function(K,V){return O(K.lower,V.lower)});R=U.map(function(K){return K.upper}),j=U.map(function(K){return K.lower}),W=($=H)==="next"?"":m}q("next"),o=new o.Collection(o,function(){return Gn(R[0],j[M-1]+m)}),o._ondirectionchange=function(H){q(H)};var L=0;return o._addAlgorithm(function(H,U,K){var V=H.key;if(typeof V!="string")return!1;var Y=x(V);if(u(Y,j,L))return!0;for(var ee=null,re=L;re<M;++re){var ce=(function(ge,le,he,me,de,xe){for(var $e=Math.min(ge.length,me.length),Fe=-1,Be=0;Be<$e;++Be){var Gt=le[Be];if(Gt!==me[Be])return de(ge[Be],he[Be])<0?ge.substr(0,Be)+he[Be]+he.substr(Be+1):de(ge[Be],me[Be])<0?ge.substr(0,Be)+me[Be]+he.substr(Be+1):0<=Fe?ge.substr(0,Fe)+le[Fe]+he.substr(Fe+1):null;de(ge[Be],Gt)<0&&(Fe=Be)}return $e<me.length&&xe==="next"?ge+he.substr(ge.length):$e<ge.length&&xe==="prev"?ge.substr(0,he.length):Fe<0?null:ge.substr(0,Fe)+me[Fe]+he.substr(Fe+1)})(V,Y,R[re],j[re],O,$);ce===null&&ee===null?L=re+1:(ee===null||0<O(ee,ce))&&(ee=ce)}return U(ee!==null?function(){H.continue(ee+W)}:K),!1}),o}function Gn(o,u,d,m){return{type:2,lower:o,upper:u,lowerOpen:d,upperOpen:m}}function kl(o){return{type:1,lower:o,upper:o}}var Ol=(Object.defineProperty(Ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ct.prototype.between=function(o,u,d,m){d=d!==!1,m=m===!0;try{return 0<this._cmp(o,u)||this._cmp(o,u)===0&&(d||m)&&(!d||!m)?Lr(this):new this.Collection(this,function(){return Gn(o,u,!d,!m)})}catch{return Vt(this,Sn)}},Ct.prototype.equals=function(o){return o==null?Vt(this,Sn):new this.Collection(this,function(){return kl(o)})},Ct.prototype.above=function(o){return o==null?Vt(this,Sn):new this.Collection(this,function(){return Gn(o,void 0,!0)})},Ct.prototype.aboveOrEqual=function(o){return o==null?Vt(this,Sn):new this.Collection(this,function(){return Gn(o,void 0,!1)})},Ct.prototype.below=function(o){return o==null?Vt(this,Sn):new this.Collection(this,function(){return Gn(void 0,o,!1,!0)})},Ct.prototype.belowOrEqual=function(o){return o==null?Vt(this,Sn):new this.Collection(this,function(){return Gn(void 0,o)})},Ct.prototype.startsWith=function(o){return typeof o!="string"?Vt(this,gl):this.between(o,o+pr,!0,!0)},Ct.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):ts(this,function(u,d){return u.indexOf(d[0])===0},[o],pr)},Ct.prototype.equalsIgnoreCase=function(o){return ts(this,function(u,d){return u===d[0]},[o],"")},Ct.prototype.anyOfIgnoreCase=function(){var o=et.apply(ze,arguments);return o.length===0?Lr(this):ts(this,function(u,d){return d.indexOf(u)!==-1},o,"")},Ct.prototype.startsWithAnyOfIgnoreCase=function(){var o=et.apply(ze,arguments);return o.length===0?Lr(this):ts(this,function(u,d){return d.some(function(m){return u.indexOf(m)===0})},o,pr)},Ct.prototype.anyOf=function(){var o=this,u=et.apply(ze,arguments),d=this._cmp;try{u.sort(d)}catch{return Vt(this,Sn)}if(u.length===0)return Lr(this);var m=new this.Collection(this,function(){return Gn(u[0],u[u.length-1])});m._ondirectionchange=function(x){d=x==="next"?o._ascending:o._descending,u.sort(d)};var b=0;return m._addAlgorithm(function(x,O,R){for(var j=x.key;0<d(j,u[b]);)if(++b===u.length)return O(R),!1;return d(j,u[b])===0||(O(function(){x.continue(u[b])}),!1)}),m},Ct.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ct.prototype.noneOf=function(){var o=et.apply(ze,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Vt(this,Sn)}var u=o.reduce(function(d,m){return d?d.concat([[d[d.length-1][1],m]]):[[-1/0,m]]},null);return u.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},Ct.prototype.inAnyRange=function(V,u){var d=this,m=this._cmp,b=this._ascending,x=this._descending,O=this._min,R=this._max;if(V.length===0)return Lr(this);if(!V.every(function(Y){return Y[0]!==void 0&&Y[1]!==void 0&&b(Y[0],Y[1])<=0}))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var j=!u||u.includeLowers!==!1,$=u&&u.includeUppers===!0,W,M=b;function q(Y,ee){return M(Y[0],ee[0])}try{(W=V.reduce(function(Y,ee){for(var re=0,ce=Y.length;re<ce;++re){var ge=Y[re];if(m(ee[0],ge[1])<0&&0<m(ee[1],ge[0])){ge[0]=O(ge[0],ee[0]),ge[1]=R(ge[1],ee[1]);break}}return re===ce&&Y.push(ee),Y},[])).sort(q)}catch{return Vt(this,Sn)}var L=0,H=$?function(Y){return 0<b(Y,W[L][1])}:function(Y){return 0<=b(Y,W[L][1])},U=j?function(Y){return 0<x(Y,W[L][0])}:function(Y){return 0<=x(Y,W[L][0])},K=H,V=new this.Collection(this,function(){return Gn(W[0][0],W[W.length-1][1],!j,!$)});return V._ondirectionchange=function(Y){M=Y==="next"?(K=H,b):(K=U,x),W.sort(q)},V._addAlgorithm(function(Y,ee,re){for(var ce,ge=Y.key;K(ge);)if(++L===W.length)return ee(re),!1;return!H(ce=ge)&&!U(ce)||(d._cmp(ge,W[L][1])===0||d._cmp(ge,W[L][0])===0||ee(function(){M===b?Y.continue(W[L][0]):Y.continue(W[L][1])}),!1)}),V},Ct.prototype.startsWithAnyOf=function(){var o=et.apply(ze,arguments);return o.every(function(u){return typeof u=="string"})?o.length===0?Lr(this):this.inAnyRange(o.map(function(u){return[u,u+pr]})):Vt(this,"startsWithAnyOf() only works with strings")},Ct);function Ct(){}function pn(o){return at(function(u){return ii(u),o(u.target.error),!1})}function ii(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var si="storagemutated",So="x-storagemutated-1",Yn=ni(null,si),ih=(gn.prototype._lock=function(){return S(!we.global),++this._reculock,this._reculock!==1||we.global||(we.lockOwnerFor=this),this},gn.prototype._unlock=function(){if(S(!we.global),--this._reculock==0)for(we.global||(we.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{dr(o[1],o[0])}catch{}}return this},gn.prototype._locked=function(){return this._reculock&&we.lockOwnerFor!==this},gn.prototype.create=function(o){var u=this;if(!this.mode)return this;var d=this.db.idbdb,m=this.db._state.dbOpenError;if(S(!this.idbtrans),!o&&!d)switch(m&&m.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(m);case"MissingAPIError":throw new Ce.MissingAPI(m.message,m);default:throw new Ce.OpenFailed(m)}if(!this.active)throw new Ce.TransactionInactive;return S(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||d).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=at(function(b){ii(b),u._reject(o.error)}),o.onabort=at(function(b){ii(b),u.active&&u._reject(new Ce.Abort(o.error)),u.active=!1,u.on("abort").fire(b)}),o.oncomplete=at(function(){u.active=!1,u._resolve(),"mutatedParts"in o&&Yn.storagemutated.fire(o.mutatedParts)}),this},gn.prototype._promise=function(o,u,d){var m=this;if(o==="readwrite"&&this.mode!=="readwrite")return gt(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new Ce.TransactionInactive);if(this._locked())return new be(function(x,O){m._blockedFuncs.push([function(){m._promise(o,u,d).then(x,O)},we])});if(d)return Kn(function(){var x=new be(function(O,R){m._lock();var j=u(O,R,m);j&&j.then&&j.then(O,R)});return x.finally(function(){return m._unlock()}),x._lib=!0,x});var b=new be(function(x,O){var R=u(x,O,m);R&&R.then&&R.then(x,O)});return b._lib=!0,b},gn.prototype._root=function(){return this.parent?this.parent._root():this},gn.prototype.waitFor=function(o){var u,d=this._root(),m=be.resolve(o);d._waitingFor?d._waitingFor=d._waitingFor.then(function(){return m}):(d._waitingFor=m,d._waitingQueue=[],u=d.idbtrans.objectStore(d.storeNames[0]),(function x(){for(++d._spinCount;d._waitingQueue.length;)d._waitingQueue.shift()();d._waitingFor&&(u.get(-1/0).onsuccess=x)})());var b=d._waitingFor;return new be(function(x,O){m.then(function(R){return d._waitingQueue.push(at(x.bind(null,R)))},function(R){return d._waitingQueue.push(at(O.bind(null,R)))}).finally(function(){d._waitingFor===b&&(d._waitingFor=null)})})},gn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},gn.prototype.table=function(o){var u=this._memoizedTables||(this._memoizedTables={});if(p(u,o))return u[o];var d=this.schema[o];if(!d)throw new Ce.NotFound("Table "+o+" not part of transaction");return d=new this.db.Table(o,d,this),d.core=this.db.core.table(o),u[o]=d},gn);function gn(){}function ko(o,u,d,m,b,x,O,R){return{name:o,keyPath:u,unique:d,multi:m,auto:b,compound:x,src:(d&&!O?"&":"")+(m?"*":"")+(b?"++":"")+Al(u),type:R}}function Al(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function Oo(o,u,d){return{name:o,primKey:u,indexes:d,mappedClass:null,idxByName:(m=function(b){return[b.name,b]},d.reduce(function(b,x,O){return O=m(x,O),O&&(b[O[0]]=O[1]),b},{}))};var m}var oi=function(o){try{return o.only([[]]),oi=function(){return[[]]},[[]]}catch{return oi=function(){return pr},pr}};function Ao(o){return o==null?function(){}:typeof o=="string"?(u=o).split(".").length===1?function(d){return d[u]}:function(d){return k(d,u)}:function(d){return k(d,o)};var u}function Tl(o){return[].slice.call(o)}var sh=0;function ai(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function oh(o,u,j){function m(K){if(K.type===3)return null;if(K.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var L=K.lower,H=K.upper,U=K.lowerOpen,K=K.upperOpen;return L===void 0?H===void 0?null:u.upperBound(H,!!K):H===void 0?u.lowerBound(L,!!U):u.bound(L,H,!!U,!!K)}function b(q){var L,H=q.name;return{name:H,schema:q,mutate:function(U){var K=U.trans,V=U.type,Y=U.keys,ee=U.values,re=U.range;return new Promise(function(ce,ge){ce=at(ce);var le=K.objectStore(H),he=le.keyPath==null,me=V==="put"||V==="add";if(!me&&V!=="delete"&&V!=="deleteRange")throw new Error("Invalid operation type: "+V);var de,xe=(Y||ee||{length:1}).length;if(Y&&ee&&Y.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(xe===0)return ce({numFailures:0,failures:{},results:[],lastResult:void 0});function $e(Mt){++Gt,ii(Mt)}var Fe=[],Be=[],Gt=0;if(V==="deleteRange"){if(re.type===4)return ce({numFailures:Gt,failures:Be,results:[],lastResult:void 0});re.type===3?Fe.push(de=le.clear()):Fe.push(de=le.delete(m(re)))}else{var he=me?he?[ee,Y]:[ee,null]:[Y,null],Me=he[0],Ot=he[1];if(me)for(var At=0;At<xe;++At)Fe.push(de=Ot&&Ot[At]!==void 0?le[V](Me[At],Ot[At]):le[V](Me[At])),de.onerror=$e;else for(At=0;At<xe;++At)Fe.push(de=le[V](Me[At])),de.onerror=$e}function ds(Mt){Mt=Mt.target.result,Fe.forEach(function(yr,qo){return yr.error!=null&&(Be[qo]=yr.error)}),ce({numFailures:Gt,failures:Be,results:V==="delete"?Y:Fe.map(function(yr){return yr.result}),lastResult:Mt})}de.onerror=function(Mt){$e(Mt),ds(Mt)},de.onsuccess=ds})},getMany:function(U){var K=U.trans,V=U.keys;return new Promise(function(Y,ee){Y=at(Y);for(var re,ce=K.objectStore(H),ge=V.length,le=new Array(ge),he=0,me=0,de=function(Fe){Fe=Fe.target,le[Fe._pos]=Fe.result,++me===he&&Y(le)},xe=pn(ee),$e=0;$e<ge;++$e)V[$e]!=null&&((re=ce.get(V[$e]))._pos=$e,re.onsuccess=de,re.onerror=xe,++he);he===0&&Y(le)})},get:function(U){var K=U.trans,V=U.key;return new Promise(function(Y,ee){Y=at(Y);var re=K.objectStore(H).get(V);re.onsuccess=function(ce){return Y(ce.target.result)},re.onerror=pn(ee)})},query:(L=$,function(U){return new Promise(function(K,V){K=at(K);var Y,ee,re,he=U.trans,ce=U.values,ge=U.limit,de=U.query,le=ge===1/0?void 0:ge,me=de.index,de=de.range,he=he.objectStore(H),me=me.isPrimaryKey?he:he.index(me.name),de=m(de);if(ge===0)return K({result:[]});L?((le=ce?me.getAll(de,le):me.getAllKeys(de,le)).onsuccess=function(xe){return K({result:xe.target.result})},le.onerror=pn(V)):(Y=0,ee=!ce&&"openKeyCursor"in me?me.openKeyCursor(de):me.openCursor(de),re=[],ee.onsuccess=function(xe){var $e=ee.result;return $e?(re.push(ce?$e.value:$e.primaryKey),++Y===ge?K({result:re}):void $e.continue()):K({result:re})},ee.onerror=pn(V))})}),openCursor:function(U){var K=U.trans,V=U.values,Y=U.query,ee=U.reverse,re=U.unique;return new Promise(function(ce,ge){ce=at(ce);var me=Y.index,le=Y.range,he=K.objectStore(H),he=me.isPrimaryKey?he:he.index(me.name),me=ee?re?"prevunique":"prev":re?"nextunique":"next",de=!V&&"openKeyCursor"in he?he.openKeyCursor(m(le),me):he.openCursor(m(le),me);de.onerror=pn(ge),de.onsuccess=at(function(xe){var $e,Fe,Be,Gt,Me=de.result;Me?(Me.___id=++sh,Me.done=!1,$e=Me.continue.bind(Me),Fe=(Fe=Me.continuePrimaryKey)&&Fe.bind(Me),Be=Me.advance.bind(Me),Gt=function(){throw new Error("Cursor not stopped")},Me.trans=K,Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=function(){throw new Error("Cursor not started")},Me.fail=at(ge),Me.next=function(){var Ot=this,At=1;return this.start(function(){return At--?Ot.continue():Ot.stop()}).then(function(){return Ot})},Me.start=function(Ot){function At(){if(de.result)try{Ot()}catch(Mt){Me.fail(Mt)}else Me.done=!0,Me.start=function(){throw new Error("Cursor behind last entry")},Me.stop()}var ds=new Promise(function(Mt,yr){Mt=at(Mt),de.onerror=pn(yr),Me.fail=yr,Me.stop=function(qo){Me.stop=Me.continue=Me.continuePrimaryKey=Me.advance=Gt,Mt(qo)}});return de.onsuccess=at(function(Mt){de.onsuccess=At,At()}),Me.continue=$e,Me.continuePrimaryKey=Fe,Me.advance=Be,At(),ds},ce(Me)):ce(null)},ge)})},count:function(U){var K=U.query,V=U.trans,Y=K.index,ee=K.range;return new Promise(function(re,ce){var ge=V.objectStore(H),le=Y.isPrimaryKey?ge:ge.index(Y.name),ge=m(ee),le=ge?le.count(ge):le.count();le.onsuccess=at(function(he){return re(he.target.result)}),le.onerror=pn(ce)})}}}var x,O,R,W=(O=j,R=Tl((x=o).objectStoreNames),{schema:{name:x.name,tables:R.map(function(q){return O.objectStore(q)}).map(function(q){var L=q.keyPath,K=q.autoIncrement,H=l(L),U={},K={name:q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:L==null,compound:H,keyPath:L,autoIncrement:K,unique:!0,extractKey:Ao(L)},indexes:Tl(q.indexNames).map(function(V){return q.index(V)}).map(function(re){var Y=re.name,ee=re.unique,ce=re.multiEntry,re=re.keyPath,ce={name:Y,compound:l(re),keyPath:re,unique:ee,multiEntry:ce,extractKey:Ao(re)};return U[ai(re)]=ce}),getIndexByKeyPath:function(V){return U[ai(V)]}};return U[":id"]=K.primaryKey,L!=null&&(U[ai(L)]=K.primaryKey),K})},hasGetAll:0<R.length&&"getAll"in O.objectStore(R[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),j=W.schema,$=W.hasGetAll,W=j.tables.map(b),M={};return W.forEach(function(q){return M[q.name]=q}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(q){if(!M[q])throw new Error("Table '".concat(q,"' not found"));return M[q]},MIN_KEY:-1/0,MAX_KEY:oi(u),schema:j}}function ah(o,u,d,m){var b=d.IDBKeyRange;return d.indexedDB,{dbcore:(m=oh(u,b,m),o.dbcore.reduce(function(x,O){return O=O.create,r(r({},x),O(x))},m))}}function ns(o,m){var d=m.db,m=ah(o._middlewares,d,o._deps,m);o.core=m.dbcore,o.tables.forEach(function(b){var x=b.name;o.core.schema.tables.some(function(O){return O.name===x})&&(b.core=o.core.table(x),o[x]instanceof o.Table&&(o[x].core=b.core))})}function rs(o,u,d,m){d.forEach(function(b){var x=m[b];u.forEach(function(O){var R=(function j($,W){return E($,W)||($=f($))&&j($,W)})(O,b);(!R||"value"in R&&R.value===void 0)&&(O===o.Transaction.prototype||O instanceof o.Transaction?y(O,b,{get:function(){return this.table(b)},set:function(j){v(this,b,{value:j,writable:!0,configurable:!0,enumerable:!0})}}):O[b]=new o.Table(b,x))})})}function To(o,u){u.forEach(function(d){for(var m in d)d[m]instanceof o.Table&&delete d[m]})}function lh(o,u){return o._cfg.version-u._cfg.version}function uh(o,u,d,m){var b=o._dbSchema;d.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Oo("$meta",Rl("")[0],[]),o._storeNames.push("$meta"));var x=o._createTransaction("readwrite",o._storeNames,b);x.create(d),x._completion.catch(m);var O=x._reject.bind(x),R=we.transless||we;Kn(function(){return we.trans=x,we.transless=R,u!==0?(ns(o,d),$=u,((j=x).storeNames.includes("$meta")?j.table("$meta").get("version").then(function(W){return W??$}):be.resolve($)).then(function(W){return q=W,L=x,H=d,U=[],W=(M=o)._versions,K=M._dbSchema=ss(0,M.idbdb,H),(W=W.filter(function(V){return V._cfg.version>=q})).length!==0?(W.forEach(function(V){U.push(function(){var Y=K,ee=V._cfg.dbschema;os(M,Y,H),os(M,ee,H),K=M._dbSchema=ee;var re=Po(Y,ee);re.add.forEach(function(me){Ro(H,me[0],me[1].primKey,me[1].indexes)}),re.change.forEach(function(me){if(me.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var de=H.objectStore(me.name);me.add.forEach(function(xe){return is(de,xe)}),me.change.forEach(function(xe){de.deleteIndex(xe.name),is(de,xe)}),me.del.forEach(function(xe){return de.deleteIndex(xe)})});var ce=V._cfg.contentUpgrade;if(ce&&V._cfg.version>q){ns(M,H),L._memoizedTables={};var ge=T(ee);re.del.forEach(function(me){ge[me]=Y[me]}),To(M,[M.Transaction.prototype]),rs(M,[M.Transaction.prototype],a(ge),ge),L.schema=ge;var le,he=qe(ce);return he&&Ir(),re=be.follow(function(){var me;(le=ce(L))&&he&&(me=qn.bind(null,null),le.then(me,me))}),le&&typeof le.then=="function"?be.resolve(le):re.then(function(){return le})}}),U.push(function(Y){var ee,re,ce=V._cfg.dbschema;ee=ce,re=Y,[].slice.call(re.db.objectStoreNames).forEach(function(ge){return ee[ge]==null&&re.db.deleteObjectStore(ge)}),To(M,[M.Transaction.prototype]),rs(M,[M.Transaction.prototype],M._storeNames,M._dbSchema),L.schema=M._dbSchema}),U.push(function(Y){M.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(M.idbdb.version/10)===V._cfg.version?(M.idbdb.deleteObjectStore("$meta"),delete M._dbSchema.$meta,M._storeNames=M._storeNames.filter(function(ee){return ee!=="$meta"})):Y.objectStore("$meta").put(V._cfg.version,"version"))})}),(function V(){return U.length?be.resolve(U.shift()(L.idbtrans)).then(V):be.resolve()})().then(function(){Pl(K,H)})):be.resolve();var M,q,L,H,U,K}).catch(O)):(a(b).forEach(function(W){Ro(d,W,b[W].primKey,b[W].indexes)}),ns(o,d),void be.follow(function(){return o.on.populate.fire(x)}).catch(O));var j,$})}function ch(o,u){Pl(o._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var d=ss(0,o.idbdb,u);os(o,o._dbSchema,u);for(var m=0,b=Po(d,o._dbSchema).change;m<b.length;m++){var x=(function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var R=u.objectStore(O.name);O.add.forEach(function(j){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(j.src)),is(R,j)})})(b[m]);if(typeof x=="object")return x.value}}function Po(o,u){var d,m={del:[],add:[],change:[]};for(d in o)u[d]||m.del.push(d);for(d in u){var b=o[d],x=u[d];if(b){var O={name:d,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||b.primKey.auto!==x.primKey.auto)O.recreate=!0,m.change.push(O);else{var R=b.idxByName,j=x.idxByName,$=void 0;for($ in R)j[$]||O.del.push($);for($ in j){var W=R[$],M=j[$];W?W.src!==M.src&&O.change.push(M):O.add.push(M)}(0<O.del.length||0<O.add.length||0<O.change.length)&&m.change.push(O)}}else m.add.push([d,x])}return m}function Ro(o,u,d,m){var b=o.db.createObjectStore(u,d.keyPath?{keyPath:d.keyPath,autoIncrement:d.auto}:{autoIncrement:d.auto});return m.forEach(function(x){return is(b,x)}),b}function Pl(o,u){a(o).forEach(function(d){u.db.objectStoreNames.contains(d)||(ie&&console.debug("Dexie: Creating missing table",d),Ro(u,d,o[d].primKey,o[d].indexes))})}function is(o,u){o.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function ss(o,u,d){var m={};return _(u.objectStoreNames,0).forEach(function(b){for(var x=d.objectStore(b),O=ko(Al($=x.keyPath),$||"",!0,!1,!!x.autoIncrement,$&&typeof $!="string",!0),R=[],j=0;j<x.indexNames.length;++j){var W=x.index(x.indexNames[j]),$=W.keyPath,W=ko(W.name,$,!!W.unique,!!W.multiEntry,!1,$&&typeof $!="string",!1);R.push(W)}m[b]=Oo(b,O,R)}),m}function os(o,u,d){for(var m=d.db.objectStoreNames,b=0;b<m.length;++b){var x=m[b],O=d.objectStore(x);o._hasGetAll="getAll"in O;for(var R=0;R<O.indexNames.length;++R){var j=O.indexNames[R],$=O.index(j).keyPath,W=typeof $=="string"?$:"["+_($).join("+")+"]";!u[x]||($=u[x].idxByName[W])&&($.name=j,delete u[x].idxByName[W],u[x].idxByName[j]=$)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function Rl(o){return o.split(",").map(function(u,d){var x=u.split(":"),m=(b=x[1])===null||b===void 0?void 0:b.trim(),b=(u=x[0].trim()).replace(/([&*]|\+\+)/g,""),x=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return ko(b,x||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),l(x),d===0,m)})}var fh=(Fr.prototype._createTableSchema=Oo,Fr.prototype._parseIndexSyntax=Rl,Fr.prototype._parseStoresSpec=function(o,u){var d=this;a(o).forEach(function(m){if(o[m]!==null){var b=d._parseIndexSyntax(o[m]),x=b.shift();if(!x)throw new Ce.Schema("Invalid schema for table "+m+": "+o[m]);if(x.unique=!0,x.multi)throw new Ce.Schema("Primary key cannot be multiEntry*");b.forEach(function(O){if(O.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),b=d._createTableSchema(m,x,b),u[m]=b}})},Fr.prototype.stores=function(d){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,d):d;var d=u._versions,m={},b={};return d.forEach(function(x){h(m,x._cfg.storesSource),b=x._cfg.dbschema={},x._parseStoresSpec(m,b)}),u._dbSchema=b,To(u,[u._allTables,u,u.Transaction.prototype]),rs(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],a(b),b),u._storeNames=a(b),this},Fr.prototype.upgrade=function(o){return this._cfg.contentUpgrade=fe(this._cfg.contentUpgrade||P,o),this},Fr);function Fr(){}function No(o,u){var d=o._dbNamesDB;return d||(d=o._dbNamesDB=new kn(Xi,{addons:[],indexedDB:o,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),d.table("dbnames")}function Do(o){return o&&typeof o.databases=="function"}function Mo(o){return Kn(function(){return we.letThrough=!0,o()})}function Io(o){return!("from"in o)}var kt=function(o,u){if(!this){var d=new kt;return o&&"d"in o&&h(d,o),d}h(this,arguments.length?{d:1,from:o,to:1<arguments.length?u:o}:{d:0})};function li(o,u,d){var m=Ue(u,d);if(!isNaN(m)){if(0<m)throw RangeError();if(Io(o))return h(o,{from:u,to:d,d:1});var b=o.l,m=o.r;if(Ue(d,o.from)<0)return b?li(b,u,d):o.l={from:u,to:d,d:1,l:null,r:null},Dl(o);if(0<Ue(u,o.to))return m?li(m,u,d):o.r={from:u,to:d,d:1,l:null,r:null},Dl(o);Ue(u,o.from)<0&&(o.from=u,o.l=null,o.d=m?m.d+1:1),0<Ue(d,o.to)&&(o.to=d,o.r=null,o.d=o.l?o.l.d+1:1),d=!o.r,b&&!o.l&&ui(o,b),m&&d&&ui(o,m)}}function ui(o,u){Io(u)||(function d(m,j){var x=j.from,O=j.to,R=j.l,j=j.r;li(m,x,O),R&&d(m,R),j&&d(m,j)})(o,u)}function Nl(o,u){var d=as(u),m=d.next();if(m.done)return!1;for(var b=m.value,x=as(o),O=x.next(b.from),R=O.value;!m.done&&!O.done;){if(Ue(R.from,b.to)<=0&&0<=Ue(R.to,b.from))return!0;Ue(b.from,R.from)<0?b=(m=d.next(R.from)).value:R=(O=x.next(b.from)).value}return!1}function as(o){var u=Io(o)?null:{s:0,n:o};return{next:function(d){for(var m=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,m)for(;u.n.l&&Ue(d,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!m||Ue(d,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function Dl(o){var u,d,m=(((u=o.r)===null||u===void 0?void 0:u.d)||0)-(((d=o.l)===null||d===void 0?void 0:d.d)||0),b=1<m?"r":m<-1?"l":"";b&&(u=b=="r"?"l":"r",d=r({},o),m=o[b],o.from=m.from,o.to=m.to,o[b]=m[b],d[b]=m[u],(o[u]=d).d=Ml(d)),o.d=Ml(o)}function Ml(d){var u=d.r,d=d.l;return(u?d?Math.max(u.d,d.d):u.d:d?d.d:0)+1}function ls(o,u){return a(u).forEach(function(d){o[d]?ui(o[d],u[d]):o[d]=(function m(b){var x,O,R={};for(x in b)p(b,x)&&(O=b[x],R[x]=!O||typeof O!="object"||te.has(O.constructor)?O:m(O));return R})(u[d])}),o}function jo(o,u){return o.all||u.all||Object.keys(o).some(function(d){return u[d]&&Nl(u[d],o[d])})}g(kt.prototype,((Qt={add:function(o){return ui(this,o),this},addKey:function(o){return li(this,o,o),this},addKeys:function(o){var u=this;return o.forEach(function(d){return li(u,d,d)}),this},hasKey:function(o){var u=as(this).next(o).value;return u&&Ue(u.from,o)<=0&&0<=Ue(u.to,o)}})[ue]=function(){return as(this)},Qt));var mr={},$o={},Lo=!1;function us(o){ls($o,o),Lo||(Lo=!0,setTimeout(function(){Lo=!1,Fo($o,!($o={}))},0))}function Fo(o,u){u===void 0&&(u=!1);var d=new Set;if(o.all)for(var m=0,b=Object.values(mr);m<b.length;m++)Il(O=b[m],o,d,u);else for(var x in o){var O,R=/^idb\:\/\/(.*)\/(.*)\//.exec(x);R&&(x=R[1],R=R[2],(O=mr["idb://".concat(x,"/").concat(R)])&&Il(O,o,d,u))}d.forEach(function(j){return j()})}function Il(o,u,d,m){for(var b=[],x=0,O=Object.entries(o.queries.query);x<O.length;x++){for(var R=O[x],j=R[0],$=[],W=0,M=R[1];W<M.length;W++){var q=M[W];jo(u,q.obsSet)?q.subscribers.forEach(function(K){return d.add(K)}):m&&$.push(q)}m&&b.push([j,$])}if(m)for(var L=0,H=b;L<H.length;L++){var U=H[L],j=U[0],$=U[1];o.queries.query[j]=$}}function hh(o){var u=o._state,d=o._deps.indexedDB;if(u.isBeingOpened||o.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?gt(u.dbOpenError):o});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var m=u.openCanceller,b=Math.round(10*o.verno),x=!1;function O(){if(u.openCanceller!==m)throw new Ce.DatabaseClosed("db.open() was cancelled")}function R(){return new be(function(q,L){if(O(),!d)throw new Ce.MissingAPI;var H=o.name,U=u.autoSchema||!b?d.open(H):d.open(H,b);if(!U)throw new Ce.MissingAPI;U.onerror=pn(L),U.onblocked=at(o._fireOnBlocked),U.onupgradeneeded=at(function(K){var V;W=U.transaction,u.autoSchema&&!o._options.allowEmptyDB?(U.onerror=ii,W.abort(),U.result.close(),(V=d.deleteDatabase(H)).onsuccess=V.onerror=at(function(){L(new Ce.NoSuchDatabase("Database ".concat(H," doesnt exist")))})):(W.onerror=pn(L),K=K.oldVersion>Math.pow(2,62)?0:K.oldVersion,M=K<1,o.idbdb=U.result,x&&ch(o,W),uh(o,K/10,W,L))},L),U.onsuccess=at(function(){W=null;var K,V,Y,ee,re,ce=o.idbdb=U.result,ge=_(ce.objectStoreNames);if(0<ge.length)try{var le=ce.transaction((ee=ge).length===1?ee[0]:ee,"readonly");if(u.autoSchema)V=ce,Y=le,(K=o).verno=V.version/10,Y=K._dbSchema=ss(0,V,Y),K._storeNames=_(V.objectStoreNames,0),rs(K,[K._allTables],a(Y),Y);else if(os(o,o._dbSchema,le),((re=Po(ss(0,(re=o).idbdb,le),re._dbSchema)).add.length||re.change.some(function(he){return he.add.length||he.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ce.close(),b=ce.version+1,x=!0,q(R());ns(o,le)}catch{}jr.push(o),ce.onversionchange=at(function(he){u.vcFired=!0,o.on("versionchange").fire(he)}),ce.onclose=at(function(){o.close({disableAutoOpen:!1})}),M&&(re=o._deps,le=H,ce=re.indexedDB,re=re.IDBKeyRange,Do(ce)||le===Xi||No(ce,re).put({name:le}).catch(P)),q()},L)}).catch(function(q){switch(q?.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),R();break;case"VersionError":if(0<b)return b=0,R()}return be.reject(q)})}var j,$=u.dbReadyResolve,W=null,M=!1;return be.race([m,(typeof navigator>"u"?be.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(q){function L(){return indexedDB.databases().finally(q)}j=setInterval(L,100),L()}).finally(function(){return clearInterval(j)}):Promise.resolve()).then(R)]).then(function(){return O(),u.onReadyBeingFired=[],be.resolve(Mo(function(){return o.on.ready.fire(o.vip)})).then(function q(){if(0<u.onReadyBeingFired.length){var L=u.onReadyBeingFired.reduce(fe,P);return u.onReadyBeingFired=[],be.resolve(Mo(function(){return L(o.vip)})).then(q)}})}).finally(function(){u.openCanceller===m&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function(q){u.dbOpenError=q;try{W&&W.abort()}catch{}return m===u.openCanceller&&o._close(),gt(q)}).finally(function(){u.openComplete=!0,$()}).then(function(){var q;return M&&(q={},o.tables.forEach(function(L){L.schema.indexes.forEach(function(H){H.name&&(q["idb://".concat(o.name,"/").concat(L.name,"/").concat(H.name)]=new kt(-1/0,[[[]]]))}),q["idb://".concat(o.name,"/").concat(L.name,"/")]=q["idb://".concat(o.name,"/").concat(L.name,"/:dels")]=new kt(-1/0,[[[]]])}),Yn(si).fire(q),Fo(q,!0)),o})}function Bo(o){function u(x){return o.next(x)}var d=b(u),m=b(function(x){return o.throw(x)});function b(x){return function(j){var R=x(j),j=R.value;return R.done?j:j&&typeof j.then=="function"?j.then(d,m):l(j)?Promise.all(j).then(d,m):d(j)}}return b(u)()}function cs(o,u,d){for(var m=l(o)?o.slice():[o],b=0;b<d;++b)m.push(u);return m}var dh={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return r(r({},o),{table:function(u){var d=o.table(u),m=d.schema,b={},x=[];function O(M,q,L){var H=ai(M),U=b[H]=b[H]||[],K=M==null?0:typeof M=="string"?1:M.length,V=0<q,V=r(r({},L),{name:V?"".concat(H,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:V,keyTail:q,keyLength:K,extractKey:Ao(M),unique:!V&&L.unique});return U.push(V),V.isPrimaryKey||x.push(V),1<K&&O(K===2?M[0]:M.slice(0,K-1),q+1,L),U.sort(function(Y,ee){return Y.keyTail-ee.keyTail}),V}u=O(m.primaryKey.keyPath,0,m.primaryKey),b[":id"]=[u];for(var R=0,j=m.indexes;R<j.length;R++){var $=j[R];O($.keyPath,0,$)}function W(M){var q,L=M.query.index;return L.isVirtual?r(r({},M),{query:{index:L.lowLevelIndex,range:(q=M.query.range,L=L.keyTail,{type:q.type===1?2:q.type,lower:cs(q.lower,q.lowerOpen?o.MAX_KEY:o.MIN_KEY,L),lowerOpen:!0,upper:cs(q.upper,q.upperOpen?o.MIN_KEY:o.MAX_KEY,L),upperOpen:!0})}}):M}return r(r({},d),{schema:r(r({},m),{primaryKey:u,indexes:x,getIndexByKeyPath:function(M){return(M=b[ai(M)])&&M[0]}}),count:function(M){return d.count(W(M))},query:function(M){return d.query(W(M))},openCursor:function(M){var q=M.query.index,L=q.keyTail,H=q.isVirtual,U=q.keyLength;return H?d.openCursor(W(M)).then(function(V){return V&&K(V)}):d.openCursor(M);function K(V){return Object.create(V,{continue:{value:function(Y){Y!=null?V.continue(cs(Y,M.reverse?o.MAX_KEY:o.MIN_KEY,L)):M.unique?V.continue(V.key.slice(0,U).concat(M.reverse?o.MIN_KEY:o.MAX_KEY,L)):V.continue()}},continuePrimaryKey:{value:function(Y,ee){V.continuePrimaryKey(cs(Y,o.MAX_KEY,L),ee)}},primaryKey:{get:function(){return V.primaryKey}},key:{get:function(){var Y=V.key;return U===1?Y[0]:Y.slice(0,U)}},value:{get:function(){return V.value}}})}}})}})}};function zo(o,u,d,m){return d=d||{},m=m||"",a(o).forEach(function(b){var x,O,R;p(u,b)?(x=o[b],O=u[b],typeof x=="object"&&typeof O=="object"&&x&&O?(R=Z(x))!==Z(O)?d[m+b]=u[b]:R==="Object"?zo(x,O,d,m+b+"."):x!==O&&(d[m+b]=u[b]):x!==O&&(d[m+b]=u[b])):d[m+b]=void 0}),a(u).forEach(function(b){p(o,b)||(d[m+b]=u[b])}),d}function Ho(o,u){return u.type==="delete"?u.keys:u.keys||u.values.map(o.extractKey)}var ph={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return r(r({},o),{table:function(u){var d=o.table(u),m=d.schema.primaryKey;return r(r({},d),{mutate:function(b){var x=we.trans,O=x.table(u).hook,R=O.deleting,j=O.creating,$=O.updating;switch(b.type){case"add":if(j.fire===P)break;return x._promise("readwrite",function(){return W(b)},!0);case"put":if(j.fire===P&&$.fire===P)break;return x._promise("readwrite",function(){return W(b)},!0);case"delete":if(R.fire===P)break;return x._promise("readwrite",function(){return W(b)},!0);case"deleteRange":if(R.fire===P)break;return x._promise("readwrite",function(){return(function M(q,L,H){return d.query({trans:q,values:!1,query:{index:m,range:L},limit:H}).then(function(U){var K=U.result;return W({type:"delete",keys:K,trans:q}).then(function(V){return 0<V.numFailures?Promise.reject(V.failures[0]):K.length<H?{failures:[],numFailures:0,lastResult:void 0}:M(q,r(r({},L),{lower:K[K.length-1],lowerOpen:!0}),H)})})})(b.trans,b.range,1e4)},!0)}return d.mutate(b);function W(M){var q,L,H,U=we.trans,K=M.keys||Ho(m,M);if(!K)throw new Error("Keys missing");return(M=M.type==="add"||M.type==="put"?r(r({},M),{keys:K}):r({},M)).type!=="delete"&&(M.values=i([],M.values)),M.keys&&(M.keys=i([],M.keys)),q=d,H=K,((L=M).type==="add"?Promise.resolve([]):q.getMany({trans:L.trans,keys:H,cache:"immutable"})).then(function(V){var Y=K.map(function(ee,re){var ce,ge,le,he=V[re],me={onerror:null,onsuccess:null};return M.type==="delete"?R.fire.call(me,ee,he,U):M.type==="add"||he===void 0?(ce=j.fire.call(me,ee,M.values[re],U),ee==null&&ce!=null&&(M.keys[re]=ee=ce,m.outbound||D(M.values[re],m.keyPath,ee))):(ce=zo(he,M.values[re]),(ge=$.fire.call(me,ce,ee,he,U))&&(le=M.values[re],Object.keys(ge).forEach(function(de){p(le,de)?le[de]=ge[de]:D(le,de,ge[de])}))),me});return d.mutate(M).then(function(ee){for(var re=ee.failures,ce=ee.results,ge=ee.numFailures,ee=ee.lastResult,le=0;le<K.length;++le){var he=(ce||K)[le],me=Y[le];he==null?me.onerror&&me.onerror(re[le]):me.onsuccess&&me.onsuccess(M.type==="put"&&V[le]?M.values[le]:he)}return{failures:re,results:ce,numFailures:ge,lastResult:ee}}).catch(function(ee){return Y.forEach(function(re){return re.onerror&&re.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function jl(o,u,d){try{if(!u||u.keys.length<o.length)return null;for(var m=[],b=0,x=0;b<u.keys.length&&x<o.length;++b)Ue(u.keys[b],o[x])===0&&(m.push(d?F(u.values[b]):u.values[b]),++x);return m.length===o.length?m:null}catch{return null}}var gh={stack:"dbcore",level:-1,create:function(o){return{table:function(u){var d=o.table(u);return r(r({},d),{getMany:function(m){if(!m.cache)return d.getMany(m);var b=jl(m.keys,m.trans._cache,m.cache==="clone");return b?be.resolve(b):d.getMany(m).then(function(x){return m.trans._cache={keys:m.keys,values:m.cache==="clone"?F(x):x},x})},mutate:function(m){return m.type!=="add"&&(m.trans._cache=null),d.mutate(m)}})}}}};function $l(o,u){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function Ll(o,u){switch(o){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var mh={stack:"dbcore",level:0,name:"Observability",create:function(o){var u=o.schema.name,d=new kt(o.MIN_KEY,o.MAX_KEY);return r(r({},o),{transaction:function(m,b,x){if(we.subscr&&b!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(we.querier));return o.transaction(m,b,x)},table:function(m){var b=o.table(m),x=b.schema,O=x.primaryKey,M=x.indexes,R=O.extractKey,j=O.outbound,$=O.autoIncrement&&M.filter(function(L){return L.compound&&L.keyPath.includes(O.keyPath)}),W=r(r({},b),{mutate:function(L){function H(de){return de="idb://".concat(u,"/").concat(m,"/").concat(de),ee[de]||(ee[de]=new kt)}var U,K,V,Y=L.trans,ee=L.mutatedParts||(L.mutatedParts={}),re=H(""),ce=H(":dels"),ge=L.type,me=L.type==="deleteRange"?[L.range]:L.type==="delete"?[L.keys]:L.values.length<50?[Ho(O,L).filter(function(de){return de}),L.values]:[],le=me[0],he=me[1],me=L.trans._cache;return l(le)?(re.addKeys(le),(me=ge==="delete"||le.length===he.length?jl(le,me):null)||ce.addKeys(le),(me||he)&&(U=H,K=me,V=he,x.indexes.forEach(function(de){var xe=U(de.name||"");function $e(Be){return Be!=null?de.extractKey(Be):null}function Fe(Be){return de.multiEntry&&l(Be)?Be.forEach(function(Gt){return xe.addKey(Gt)}):xe.addKey(Be)}(K||V).forEach(function(Be,Ot){var Me=K&&$e(K[Ot]),Ot=V&&$e(V[Ot]);Ue(Me,Ot)!==0&&(Me!=null&&Fe(Me),Ot!=null&&Fe(Ot))})}))):le?(he={from:(he=le.lower)!==null&&he!==void 0?he:o.MIN_KEY,to:(he=le.upper)!==null&&he!==void 0?he:o.MAX_KEY},ce.add(he),re.add(he)):(re.add(d),ce.add(d),x.indexes.forEach(function(de){return H(de.name).add(d)})),b.mutate(L).then(function(de){return!le||L.type!=="add"&&L.type!=="put"||(re.addKeys(de.results),$&&$.forEach(function(xe){for(var $e=L.values.map(function(Me){return xe.extractKey(Me)}),Fe=xe.keyPath.findIndex(function(Me){return Me===O.keyPath}),Be=0,Gt=de.results.length;Be<Gt;++Be)$e[Be][Fe]=de.results[Be];H(xe.name).addKeys($e)})),Y.mutatedParts=ls(Y.mutatedParts||{},ee),de})}}),M=function(H){var U=H.query,H=U.index,U=U.range;return[H,new kt((H=U.lower)!==null&&H!==void 0?H:o.MIN_KEY,(U=U.upper)!==null&&U!==void 0?U:o.MAX_KEY)]},q={get:function(L){return[O,new kt(L.key)]},getMany:function(L){return[O,new kt().addKeys(L.keys)]},count:M,query:M,openCursor:M};return a(q).forEach(function(L){W[L]=function(H){var U=we.subscr,K=!!U,V=$l(we,b)&&Ll(L,H)?H.obsSet={}:U;if(K){var Y=function(he){return he="idb://".concat(u,"/").concat(m,"/").concat(he),V[he]||(V[he]=new kt)},ee=Y(""),re=Y(":dels"),U=q[L](H),K=U[0],U=U[1];if((L==="query"&&K.isPrimaryKey&&!H.values?re:Y(K.name||"")).add(U),!K.isPrimaryKey){if(L!=="count"){var ce=L==="query"&&j&&H.values&&b.query(r(r({},H),{values:!1}));return b[L].apply(this,arguments).then(function(he){if(L==="query"){if(j&&H.values)return ce.then(function($e){return $e=$e.result,ee.addKeys($e),he});var me=H.values?he.result.map(R):he.result;(H.values?ee:re).addKeys(me)}else if(L==="openCursor"){var de=he,xe=H.values;return de&&Object.create(de,{key:{get:function(){return re.addKey(de.primaryKey),de.key}},primaryKey:{get:function(){var $e=de.primaryKey;return re.addKey($e),$e}},value:{get:function(){return xe&&ee.addKey(de.primaryKey),de.value}}})}return he})}re.add(d)}}return b[L].apply(this,arguments)}}),W}})}};function Fl(o,u,d){if(d.numFailures===0)return u;if(u.type==="deleteRange")return null;var m=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1;return d.numFailures===m?null:(u=r({},u),l(u.keys)&&(u.keys=u.keys.filter(function(b,x){return!(x in d.failures)})),"values"in u&&l(u.values)&&(u.values=u.values.filter(function(b,x){return!(x in d.failures)})),u)}function Uo(o,u){return d=o,((m=u).lower===void 0||(m.lowerOpen?0<Ue(d,m.lower):0<=Ue(d,m.lower)))&&(o=o,(u=u).upper===void 0||(u.upperOpen?Ue(o,u.upper)<0:Ue(o,u.upper)<=0));var d,m}function Bl(o,u,q,m,b,x){if(!q||q.length===0)return o;var O=u.query.index,R=O.multiEntry,j=u.query.range,$=m.schema.primaryKey.extractKey,W=O.extractKey,M=(O.lowLevelIndex||O).extractKey,q=q.reduce(function(L,H){var U=L,K=[];if(H.type==="add"||H.type==="put")for(var V=new kt,Y=H.values.length-1;0<=Y;--Y){var ee,re=H.values[Y],ce=$(re);V.hasKey(ce)||(ee=W(re),(R&&l(ee)?ee.some(function(de){return Uo(de,j)}):Uo(ee,j))&&(V.addKey(ce),K.push(re)))}switch(H.type){case"add":var ge=new kt().addKeys(u.values?L.map(function(xe){return $(xe)}):L),U=L.concat(u.values?K.filter(function(xe){return xe=$(xe),!ge.hasKey(xe)&&(ge.addKey(xe),!0)}):K.map(function(xe){return $(xe)}).filter(function(xe){return!ge.hasKey(xe)&&(ge.addKey(xe),!0)}));break;case"put":var le=new kt().addKeys(H.values.map(function(xe){return $(xe)}));U=L.filter(function(xe){return!le.hasKey(u.values?$(xe):xe)}).concat(u.values?K:K.map(function(xe){return $(xe)}));break;case"delete":var he=new kt().addKeys(H.keys);U=L.filter(function(xe){return!he.hasKey(u.values?$(xe):xe)});break;case"deleteRange":var me=H.range;U=L.filter(function(xe){return!Uo($(xe),me)})}return U},o);return q===o?o:(q.sort(function(L,H){return Ue(M(L),M(H))||Ue($(L),$(H))}),u.limit&&u.limit<1/0&&(q.length>u.limit?q.length=u.limit:o.length===u.limit&&q.length<u.limit&&(b.dirty=!0)),x?Object.freeze(q):q)}function zl(o,u){return Ue(o.lower,u.lower)===0&&Ue(o.upper,u.upper)===0&&!!o.lowerOpen==!!u.lowerOpen&&!!o.upperOpen==!!u.upperOpen}function vh(o,u){return(function(d,m,b,x){if(d===void 0)return m!==void 0?-1:0;if(m===void 0)return 1;if((m=Ue(d,m))===0){if(b&&x)return 0;if(b)return 1;if(x)return-1}return m})(o.lower,u.lower,o.lowerOpen,u.lowerOpen)<=0&&0<=(function(d,m,b,x){if(d===void 0)return m!==void 0?1:0;if(m===void 0)return-1;if((m=Ue(d,m))===0){if(b&&x)return 0;if(b)return-1;if(x)return 1}return m})(o.upper,u.upper,o.upperOpen,u.upperOpen)}function yh(o,u,d,m){o.subscribers.add(d),m.addEventListener("abort",function(){var b,x;o.subscribers.delete(d),o.subscribers.size===0&&(b=o,x=u,setTimeout(function(){b.subscribers.size===0&&Oe(x,b)},3e3))})}var bh={stack:"dbcore",level:0,name:"Cache",create:function(o){var u=o.schema.name;return r(r({},o),{transaction:function(d,m,b){var x,O,R=o.transaction(d,m,b);return m==="readwrite"&&(O=(x=new AbortController).signal,b=function(j){return function(){if(x.abort(),m==="readwrite"){for(var $=new Set,W=0,M=d;W<M.length;W++){var q=M[W],L=mr["idb://".concat(u,"/").concat(q)];if(L){var H=o.table(q),U=L.optimisticOps.filter(function(xe){return xe.trans===R});if(R._explicit&&j&&R.mutatedParts)for(var K=0,V=Object.values(L.queries.query);K<V.length;K++)for(var Y=0,ee=(ge=V[K]).slice();Y<ee.length;Y++)jo((le=ee[Y]).obsSet,R.mutatedParts)&&(Oe(ge,le),le.subscribers.forEach(function(xe){return $.add(xe)}));else if(0<U.length){L.optimisticOps=L.optimisticOps.filter(function(xe){return xe.trans!==R});for(var re=0,ce=Object.values(L.queries.query);re<ce.length;re++)for(var ge,le,he,me=0,de=(ge=ce[re]).slice();me<de.length;me++)(le=de[me]).res!=null&&R.mutatedParts&&(j&&!le.dirty?(he=Object.isFrozen(le.res),he=Bl(le.res,le.req,U,H,le,he),le.dirty?(Oe(ge,le),le.subscribers.forEach(function(xe){return $.add(xe)})):he!==le.res&&(le.res=he,le.promise=be.resolve({result:he}))):(le.dirty&&Oe(ge,le),le.subscribers.forEach(function(xe){return $.add(xe)})))}}}$.forEach(function(xe){return xe()})}}},R.addEventListener("abort",b(!1),{signal:O}),R.addEventListener("error",b(!1),{signal:O}),R.addEventListener("complete",b(!0),{signal:O})),R},table:function(d){var m=o.table(d),b=m.schema.primaryKey;return r(r({},m),{mutate:function(x){var O=we.trans;if(b.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return m.mutate(x);var R=mr["idb://".concat(u,"/").concat(d)];return R?(O=m.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Ho(b,x).some(function(j){return j==null}))?(R.optimisticOps.push(x),x.mutatedParts&&us(x.mutatedParts),O.then(function(j){0<j.numFailures&&(Oe(R.optimisticOps,x),(j=Fl(0,x,j))&&R.optimisticOps.push(j),x.mutatedParts&&us(x.mutatedParts))}),O.catch(function(){Oe(R.optimisticOps,x),x.mutatedParts&&us(x.mutatedParts)})):O.then(function(j){var $=Fl(0,r(r({},x),{values:x.values.map(function(W,M){var q;return j.failures[M]?W:(W=(q=b.keyPath)!==null&&q!==void 0&&q.includes(".")?F(W):r({},W),D(W,b.keyPath,j.results[M]),W)})}),j);R.optimisticOps.push($),queueMicrotask(function(){return x.mutatedParts&&us(x.mutatedParts)})}),O):m.mutate(x)},query:function(x){if(!$l(we,m)||!Ll("query",x))return m.query(x);var O=(($=we.trans)===null||$===void 0?void 0:$.db._options.cache)==="immutable",M=we,R=M.requery,j=M.signal,$=(function(H,U,K,V){var Y=mr["idb://".concat(H,"/").concat(U)];if(!Y)return[];if(!(U=Y.queries[K]))return[null,!1,Y,null];var ee=U[(V.query?V.query.index.name:null)||""];if(!ee)return[null,!1,Y,null];switch(K){case"query":var re=ee.find(function(ce){return ce.req.limit===V.limit&&ce.req.values===V.values&&zl(ce.req.query.range,V.query.range)});return re?[re,!0,Y,ee]:[ee.find(function(ce){return("limit"in ce.req?ce.req.limit:1/0)>=V.limit&&(!V.values||ce.req.values)&&vh(ce.req.query.range,V.query.range)}),!1,Y,ee];case"count":return re=ee.find(function(ce){return zl(ce.req.query.range,V.query.range)}),[re,!!re,Y,ee]}})(u,d,"query",x),W=$[0],M=$[1],q=$[2],L=$[3];return W&&M?W.obsSet=x.obsSet:(M=m.query(x).then(function(H){var U=H.result;if(W&&(W.res=U),O){for(var K=0,V=U.length;K<V;++K)Object.freeze(U[K]);Object.freeze(U)}else H.result=F(U);return H}).catch(function(H){return L&&W&&Oe(L,W),Promise.reject(H)}),W={obsSet:x.obsSet,promise:M,subscribers:new Set,type:"query",req:x,dirty:!1},L?L.push(W):(L=[W],(q=q||(mr["idb://".concat(u,"/").concat(d)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=L)),yh(W,L,R,j),W.promise.then(function(H){return{result:Bl(H.result,x,q?.optimisticOps,m,W,O)}})}})}})}};function fs(o,u){return new Proxy(o,{get:function(d,m,b){return m==="db"?u:Reflect.get(d,m,b)}})}var kn=(mt.prototype.version=function(o){if(isNaN(o)||o<.1)throw new Ce.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var u=this._versions,d=u.filter(function(m){return m._cfg.version===o})[0];return d||(d=new this.Version(o),u.push(d),u.sort(lh),d.stores({}),this._state.autoSchema=!1,d)},mt.prototype._whenReady=function(o){var u=this;return this.idbdb&&(this._state.openComplete||we.letThrough||this._vip)?o():new be(function(d,m){if(u._state.openComplete)return m(new Ce.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void m(new Ce.DatabaseClosed);u.open().catch(P)}u._state.dbReadyPromise.then(d,m)}).then(o)},mt.prototype.use=function(o){var u=o.stack,d=o.create,m=o.level,b=o.name;return b&&this.unuse({stack:u,name:b}),o=this._middlewares[u]||(this._middlewares[u]=[]),o.push({stack:u,create:d,level:m??10,name:b}),o.sort(function(x,O){return x.level-O.level}),this},mt.prototype.unuse=function(o){var u=o.stack,d=o.name,m=o.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(b){return m?b.create!==m:!!d&&b.name!==d})),this},mt.prototype.open=function(){var o=this;return dr(ht,function(){return hh(o)})},mt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,u=jr.indexOf(this);if(0<=u&&jr.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new be(function(d){o.dbReadyResolve=d}),o.openCanceller=new be(function(d,m){o.cancelOpen=m}))},mt.prototype.close=function(d){var u=(d===void 0?{disableAutoOpen:!0}:d).disableAutoOpen,d=this._state;u?(d.isBeingOpened&&d.cancelOpen(new Ce.DatabaseClosed),this._close(),d.autoOpen=!1,d.dbOpenError=new Ce.DatabaseClosed):(this._close(),d.autoOpen=this._options.autoOpen||d.isBeingOpened,d.openComplete=!1,d.dbOpenError=null)},mt.prototype.delete=function(o){var u=this;o===void 0&&(o={disableAutoOpen:!0});var d=0<arguments.length&&typeof arguments[0]!="object",m=this._state;return new be(function(b,x){function O(){u.close(o);var R=u._deps.indexedDB.deleteDatabase(u.name);R.onsuccess=at(function(){var j,$,W;j=u._deps,$=u.name,W=j.indexedDB,j=j.IDBKeyRange,Do(W)||$===Xi||No(W,j).delete($).catch(P),b()}),R.onerror=pn(x),R.onblocked=u._fireOnBlocked}if(d)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");m.isBeingOpened?m.dbReadyPromise.then(O):O()})},mt.prototype.backendDB=function(){return this.idbdb},mt.prototype.isOpen=function(){return this.idbdb!==null},mt.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},mt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},mt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(mt.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(u){return o._allTables[u]})},enumerable:!1,configurable:!0}),mt.prototype.transaction=function(){var o=(function(u,d,m){var b=arguments.length;if(b<2)throw new Ce.InvalidArgument("Too few arguments");for(var x=new Array(b-1);--b;)x[b-1]=arguments[b];return m=x.pop(),[u,X(x),m]}).apply(this,arguments);return this._transaction.apply(this,o)},mt.prototype._transaction=function(o,u,d){var m=this,b=we.trans;b&&b.db===this&&o.indexOf("!")===-1||(b=null);var x,O,R=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(O=u.map(function($){if($=$ instanceof m.Table?$.name:$,typeof $!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return $}),o=="r"||o===xo)x=xo;else{if(o!="rw"&&o!=_o)throw new Ce.InvalidArgument("Invalid transaction mode: "+o);x=_o}if(b){if(b.mode===xo&&x===_o){if(!R)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&O.forEach(function($){if(b&&b.storeNames.indexOf($)===-1){if(!R)throw new Ce.SubTransaction("Table "+$+" not included in parent transaction.");b=null}}),R&&b&&!b.active&&(b=null)}}catch($){return b?b._promise(null,function(W,M){M($)}):gt($)}var j=(function $(W,M,q,L,H){return be.resolve().then(function(){var U=we.transless||we,K=W._createTransaction(M,q,W._dbSchema,L);if(K.explicit=!0,U={trans:K,transless:U},L)K.idbtrans=L.idbtrans;else try{K.create(),K.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(ee){return ee.name===Hn.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return $(W,M,q,null,H)})):gt(ee)}var V,Y=qe(H);return Y&&Ir(),U=be.follow(function(){var ee;(V=H.call(K,K))&&(Y?(ee=qn.bind(null,null),V.then(ee,ee)):typeof V.next=="function"&&typeof V.throw=="function"&&(V=Bo(V)))},U),(V&&typeof V.then=="function"?be.resolve(V).then(function(ee){return K.active?ee:gt(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):U.then(function(){return V})).then(function(ee){return L&&K._resolve(),K._completion.then(function(){return ee})}).catch(function(ee){return K._reject(ee),gt(ee)})})}).bind(null,this,x,O,b,d);return b?b._promise(x,j,"lock"):we.trans?dr(we.transless,function(){return m._whenReady(j)}):this._whenReady(j)},mt.prototype.table=function(o){if(!p(this._allTables,o))throw new Ce.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},mt);function mt(o,u){var d=this;this._middlewares={},this.verno=0;var m=mt.dependencies;this._options=u=r({addons:mt.addons,autoOpen:!0,indexedDB:m.indexedDB,IDBKeyRange:m.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},m=u.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,x,O,R,j,$={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:P,dbReadyPromise:null,cancelOpen:P,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};$.dbReadyPromise=new be(function(M){$.dbReadyResolve=M}),$.openCanceller=new be(function(M,q){$.cancelOpen=q}),this._state=$,this.name=o,this.on=ni(this,"populate","blocked","versionchange","close",{ready:[fe,P]}),this.once=function(M,q){var L=function(){for(var H=[],U=0;U<arguments.length;U++)H[U]=arguments[U];d.on(M).unsubscribe(L),q.apply(d,H)};return d.on(M,L)},this.on.ready.subscribe=C(this.on.ready.subscribe,function(M){return function(q,L){mt.vip(function(){var H,U=d._state;U.openComplete?(U.dbOpenError||be.resolve().then(q),L&&M(q)):U.onReadyBeingFired?(U.onReadyBeingFired.push(q),L&&M(q)):(M(q),H=d,L||M(function K(){H.on.ready.unsubscribe(q),H.on.ready.unsubscribe(K)}))})}}),this.Collection=(b=this,ri(th.prototype,function(V,K){this.db=b;var L=ml,H=null;if(K)try{L=K()}catch(Y){H=Y}var U=V._ctx,K=U.table,V=K.hook.reading.fire;this._ctx={table:K,index:U.index,isPrimKey:!U.index||K.schema.primKey.keyPath&&U.index===K.schema.primKey.name,range:L,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:H,or:U.or,valueMapper:V!==z?V:null}})),this.Table=(x=this,ri(_l.prototype,function(M,q,L){this.db=x,this._tx=L,this.name=M,this.schema=q,this.hook=x._allTables[M]?x._allTables[M].hook:ni(null,{creating:[oe,P],reading:[Q,z],updating:[ve,P],deleting:[ae,P]})})),this.Transaction=(O=this,ri(ih.prototype,function(M,q,L,H,U){var K=this;M!=="readonly"&&q.forEach(function(V){V=(V=L[V])===null||V===void 0?void 0:V.yProps,V&&(q=q.concat(V.map(function(Y){return Y.updatesTable})))}),this.db=O,this.mode=M,this.storeNames=q,this.schema=L,this.chromeTransactionDurability=H,this.idbtrans=null,this.on=ni(this,"complete","error","abort"),this.parent=U||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new be(function(V,Y){K._resolve=V,K._reject=Y}),this._completion.then(function(){K.active=!1,K.on.complete.fire()},function(V){var Y=K.active;return K.active=!1,K.on.error.fire(V),K.parent?K.parent._reject(V):Y&&K.idbtrans&&K.idbtrans.abort(),gt(V)})})),this.Version=(R=this,ri(fh.prototype,function(M){this.db=R,this._cfg={version:M,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,ri(Ol.prototype,function(M,q,L){if(this.db=j,this._ctx={table:M,index:q===":id"?null:q,or:L},this._cmp=this._ascending=Ue,this._descending=function(H,U){return Ue(U,H)},this._max=function(H,U){return 0<Ue(H,U)?H:U},this._min=function(H,U){return Ue(H,U)<0?H:U},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(M){0<M.newVersion?console.warn("Another connection wants to upgrade database '".concat(d.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(d.name,"'. Closing db now to resume the delete request.")),d.close({disableAutoOpen:!1})}),this.on("blocked",function(M){!M.newVersion||M.newVersion<M.oldVersion?console.warn("Dexie.delete('".concat(d.name,"') was blocked")):console.warn("Upgrade '".concat(d.name,"' blocked by other connection holding version ").concat(M.oldVersion/10))}),this._maxKey=oi(u.IDBKeyRange),this._createTransaction=function(M,q,L,H){return new d.Transaction(M,q,L,d._options.chromeTransactionDurability,H)},this._fireOnBlocked=function(M){d.on("blocked").fire(M),jr.filter(function(q){return q.name===d.name&&q!==d&&!q._state.vcFired}).map(function(q){return q.on("versionchange").fire(M)})},this.use(gh),this.use(bh),this.use(mh),this.use(dh),this.use(ph);var W=new Proxy(this,{get:function(M,q,L){if(q==="_vip")return!0;if(q==="table")return function(U){return fs(d.table(U),W)};var H=Reflect.get(M,q,L);return H instanceof _l?fs(H,W):q==="tables"?H.map(function(U){return fs(U,W)}):q==="_createTransaction"?function(){return fs(H.apply(this,arguments),W)}:H}});this.vip=W,m.forEach(function(M){return M(d)})}var hs,Qt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",wh=(Wo.prototype.subscribe=function(o,u,d){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:u,complete:d})},Wo.prototype[Qt]=function(){return this},Wo);function Wo(o){this._subscribe=o}try{hs={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{hs={indexedDB:null,IDBKeyRange:null}}function Hl(o){var u,d=!1,m=new wh(function(b){var x=qe(o),O,R=!1,j={},$={},W={get closed(){return R},unsubscribe:function(){R||(R=!0,O&&O.abort(),M&&Yn.storagemutated.unsubscribe(L))}};b.start&&b.start(W);var M=!1,q=function(){return wo(H)},L=function(U){ls(j,U),jo($,j)&&q()},H=function(){var U,K,V;!R&&hs.indexedDB&&(j={},U={},O&&O.abort(),O=new AbortController,V=(function(Y){var ee=Dr();try{x&&Ir();var re=Kn(o,Y);return re=x?re.finally(qn):re}finally{ee&&Mr()}})(K={subscr:U,signal:O.signal,requery:q,querier:o,trans:null}),Promise.resolve(V).then(function(Y){d=!0,u=Y,R||K.signal.aborted||(j={},(function(ee){for(var re in ee)if(p(ee,re))return;return 1})($=U)||M||(Yn(si,L),M=!0),wo(function(){return!R&&b.next&&b.next(Y)}))},function(Y){d=!1,["DatabaseClosedError","AbortError"].includes(Y?.name)||R||wo(function(){R||b.error&&b.error(Y)})}))};return setTimeout(q,0),W});return m.hasValue=function(){return d},m.getValue=function(){return u},m}var vr=kn;function Ko(o){var u=Xn;try{Xn=!0,Yn.storagemutated.fire(o),Fo(o,!0)}finally{Xn=u}}g(vr,r(r({},ei),{delete:function(o){return new vr(o,{addons:[]}).delete()},exists:function(o){return new vr(o,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return u=vr.dependencies,d=u.indexedDB,u=u.IDBKeyRange,(Do(d)?Promise.resolve(d.databases()).then(function(m){return m.map(function(b){return b.name}).filter(function(b){return b!==Xi})}):No(d,u).toCollection().primaryKeys()).then(o)}catch{return gt(new Ce.MissingAPI)}var u,d},defineClass:function(){return function(o){h(this,o)}},ignoreTransaction:function(o){return we.trans?dr(we.transless,o):o()},vip:Mo,async:function(o){return function(){try{var u=Bo(o.apply(this,arguments));return u&&typeof u.then=="function"?u:be.resolve(u)}catch(d){return gt(d)}}},spawn:function(o,u,d){try{var m=Bo(o.apply(d,u||[]));return m&&typeof m.then=="function"?m:be.resolve(m)}catch(b){return gt(b)}},currentTransaction:{get:function(){return we.trans||null}},waitFor:function(o,u){return u=be.resolve(typeof o=="function"?vr.ignoreTransaction(o):o).timeout(u||6e4),we.trans?we.trans.waitFor(u):u},Promise:be,debug:{get:function(){return ie},set:function(o){Te(o)}},derive:w,extend:h,props:g,override:C,Events:ni,on:Yn,liveQuery:Hl,extendObservabilitySet:ls,getByKeyPath:k,setByKeyPath:D,delByKeyPath:function(o,u){typeof u=="string"?D(o,u,void 0):"length"in u&&[].map.call(u,function(d){D(o,d,void 0)})},shallowClone:T,deepClone:F,getObjectDiff:zo,cmp:Ue,asap:A,minKey:-1/0,addons:[],connections:jr,errnames:Hn,dependencies:hs,cache:mr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(o){return parseInt(o)}).reduce(function(o,u,d){return o+u/Math.pow(10,2*d)})})),vr.maxKey=oi(vr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yn(si,function(o){Xn||(o=new CustomEvent(So,{detail:o}),Xn=!0,dispatchEvent(o),Xn=!1)}),addEventListener(So,function(o){o=o.detail,Xn||Ko(o)}));var Br,Xn=!1,Ul=function(){};return typeof BroadcastChannel<"u"&&((Ul=function(){(Br=new BroadcastChannel(So)).onmessage=function(o){return o.data&&Ko(o.data)}})(),typeof Br.unref=="function"&&Br.unref(),Yn(si,function(o){Xn||Br.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!kn.disableBfCache&&o.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),Br?.close();for(var u=0,d=jr;u<d.length;u++)d[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!kn.disableBfCache&&o.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),Ul(),Ko({all:new kt(-1/0,[[]])}))})),be.rejectionMapper=function(o,u){return!o||o instanceof Zt||o instanceof TypeError||o instanceof SyntaxError||!o.name||!Un[o.name]?o:(u=new Un[o.name](u||o.message,o),"stack"in o&&y(u,"stack",{get:function(){return this.inner.stack}}),u)},Te(ie),r(kn,Object.freeze({__proto__:null,Dexie:kn,liveQuery:Hl,Entity:vl,cmp:Ue,PropModification:ti,replacePrefix:function(o,u){return new ti({replacePrefix:[o,u]})},add:function(o){return new ti({add:o})},remove:function(o){return new ti({remove:o})},default:kn,RangeSet:kt,mergeRanges:ui,rangesOverlap:Nl}),{default:kn}),kn})})(Ss)),Ss.exports}var sg=ig();const Da=ng(sg),Nu=Symbol.for("Dexie"),$s=globalThis[Nu]||(globalThis[Nu]=Da);if(Da.semVer!==$s.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Da.semVer} and ${$s.semVer}`);const{liveQuery:Yy,mergeRanges:Xy,rangesOverlap:Jy,RangeSet:Zy,cmp:Qy,Entity:eb,PropModification:tb,replacePrefix:nb,add:rb,remove:ib,DexieYProvider:sb}=$s;class og extends $s{bookmarks;settings;wallpapers;webdav;constructor(){super("new-tab-db"),this.version(1).stores({bookmarks:"id",settings:"id",wallpapers:"id",webdav:"id"})}async getBookmarks(){const e=await this.bookmarks.get("data");return{bookmarks:e?.bookmarks||{},rootOrder:e?.rootOrder||[]}}async saveBookmarks(e,t){await this.bookmarks.put({id:"data",bookmarks:e,rootOrder:t,updatedAt:Date.now()})}async getSettings(){try{return(await this.settings.get("data"))?.settings??null}catch(e){return console.error("[Database] getSettings error:",e),null}}async saveSettings(e){try{await this.settings.put({id:"data",settings:e,updatedAt:Date.now()}),console.log("[Database] saveSettings success")}catch(t){throw console.error("[Database] saveSettings error:",t),t}}async getWallpaper(e){const t=await this.wallpapers.get(e);return t?{wallpaper:t.wallpaper,blobUrl:URL.createObjectURL(t.blob),timestamp:t.timestamp}:null}async saveWallpaper(e,t,r){await this.wallpapers.put({id:e,wallpaper:t,blob:r,timestamp:Date.now()})}async clearWallpaperCache(){await this.wallpapers.clear()}async getWallpaperCacheSize(){return(await this.wallpapers.toArray()).reduce((t,r)=>t+r.blob.size,0)}async getWebDAVConfig(){const e=await this.webdav.get("config");return e?{url:e.url,username:e.username,encryptedPassword:e.encryptedPassword}:null}async saveWebDAVConfig(e,t,r){await this.webdav.put({id:"config",url:e,username:t,encryptedPassword:r,updatedAt:Date.now()})}async clearWebDAVConfig(){await this.webdav.delete("config")}async getStorageUsage(){try{if(navigator.storage?.estimate){const f=await navigator.storage.estimate(),c=f.usage||0,p=f.quota||0;return{used:c,quota:p,percentage:p>0?c/p*100:0}}const[e,t,r]=await Promise.all([this.bookmarks.toArray(),this.settings.toArray(),this.wallpapers.toArray()]),i=JSON.stringify(e).length,s=JSON.stringify(t).length,a=r.reduce((f,c)=>f+c.blob.size,0),l=i+s+a,h=100*1024*1024;return{used:l,quota:h,percentage:l/h*100}}catch{return{used:0,quota:0,percentage:0}}}async exportData(){const[e,t]=await Promise.all([this.getBookmarks(),this.getSettings()]);return JSON.stringify({bookmarks:e,settings:t,exportedAt:new Date().toISOString(),version:"1.0.0"},null,2)}async importData(e){try{const t=JSON.parse(e);return t.bookmarks&&await this.saveBookmarks(t.bookmarks.bookmarks||t.bookmarks,t.bookmarks.rootOrder||[]),t.settings&&await this.saveSettings(t.settings),!0}catch(t){return console.error("[Database] Import failed:",t),!1}}async clearAll(){await Promise.all([this.bookmarks.clear(),this.settings.clear(),this.wallpapers.clear(),this.webdav.clear()])}}const Rt=new og;function Du(n){n?.startsWith("blob:")&&URL.revokeObjectURL(n)}async function bs(n){try{const e=await fetch(n);return e.ok?await e.blob():null}catch(e){return console.error("[Database] Failed to fetch image:",e),null}}function Mu(){return`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,9)}`}function Iu(n){switch(n){case"2x2":return{w:2,h:2};case"2x1":return{w:2,h:1};default:return{w:1,h:2}}}const zn=fo("bookmarks",()=>{const n=De({}),e=De([]),t=De(!1),r=Ge(()=>e.value.map(S=>n.value[S]).filter(Boolean));function i(S){const A=n.value[S];return!A||!ot(A)?[]:A.children.map(k=>n.value[k]).filter(Boolean)}async function s(){t.value=!0;try{const S=await Rt.getBookmarks(),A=S.bookmarks||{};let k=Array.isArray(S.rootOrder)?[...S.rootOrder]:[];const T=Object.keys(A).filter(I=>{const X=A[I];return X&&X.parentId===null});T.length>0&&k.length===0&&(k=T),k=k.filter(I=>I in A);for(const I of T)k.includes(I)||k.push(I);n.value={...A},e.value=[...k],S.rootOrder?.length!==k.length&&await a()}finally{t.value=!1}}async function a(){const S=JSON.parse(JSON.stringify(He(n.value))),A=JSON.parse(JSON.stringify(He(e.value)));await Rt.saveBookmarks(S,A)}async function l(S){const A=Mu(),k=Date.now(),D=Array.isArray(e.value)?[...e.value]:[],T={id:A,type:"site",order:D.length,createdAt:k,updatedAt:k,...S};if(n.value={...n.value,[A]:T},S.parentId){const I=n.value[S.parentId];I&&ot(I)&&(I.children=[...I.children,A])}else D.push(A),e.value=D;return await a(),A}async function h(S){const A=Mu(),k=Date.now(),D=Array.isArray(e.value)?[...e.value]:[],T={id:A,type:"folder",order:D.length,children:[],createdAt:k,updatedAt:k,...S};if(n.value={...n.value,[A]:T},S.parentId){const I=n.value[S.parentId];I&&ot(I)&&(I.children=[...I.children,A])}else D.push(A),e.value=D;return await a(),A}async function f(S,A){const k=n.value[S];k&&(Object.assign(k,A,{updatedAt:Date.now()}),await a())}async function c(S){const A=n.value[S];if(A){if(ot(A))for(const k of A.children){const D=n.value[k];D&&(D.parentId=null,Array.isArray(e.value)||(e.value=[]),e.value=[...e.value,k])}if(A.parentId){const k=n.value[A.parentId];if(k&&ot(k)){const D=k.children.indexOf(S);D>-1&&k.children.splice(D,1)}}else{const k=e.value.indexOf(S);k>-1&&e.value.splice(k,1)}delete n.value[S],await a()}}async function p(S,A,k){const D=n.value[S];if(D){if(D.parentId){const T=n.value[D.parentId];if(T&&ot(T)){const I=T.children.indexOf(S);I>-1&&T.children.splice(I,1)}}else{const T=e.value.indexOf(S);T>-1&&e.value.splice(T,1)}if(D.parentId=A,A){const T=n.value[A];T&&ot(T)&&T.children.splice(k,0,S)}else e.value.splice(k,0,S);D.updatedAt=Date.now(),await a()}}async function g(S,A){const k=n.value[S];if(!k||!ot(k))return;const D=Iu(A),T=k.gridPosition?{...k.gridPosition,w:D.w,h:D.h}:{x:0,y:0,w:D.w,h:D.h},I={...k,size:A,gridPosition:T,updatedAt:Date.now()};n.value={...n.value,[S]:I},await a()}async function v(S,A=null){if(A){const k=n.value[A];k&&ot(k)&&(k.children=S)}else e.value=[...S];await a()}async function y(S,A){const k=n.value[S];k&&(k.gridPosition=A,k.updatedAt=Date.now(),await a())}async function w(S){for(const{id:A,position:k}of S){const D=n.value[A];D&&(D.gridPosition=k,D.updatedAt=Date.now())}await a()}function E(S=8){const A=r.value;let k=!1;for(const I of A)if(!I.gridPosition){k=!0;break}if(!k)return!1;let D=0,T=0;for(const I of A){if(I.gridPosition)continue;let X=1,te=1;if(ot(I)){const J=Iu(I.size);X=J.w,te=J.h}D+X>S&&(D=0,T++),I.gridPosition={x:D,y:T,w:X,h:te},D+=X}return!0}async function N(S){for(const A of S){const k=n.value[A];if(k){if(ot(k))for(const D of k.children){const T=n.value[D];T&&(T.parentId=null,Array.isArray(e.value)||(e.value=[]),e.value=[...e.value,D])}if(k.parentId){const D=n.value[k.parentId];if(D&&ot(D)){const T=D.children.indexOf(A);T>-1&&D.children.splice(T,1)}}else{const D=e.value.indexOf(A);D>-1&&e.value.splice(D,1)}delete n.value[A]}}await a()}async function _(S,A){const k=A?n.value[A]:null;if(!(A&&(!k||!ot(k)))){for(const D of S){const T=n.value[D];if(T&&!ot(T)&&D!==A){if(T.parentId){const I=n.value[T.parentId];if(I&&ot(I)){const X=I.children.indexOf(D);X>-1&&I.children.splice(X,1)}}else{const I=e.value.indexOf(D);I>-1&&e.value.splice(I,1)}T.parentId=A,A&&k&&ot(k)?k.children=[...k.children,D]:e.value=[...e.value,D],T.updatedAt=Date.now()}}await a()}}const C=Ge(()=>Object.values(n.value).filter(ot));return{bookmarks:n,rootOrder:e,loading:t,rootBookmarks:r,allFolders:C,getFolderChildren:i,loadBookmarks:s,addSite:l,addFolder:h,updateBookmark:f,deleteBookmark:c,moveBookmark:p,updateFolderSize:g,reorder:v,updateGridPosition:y,batchUpdateGridPositions:w,migrateToGridLayout:E,batchDeleteBookmarks:N,batchMoveToFolder:_}}),ju={searchEngine:"bing",showSearchBar:!0,webdav:{enabled:!1,url:"",username:"",password:""},wallpaper:{enabled:!0,interval:30,category:"nature"}};function ag(n,e){return{searchEngine:e.searchEngine??n.searchEngine,showSearchBar:e.showSearchBar??n.showSearchBar,webdav:{...n.webdav,...e.webdav},wallpaper:{...n.wallpaper,...e.wallpaper}}}const Sr=fo("settings",()=>{const n=De(structuredClone(ju)),e=De(!1);async function t(){e.value=!0;try{const h=await Rt.getSettings();h?n.value=ag(ju,h):(console.log("[Settings] No saved settings, initializing with defaults"),await r())}catch(h){console.error("[Settings] Failed to load settings:",h)}finally{e.value=!1}}async function r(){try{const h=JSON.parse(JSON.stringify(He(n.value)));await Rt.saveSettings(h)}catch(h){console.error("[Settings] Failed to save settings:",h)}}async function i(h){n.value.searchEngine=h,await r()}async function s(){n.value.showSearchBar=!n.value.showSearchBar,await r()}async function a(h){Object.assign(n.value.wallpaper,h),await r()}async function l(h){Object.assign(n.value.webdav,h),await r()}return{settings:n,loading:e,loadSettings:t,saveSettings:r,setSearchEngine:i,toggleSearchBar:s,updateWallpaperSettings:a,updateWebDAVSettings:l}});class lg{baseUrl="https://picsum.photos";photoCache=[];async getRandomPhoto(e="nature"){try{if(this.photoCache.length===0&&await this.fetchPhotoList(),this.photoCache.length===0)return this.getFallbackPhoto();const t=Math.floor(Math.random()*this.photoCache.length),r=this.photoCache[t],i=Date.now();return{id:`picsum-${r.id}-${i}`,url:`${this.baseUrl}/id/${r.id}/1920/1080`,thumbUrl:`${this.baseUrl}/id/${r.id}/400/300`,author:r.author,authorUrl:r.url,downloadUrl:`${this.baseUrl}/id/${r.id}/1920/1080`}}catch{return this.getFallbackPhoto()}}async fetchPhotoList(){try{const e=Math.floor(Math.random()*10)+1,t=await fetch(`${this.baseUrl}/v2/list?page=${e}&limit=100`);if(!t.ok)return;const r=await t.json();this.photoCache=r}catch{}}getFallbackPhoto(){const e=[10,20,28,29,42,47,48,58,65,84,96,100,119,122,129],t=e[Math.floor(Math.random()*e.length)],r=Date.now();return{id:`picsum-fallback-${t}-${r}`,url:`${this.baseUrl}/id/${t}/1920/1080`,thumbUrl:`${this.baseUrl}/id/${t}/400/300`,author:"Picsum Photos",authorUrl:"https://picsum.photos",downloadUrl:`${this.baseUrl}/id/${t}/1920/1080`}}getCategories(){return[{value:"random",label:""}]}}const la=new lg,Of=fo("wallpaper",()=>{const n=De(null),e=De(null),t=De(!1),r=De(!1),i=De(0),s=new Set;function a(y){y&&y.startsWith("blob:")&&(Du(y),s.delete(y))}function l(y){y.startsWith("blob:")&&s.add(y)}async function h(){const w=Sr().settings.wallpaper.interval*60*1e3,E=await Rt.getWallpaper("current");if(E){e.value=E.wallpaper,i.value=E.timestamp,a(n.value),n.value=E.blobUrl,l(E.blobUrl),t.value=!0,Date.now()-E.timestamp>=w?f():p();return}await c()}async function f(){const y=Sr();try{const w=await la.getRandomPhoto(y.settings.wallpaper.category);if(w){const E=await bs(w.url);E&&await Rt.saveWallpaper("next",w,E)}}catch{}}async function c(){const y=Sr();r.value=!0;try{const w=await la.getRandomPhoto(y.settings.wallpaper.category);if(w){const E=await bs(w.url);if(E){a(n.value);const N=URL.createObjectURL(E);l(N),e.value=w,n.value=N,i.value=Date.now(),t.value=!0,await Rt.saveWallpaper("current",w,E),p()}else e.value=w,n.value=w.url,t.value=!0}}catch(w){console.error("Failed to fetch wallpaper:",w),t.value=!0}finally{r.value=!1}}async function p(){const y=Sr();try{const w=await la.getRandomPhoto(y.settings.wallpaper.category);if(w){const E=await bs(w.url);E&&await Rt.saveWallpaper("next",w,E)}}catch{}}async function g(){const y=await Rt.getWallpaper("next");if(y){a(n.value),e.value=y.wallpaper,n.value=y.blobUrl,l(y.blobUrl),i.value=Date.now();const w=await bs(y.wallpaper.url);w&&await Rt.saveWallpaper("current",y.wallpaper,w),p()}else await c()}function v(){for(const y of s)Du(y);s.clear()}return Zr(v),{currentWallpaper:e,currentWallpaperUrl:n,isReady:t,loading:r,lastFetchTime:i,loadWallpaper:h,fetchNewWallpaper:c,switchToNext:g,cleanup:v}}),fr=fo("ui",()=>{const n=De({visible:!1,x:0,y:0,target:"blank",targetItem:null}),e=De(null),t=De(null),r=De(null),i=De(!1),s=De(null),a=De(!1),l=De(new Set),h=Ge(()=>n.value.visible);function f(F,ne,Z,ue=null){n.value={visible:!0,x:F,y:ne,target:Z,targetItem:ue}}function c(){n.value.visible=!1,n.value.targetItem=null}function p(F,ne=null){e.value=F,t.value=ne}function g(){e.value=null,t.value=null,s.value=null}function v(F){r.value=F}function y(){r.value=null}function w(){i.value=!i.value}function E(){i.value=!0}function N(){i.value=!1}function _(F){s.value=F}function C(){a.value=!0,l.value=new Set}function S(){a.value=!1,l.value=new Set}function A(){a.value?S():C()}function k(F){const ne=new Set(l.value);ne.has(F)?ne.delete(F):ne.add(F),l.value=ne}function D(F){const ne=new Set(l.value);ne.add(F),l.value=ne}function T(F){const ne=new Set(l.value);ne.delete(F),l.value=ne}function I(F){l.value=new Set(F)}function X(){l.value=new Set}function te(F){return l.value.has(F)}const J=Ge(()=>l.value.size);return{contextMenu:n,modalType:e,modalData:t,openFolderId:r,settingsPanelOpen:i,editingItem:s,isContextMenuVisible:h,isEditMode:a,selectedIds:l,selectedCount:J,openContextMenu:f,closeContextMenu:c,openModal:p,closeModal:g,openFolder:v,closeFolder:y,toggleSettingsPanel:w,openSettingsPanel:E,closeSettingsPanel:N,setEditingItem:_,enterEditMode:C,exitEditMode:S,toggleEditMode:A,toggleSelectItem:k,selectItem:D,unselectItem:T,selectAll:I,clearSelection:X,isSelected:te}}),ug={class:"search-bar w-full max-w-xl"},cg={class:"glass rounded-2xl px-4 py-3 flex items-center gap-3 transition-all duration-300 focus-within:ring-2 focus-within:ring-white/30"},fg=["title"],hg=fn({__name:"SearchBar",setup(n){const e=Sr(),t=De(""),r=De(),i=Ge(()=>e.settings.searchEngine==="google"?"https://www.google.com/search?q=":"https://www.bing.com/search?q="),s=Ge(()=>e.settings.searchEngine==="google"?"i-logos-google-icon":"i-logos-bing");function a(){const c=t.value.trim();c&&(window.location.href=i.value+encodeURIComponent(c))}function l(){t.value="",r.value?.focus()}function h(){e.setSearchEngine(e.settings.searchEngine==="google"?"bing":"google")}function f(c){c.key==="/"&&document.activeElement!==r.value&&(c.preventDefault(),r.value?.focus()),(c.ctrlKey||c.metaKey)&&c.key==="k"&&(c.preventDefault(),r.value?.focus()),c.key==="Escape"&&document.activeElement===r.value&&(t.value="",r.value?.blur())}return zi(()=>{document.addEventListener("keydown",f),setTimeout(()=>r.value?.focus(),100)}),Zr(()=>{document.removeEventListener("keydown",f)}),(c,p)=>(Ee(),ke("div",ug,[B("div",cg,[B("button",{class:"flex-shrink-0 p-2 rounded-lg hover:bg-white/10 transition-colors",title:` ${Le(e).settings.searchEngine==="google"?"Bing":"Google"}`,onClick:h},[B("div",{class:Je([s.value,"w-5 h-5"])},null,2)],8,fg),yn(B("input",{ref_key:"inputRef",ref:r,"onUpdate:modelValue":p[0]||(p[0]=g=>t.value=g),type:"text",class:"flex-1 bg-transparent border-none outline-none text-white text-base placeholder-white/50",placeholder:"...",onKeyup:Wp(a,["enter"])},null,544),[[Ar,t.value]]),t.value?(Ee(),ke("button",{key:0,class:"flex-shrink-0 p-2 rounded-lg hover:bg-white/10 transition-colors",title:"",onClick:l},[...p[1]||(p[1]=[B("div",{class:"i-lucide-x w-4 h-4 text-white/70"},null,-1)])])):ut("",!0),B("button",{class:"flex-shrink-0 p-2 rounded-lg hover:bg-white/10 transition-colors",title:"",onClick:a},[...p[2]||(p[2]=[B("div",{class:"i-lucide-search w-5 h-5 text-white/70"},null,-1)])])]),p[3]||(p[3]=B("div",{class:"mt-2 text-center text-white/40 text-xs"},[rn("  "),B("kbd",{class:"px-1.5 py-0.5 rounded bg-white/10 font-mono"},"/"),rn("  "),B("kbd",{class:"px-1.5 py-0.5 rounded bg-white/10 font-mono"},"Ctrl+K"),rn("  ")],-1))]))}});function dg(n,e,t,r,i){const s=(...a)=>(console.warn("gridstack.js: Function `"+t+"` is deprecated in "+i+" and has been replaced with `"+r+"`. It will be **removed** in a future release"),e.apply(n,a));return s.prototype=e.prototype,s}class G{static getElements(e,t=document){if(typeof e=="string"){const r="getElementById"in t?t:void 0;if(r&&!isNaN(+e[0])){const s=r.getElementById(e);return s?[s]:[]}let i=t.querySelectorAll(e);return!i.length&&e[0]!=="."&&e[0]!=="#"&&(i=t.querySelectorAll("."+e),i.length||(i=t.querySelectorAll("#"+e))),Array.from(i)}return[e]}static getElement(e,t=document){if(typeof e=="string"){const r="getElementById"in t?t:void 0;if(!e.length)return null;if(r&&e[0]==="#")return r.getElementById(e.substring(1));if(e[0]==="#"||e[0]==="."||e[0]==="[")return t.querySelector(e);if(r&&!isNaN(+e[0]))return r.getElementById(e);let i=t.querySelector(e);return r&&!i&&(i=r.getElementById(e)),i||(i=t.querySelector("."+e)),i}return e}static lazyLoad(e){return e.lazyLoad||e.grid?.opts?.lazyLoad&&e.lazyLoad!==!1}static createDiv(e,t){const r=document.createElement("div");return e.forEach(i=>{i&&r.classList.add(i)}),t?.appendChild(r),r}static shouldSizeToContent(e,t=!1){return e?.grid&&(t?e.sizeToContent===!0||e.grid.opts.sizeToContent===!0&&e.sizeToContent===void 0:!!e.sizeToContent||e.grid.opts.sizeToContent&&e.sizeToContent!==!1)}static isIntercepted(e,t){return!(e.y>=t.y+t.h||e.y+e.h<=t.y||e.x+e.w<=t.x||e.x>=t.x+t.w)}static isTouching(e,t){return G.isIntercepted(e,{x:t.x-.5,y:t.y-.5,w:t.w+1,h:t.h+1})}static areaIntercept(e,t){const r=e.x>t.x?e.x:t.x,i=e.x+e.w<t.x+t.w?e.x+e.w:t.x+t.w;if(i<=r)return 0;const s=e.y>t.y?e.y:t.y,a=e.y+e.h<t.y+t.h?e.y+e.h:t.y+t.h;return a<=s?0:(i-r)*(a-s)}static area(e){return e.w*e.h}static sort(e,t=1){return e.sort((i,s)=>{const a=t*((i.y??1e4)-(s.y??1e4));return a===0?t*((i.x??1e4)-(s.x??1e4)):a})}static find(e,t){return t?e.find(r=>r.id===t):void 0}static createStylesheet(e,t,r){const i=document.createElement("style"),s=r?.nonce;return s&&(i.nonce=s),i.setAttribute("type","text/css"),i.setAttribute("gs-style-id",e),i.styleSheet?i.styleSheet.cssText="":i.appendChild(document.createTextNode("")),t?t.insertBefore(i,t.firstChild):(t=document.getElementsByTagName("head")[0],t.appendChild(i)),i}static removeStylesheet(e,t){const i=(t||document).querySelector("STYLE[gs-style-id="+e+"]");i&&i.parentNode&&i.remove()}static addCSSRule(e,t,r){e.textContent+=`${t} { ${r} } `}static toBool(e){return typeof e=="boolean"?e:typeof e=="string"?(e=e.toLowerCase(),!(e===""||e==="no"||e==="false"||e==="0")):!!e}static toNumber(e){return e===null||e.length===0?void 0:Number(e)}static parseHeight(e){let t,r="px";if(typeof e=="string")if(e==="auto"||e==="")t=0;else{const i=e.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!i)throw new Error(`Invalid height val = ${e}`);r=i[2]||"px",t=parseFloat(i[1])}else t=e;return{h:t,unit:r}}static defaults(e,...t){return t.forEach(r=>{for(const i in r){if(!r.hasOwnProperty(i))return;e[i]===null||e[i]===void 0?e[i]=r[i]:typeof r[i]=="object"&&typeof e[i]=="object"&&this.defaults(e[i],r[i])}}),e}static same(e,t){if(typeof e!="object")return e==t;if(typeof e!=typeof t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static copyPos(e,t,r=!1){return t.x!==void 0&&(e.x=t.x),t.y!==void 0&&(e.y=t.y),t.w!==void 0&&(e.w=t.w),t.h!==void 0&&(e.h=t.h),r&&(t.minW&&(e.minW=t.minW),t.minH&&(e.minH=t.minH),t.maxW&&(e.maxW=t.maxW),t.maxH&&(e.maxH=t.maxH)),e}static samePos(e,t){return e&&t&&e.x===t.x&&e.y===t.y&&(e.w||1)===(t.w||1)&&(e.h||1)===(t.h||1)}static sanitizeMinMax(e){e.minW||delete e.minW,e.minH||delete e.minH,e.maxW||delete e.maxW,e.maxH||delete e.maxH}static removeInternalAndSame(e,t){if(!(typeof e!="object"||typeof t!="object"))for(let r in e){const i=e[r],s=t[r];r[0]==="_"||i===s?delete e[r]:i&&typeof i=="object"&&s!==void 0&&(G.removeInternalAndSame(i,s),Object.keys(i).length||delete e[r])}}static removeInternalForSave(e,t=!0){for(let r in e)(r[0]==="_"||e[r]===null||e[r]===void 0)&&delete e[r];delete e.grid,t&&delete e.el,e.autoPosition||delete e.autoPosition,e.noResize||delete e.noResize,e.noMove||delete e.noMove,e.locked||delete e.locked,(e.w===1||e.w===e.minW)&&delete e.w,(e.h===1||e.h===e.minH)&&delete e.h}static throttle(e,t){let r=!1;return(...i)=>{r||(r=!0,setTimeout(()=>{e(...i),r=!1},t))}}static removePositioningStyles(e){const t=e.style;t.position&&t.removeProperty("position"),t.left&&t.removeProperty("left"),t.top&&t.removeProperty("top"),t.width&&t.removeProperty("width"),t.height&&t.removeProperty("height")}static getScrollElement(e){if(!e)return document.scrollingElement||document.documentElement;const t=getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowY)?e:this.getScrollElement(e.parentElement)}static updateScrollPosition(e,t,r){const i=e.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;if(i.top<0||i.bottom>s){const a=i.bottom-s,l=i.top,h=this.getScrollElement(e);if(h!==null){const f=h.scrollTop;i.top<0&&r<0?e.offsetHeight>s?h.scrollTop+=r:h.scrollTop+=Math.abs(l)>Math.abs(r)?r:l:r>0&&(e.offsetHeight>s?h.scrollTop+=r:h.scrollTop+=a>r?r:a),t.top+=h.scrollTop-f}}}static updateScrollResize(e,t,r){const i=this.getScrollElement(t),s=i.clientHeight,a=i===this.getScrollElement()?0:i.getBoundingClientRect().top,l=e.clientY-a,h=l<r,f=l>s-r;h?i.scrollBy({behavior:"smooth",top:l-r}):f&&i.scrollBy({behavior:"smooth",top:r-(s-l)})}static clone(e){return e==null||typeof e!="object"?e:e instanceof Array?[...e]:{...e}}static cloneDeep(e){const t=["parentGrid","el","grid","subGrid","engine"],r=G.clone(e);for(const i in r)r.hasOwnProperty(i)&&typeof r[i]=="object"&&i.substring(0,2)!=="__"&&!t.find(s=>s===i)&&(r[i]=G.cloneDeep(e[i]));return r}static cloneNode(e){const t=e.cloneNode(!0);return t.removeAttribute("id"),t}static appendTo(e,t){let r;typeof t=="string"?r=G.getElement(t):r=t,r&&r.appendChild(e)}static addElStyles(e,t){if(t instanceof Object)for(const r in t)t.hasOwnProperty(r)&&(Array.isArray(t[r])?t[r].forEach(i=>{e.style[r]=i}):e.style[r]=t[r])}static initEvent(e,t){const r={type:t.type},i={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:t.target?t.target:e.target};return["altKey","ctrlKey","metaKey","shiftKey"].forEach(s=>r[s]=e[s]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(s=>r[s]=e[s]),{...r,...i}}static simulateMouseEvent(e,t,r){const i=e,s=new MouseEvent(t,{bubbles:!0,composed:!0,cancelable:!0,view:window,detail:1,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:i.ctrlKey??!1,altKey:i.altKey??!1,shiftKey:i.shiftKey??!1,metaKey:i.metaKey??!1,button:0,relatedTarget:e.target});(r||e.target).dispatchEvent(s)}static getValuesFromTransformedElement(e){const t=document.createElement("div");G.addElStyles(t,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),e.appendChild(t);const r=t.getBoundingClientRect();return e.removeChild(t),t.remove(),{xScale:1/r.width,yScale:1/r.height,xOffset:r.left,yOffset:r.top}}static swap(e,t,r){if(!e)return;const i=e[t];e[t]=e[r],e[r]=i}static canBeRotated(e){return!(!e||e.w===e.h||e.locked||e.noResize||e.grid?.opts.disableResize||e.minW&&e.minW===e.maxW||e.minH&&e.minH===e.maxH)}}class wn{constructor(e={}){this.addedNodes=[],this.removedNodes=[],this.defaultColumn=12,this.column=e.column||this.defaultColumn,this.column>this.defaultColumn&&(this.defaultColumn=this.column),this.maxRow=e.maxRow,this._float=e.float,this.nodes=e.nodes||[],this.onChange=e.onChange}batchUpdate(e=!0,t=!0){return!!this.batchMode===e?this:(this.batchMode=e,e?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,t&&this._packNodes(),this._notify()),this)}_useEntireRowArea(e,t){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!e._moving||e._skipDown||t.y<=e.y)}_fixCollisions(e,t=e,r,i={}){if(this.sortNodes(-1),r=r||this.collide(e,t),!r)return!1;if(e._moving&&!i.nested&&!this.float&&this.swap(e,r))return!0;let s=t;!this._loading&&this._useEntireRowArea(e,t)&&(s={x:0,w:this.column,y:t.y,h:t.h},r=this.collide(e,s,i.skip));let a=!1;const l={nested:!0,pack:!1};let h=0;for(;r=r||this.collide(e,s,i.skip);){if(h++>this.nodes.length*2)throw new Error("Infinite collide check");let f;if(r.locked||this._loading||e._moving&&!e._skipDown&&t.y>e.y&&!this.float&&(!this.collide(r,{...r,y:e.y},e)||!this.collide(r,{...r,y:t.y-r.h},e))){e._skipDown=e._skipDown||t.y>e.y;const c={...t,y:r.y+r.h,...l};f=this._loading&&G.samePos(e,c)?!0:this.moveNode(e,c),(r.locked||this._loading)&&f?G.copyPos(t,e):!r.locked&&f&&i.pack&&(this._packNodes(),t.y=r.y+r.h,G.copyPos(e,t)),a=a||f}else f=this.moveNode(r,{...r,y:t.y+t.h,skip:e,...l});if(!f)return a;r=void 0}return a}collide(e,t=e,r){const i=e._id,s=r?._id;return this.nodes.find(a=>a._id!==i&&a._id!==s&&G.isIntercepted(a,t))}collideAll(e,t=e,r){const i=e._id,s=r?._id;return this.nodes.filter(a=>a._id!==i&&a._id!==s&&G.isIntercepted(a,t))}directionCollideCoverage(e,t,r){if(!t.rect||!e._rect)return;const i=e._rect,s={...t.rect};s.y>i.y?(s.h+=s.y-i.y,s.y=i.y):s.h+=i.y-s.y,s.x>i.x?(s.w+=s.x-i.x,s.x=i.x):s.w+=i.x-s.x;let a,l=.5;for(let h of r){if(h.locked||!h._rect)break;const f=h._rect;let c=Number.MAX_VALUE,p=Number.MAX_VALUE;i.y<f.y?c=(s.y+s.h-f.y)/f.h:i.y+i.h>f.y+f.h&&(c=(f.y+f.h-s.y)/f.h),i.x<f.x?p=(s.x+s.w-f.x)/f.w:i.x+i.w>f.x+f.w&&(p=(f.x+f.w-s.x)/f.w);const g=Math.min(p,c);g>l&&(l=g,a=h)}return t.collide=a,a}cacheRects(e,t,r,i,s,a){return this.nodes.forEach(l=>l._rect={y:l.y*t+r,x:l.x*e+a,w:l.w*e-a-i,h:l.h*t-r-s}),this}swap(e,t){if(!t||t.locked||!e||e.locked)return!1;function r(){const s=t.x,a=t.y;return t.x=e.x,t.y=e.y,e.h!=t.h?(e.x=s,e.y=t.y+t.h):e.w!=t.w?(e.x=t.x+t.w,e.y=a):(e.x=s,e.y=a),e._dirty=t._dirty=!0,!0}let i;if(e.w===t.w&&e.h===t.h&&(e.x===t.x||e.y===t.y)&&(i=G.isTouching(e,t)))return r();if(i!==!1){if(e.w===t.w&&e.x===t.x&&(i||(i=G.isTouching(e,t)))){if(t.y<e.y){const s=e;e=t,t=s}return r()}if(i!==!1){if(e.h===t.h&&e.y===t.y&&(i||(i=G.isTouching(e,t)))){if(t.x<e.x){const s=e;e=t,t=s}return r()}return!1}}}isAreaEmpty(e,t,r,i){const s={x:e||0,y:t||0,w:r||1,h:i||1};return!this.collide(s)}compact(e="compact",t=!0){if(this.nodes.length===0)return this;t&&this.sortNodes();const r=this.batchMode;r||this.batchUpdate();const i=this._inColumnResize;i||(this._inColumnResize=!0);const s=this.nodes;return this.nodes=[],s.forEach((a,l,h)=>{let f;a.locked||(a.autoPosition=!0,e==="list"&&l&&(f=h[l-1])),this.addNode(a,!1,f)}),i||delete this._inColumnResize,r||this.batchUpdate(!1),this}set float(e){this._float!==e&&(this._float=e||!1,e||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(e=1){return this.nodes=G.sort(this.nodes,e),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(e=>{if(e._updating||e._orig===void 0||e.y===e._orig.y)return;let t=e.y;for(;t>e._orig.y;)--t,this.collide(e,{x:e.x,y:t,w:e.w,h:e.h})||(e._dirty=!0,e.y=t)}):this.nodes.forEach((e,t)=>{if(!e.locked)for(;e.y>0;){const r=t===0?0:e.y-1;if(!(t===0||!this.collide(e,{x:e.x,y:r,w:e.w,h:e.h})))break;e._dirty=e.y!==r,e.y=r}}),this)}prepareNode(e,t){e._id=e._id??wn._idSeq++;const r=e.id;if(r){let s=1;for(;this.nodes.find(a=>a.id===e.id&&a!==e);)e.id=r+"_"+s++}(e.x===void 0||e.y===void 0||e.x===null||e.y===null)&&(e.autoPosition=!0);const i={x:0,y:0,w:1,h:1};return G.defaults(e,i),e.autoPosition||delete e.autoPosition,e.noResize||delete e.noResize,e.noMove||delete e.noMove,G.sanitizeMinMax(e),typeof e.x=="string"&&(e.x=Number(e.x)),typeof e.y=="string"&&(e.y=Number(e.y)),typeof e.w=="string"&&(e.w=Number(e.w)),typeof e.h=="string"&&(e.h=Number(e.h)),isNaN(e.x)&&(e.x=i.x,e.autoPosition=!0),isNaN(e.y)&&(e.y=i.y,e.autoPosition=!0),isNaN(e.w)&&(e.w=i.w),isNaN(e.h)&&(e.h=i.h),this.nodeBoundFix(e,t),e}nodeBoundFix(e,t){const r=e._orig||G.copyPos({},e);if(e.maxW&&(e.w=Math.min(e.w||1,e.maxW)),e.maxH&&(e.h=Math.min(e.h||1,e.maxH)),e.minW&&(e.w=Math.max(e.w||1,e.minW)),e.minH&&(e.h=Math.max(e.h||1,e.minH)),(e.x||0)+(e.w||1)>this.column&&this.column<this.defaultColumn&&!this._inColumnResize&&!this.skipCacheUpdate&&e._id&&this.findCacheLayout(e,this.defaultColumn)===-1){const s={...e};s.autoPosition||s.x===void 0?(delete s.x,delete s.y):s.x=Math.min(this.defaultColumn-1,s.x),s.w=Math.min(this.defaultColumn,s.w||1),this.cacheOneLayout(s,this.defaultColumn)}return e.w>this.column?e.w=this.column:e.w<1&&(e.w=1),this.maxRow&&e.h>this.maxRow?e.h=this.maxRow:e.h<1&&(e.h=1),e.x<0&&(e.x=0),e.y<0&&(e.y=0),e.x+e.w>this.column&&(t?e.w=this.column-e.x:e.x=this.column-e.w),this.maxRow&&e.y+e.h>this.maxRow&&(t?e.h=this.maxRow-e.y:e.y=this.maxRow-e.h),G.samePos(e,r)||(e._dirty=!0),this}getDirtyNodes(e){return e?this.nodes.filter(t=>t._dirty&&!G.samePos(t,t._orig)):this.nodes.filter(t=>t._dirty)}_notify(e){if(this.batchMode||!this.onChange)return this;const t=(e||[]).concat(this.getDirtyNodes());return this.onChange(t),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(e=>{delete e._dirty,delete e._lastTried}),this)}saveInitial(){return this.nodes.forEach(e=>{e._orig=G.copyPos({},e),delete e._dirty}),this._hasLocked=this.nodes.some(e=>e.locked),this}restoreInitial(){return this.nodes.forEach(e=>{!e._orig||G.samePos(e,e._orig)||(G.copyPos(e,e._orig),e._dirty=!0)}),this._notify(),this}findEmptyPosition(e,t=this.nodes,r=this.column,i){const s=i?i.y*r+(i.x+i.w):0;let a=!1;for(let l=s;!a;++l){const h=l%r,f=Math.floor(l/r);if(h+e.w>r)continue;const c={x:h,y:f,w:e.w,h:e.h};t.find(p=>G.isIntercepted(c,p))||((e.x!==h||e.y!==f)&&(e._dirty=!0),e.x=h,e.y=f,delete e.autoPosition,a=!0)}return a}addNode(e,t=!1,r){const i=this.nodes.find(a=>a._id===e._id);if(i)return i;this._inColumnResize?this.nodeBoundFix(e):this.prepareNode(e),delete e._temporaryRemoved,delete e._removeDOM;let s;return e.autoPosition&&this.findEmptyPosition(e,this.nodes,this.column,r)&&(delete e.autoPosition,s=!0),this.nodes.push(e),t&&this.addedNodes.push(e),s||this._fixCollisions(e),this.batchMode||this._packNodes()._notify(),e}removeNode(e,t=!0,r=!1){return this.nodes.find(i=>i._id===e._id)?(r&&this.removedNodes.push(e),t&&(e._removeDOM=!0),this.nodes=this.nodes.filter(i=>i._id!==e._id),e._isAboutToRemove||this._packNodes(),this._notify([e]),this):this}removeAll(e=!0,t=!0){if(delete this._layouts,!this.nodes.length)return this;e&&this.nodes.forEach(i=>i._removeDOM=!0);const r=this.nodes;return this.removedNodes=t?r:[],this.nodes=[],this._notify(r)}moveNodeCheck(e,t){if(!this.changedPosConstrain(e,t))return!1;if(t.pack=!0,!this.maxRow)return this.moveNode(e,t);let r;const i=new wn({column:this.column,float:this.float,nodes:this.nodes.map(a=>a._id===e._id?(r={...a},r):{...a})});if(!r)return!1;const s=i.moveNode(r,t)&&i.getRow()<=Math.max(this.getRow(),this.maxRow);if(!s&&!t.resizing&&t.collide){const a=t.collide.el.gridstackNode;if(this.swap(e,a))return this._notify(),!0}return s?(i.nodes.filter(a=>a._dirty).forEach(a=>{const l=this.nodes.find(h=>h._id===a._id);l&&(G.copyPos(l,a),l._dirty=!0)}),this._notify(),!0):!1}willItFit(e){if(delete e._willFitPos,!this.maxRow)return!0;const t=new wn({column:this.column,float:this.float,nodes:this.nodes.map(i=>({...i}))}),r={...e};return this.cleanupNode(r),delete r.el,delete r._id,delete r.content,delete r.grid,t.addNode(r),t.getRow()<=this.maxRow?(e._willFitPos=G.copyPos({},r),!0):!1}changedPosConstrain(e,t){return t.w=t.w||e.w,t.h=t.h||e.h,e.x!==t.x||e.y!==t.y?!0:(e.maxW&&(t.w=Math.min(t.w,e.maxW)),e.maxH&&(t.h=Math.min(t.h,e.maxH)),e.minW&&(t.w=Math.max(t.w,e.minW)),e.minH&&(t.h=Math.max(t.h,e.minH)),e.w!==t.w||e.h!==t.h)}moveNode(e,t){if(!e||!t)return!1;let r;t.pack===void 0&&!this.batchMode&&(r=t.pack=!0),typeof t.x!="number"&&(t.x=e.x),typeof t.y!="number"&&(t.y=e.y),typeof t.w!="number"&&(t.w=e.w),typeof t.h!="number"&&(t.h=e.h);const i=e.w!==t.w||e.h!==t.h,s=G.copyPos({},e,!0);if(G.copyPos(s,t),this.nodeBoundFix(s,i),G.copyPos(t,s),!t.forceCollide&&G.samePos(e,t))return!1;const a=G.copyPos({},e),l=this.collideAll(e,s,t.skip);let h=!0;if(l.length){const f=e._moving&&!t.nested;let c=f?this.directionCollideCoverage(e,t,l):l[0];if(f&&c&&e.grid?.opts?.subGridDynamic&&!e.grid._isTemp){const p=G.areaIntercept(t.rect,c._rect),g=G.area(t.rect),v=G.area(c._rect);p/(g<v?g:v)>.8&&(c.grid.makeSubGrid(c.el,void 0,e),c=void 0)}c?h=!this._fixCollisions(e,s,c,t):(h=!1,r&&delete t.pack)}return h&&!G.samePos(e,s)&&(e._dirty=!0,G.copyPos(e,s)),t.pack&&this._packNodes()._notify(),!G.samePos(e,a)}getRow(){return this.nodes.reduce((e,t)=>Math.max(e,t.y+t.h),0)}beginUpdate(e){return e._updating||(e._updating=!0,delete e._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){const e=this.nodes.find(t=>t._updating);return e&&(delete e._updating,delete e._skipDown),this}save(e=!0,t){const r=this._layouts?.length,i=r&&this.column!==r-1?this._layouts[r-1]:null,s=[];return this.sortNodes(),this.nodes.forEach(a=>{const l=i?.find(f=>f._id===a._id),h={...a,...l||{}};G.removeInternalForSave(h,!e),t&&t(a,h),s.push(h)}),s}layoutsNodesChange(e){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((t,r)=>{if(!t||r===this.column)return this;if(r<this.column)this._layouts[r]=void 0;else{const i=r/this.column;e.forEach(s=>{if(!s._orig)return;const a=t.find(l=>l._id===s._id);a&&(a.y>=0&&s.y!==s._orig.y&&(a.y+=s.y-s._orig.y),s.x!==s._orig.x&&(a.x=Math.round(s.x*i)),s.w!==s._orig.w&&(a.w=Math.round(s.w*i)))})}}),this)}columnChanged(e,t,r="moveScale"){if(!this.nodes.length||!t||e===t)return this;const i=r==="compact"||r==="list";i&&this.sortNodes(1),t<e&&this.cacheLayout(this.nodes,e),this.batchUpdate();let s=[],a=i?this.nodes:G.sort(this.nodes,-1);if(t>e&&this._layouts){const l=this._layouts[t]||[],h=this._layouts.length-1;!l.length&&e!==h&&this._layouts[h]?.length&&(e=h,this._layouts[h].forEach(f=>{const c=a.find(p=>p._id===f._id);c&&(!i&&!f.autoPosition&&(c.x=f.x??c.x,c.y=f.y??c.y),c.w=f.w??c.w,(f.x==null||f.y===void 0)&&(c.autoPosition=!0))})),l.forEach(f=>{const c=a.findIndex(p=>p._id===f._id);if(c!==-1){const p=a[c];if(i){p.w=f.w;return}(f.autoPosition||isNaN(f.x)||isNaN(f.y))&&this.findEmptyPosition(f,s),f.autoPosition||(p.x=f.x??p.x,p.y=f.y??p.y,p.w=f.w??p.w,s.push(p)),a.splice(c,1)}})}if(i)this.compact(r,!1);else{if(a.length)if(typeof r=="function")r(t,e,s,a);else{const l=i||r==="none"?1:t/e,h=r==="move"||r==="moveScale",f=r==="scale"||r==="moveScale";a.forEach(c=>{c.x=t===1?0:h?Math.round(c.x*l):Math.min(c.x,t-1),c.w=t===1||e===1?1:f?Math.round(c.w*l)||1:Math.min(c.w,t),s.push(c)}),a=[]}s=G.sort(s,-1),this._inColumnResize=!0,this.nodes=[],s.forEach(l=>{this.addNode(l,!1),delete l._orig})}return this.nodes.forEach(l=>delete l._orig),this.batchUpdate(!1,!i),delete this._inColumnResize,this}cacheLayout(e,t,r=!1){const i=[];return e.forEach((s,a)=>{if(s._id===void 0){const l=s.id?this.nodes.find(h=>h.id===s.id):void 0;s._id=l?._id??wn._idSeq++}i[a]={x:s.x,y:s.y,w:s.w,_id:s._id}}),this._layouts=r?[]:this._layouts||[],this._layouts[t]=i,this}cacheOneLayout(e,t){e._id=e._id??wn._idSeq++;const r={x:e.x,y:e.y,w:e.w,_id:e._id};(e.autoPosition||e.x===void 0)&&(delete r.x,delete r.y,e.autoPosition&&(r.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[t]=this._layouts[t]||[];const i=this.findCacheLayout(e,t);return i===-1?this._layouts[t].push(r):this._layouts[t][i]=r,this}findCacheLayout(e,t){return this._layouts?.[t]?.findIndex(r=>r._id===e._id)??-1}removeNodeFromLayoutCache(e){if(this._layouts)for(let t=0;t<this._layouts.length;t++){const r=this.findCacheLayout(e,t);r!==-1&&this._layouts[t].splice(r,1)}}cleanupNode(e){for(const t in e)t[0]==="_"&&t!=="_id"&&delete e[t];return this}}wn._idSeq=0;const Yt={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"};class Re{}const an=typeof window<"u"&&typeof document<"u"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);class xn{}function Ls(n,e){n.touches.length>1||(n.cancelable&&n.preventDefault(),G.simulateMouseEvent(n.changedTouches[0],e))}function Af(n,e){n.cancelable&&n.preventDefault(),G.simulateMouseEvent(n,e)}function Fs(n){xn.touchHandled||(xn.touchHandled=!0,Ls(n,"mousedown"))}function Bs(n){xn.touchHandled&&Ls(n,"mousemove")}function zs(n){if(!xn.touchHandled)return;xn.pointerLeaveTimeout&&(window.clearTimeout(xn.pointerLeaveTimeout),delete xn.pointerLeaveTimeout);const e=!!Re.dragElement;Ls(n,"mouseup"),e||Ls(n,"click"),xn.touchHandled=!1}function Hs(n){n.pointerType!=="mouse"&&n.target.releasePointerCapture(n.pointerId)}function $u(n){Re.dragElement&&n.pointerType!=="mouse"&&Af(n,"mouseenter")}function Lu(n){Re.dragElement&&n.pointerType!=="mouse"&&(xn.pointerLeaveTimeout=window.setTimeout(()=>{delete xn.pointerLeaveTimeout,Af(n,"mouseleave")},10))}class ho{constructor(e,t,r){this.host=e,this.dir=t,this.option=r,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this._init()}_init(){const e=this.el=document.createElement("div");return e.classList.add("ui-resizable-handle"),e.classList.add(`${ho.prefix}${this.dir}`),e.style.zIndex="100",e.style.userSelect="none",this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),an&&(this.el.addEventListener("touchstart",Fs),this.el.addEventListener("pointerdown",Hs)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),an&&(this.el.removeEventListener("touchstart",Fs),this.el.removeEventListener("pointerdown",Hs)),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(e){this.mouseDownEvent=e,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),an&&(this.el.addEventListener("touchmove",Bs),this.el.addEventListener("touchend",zs)),e.stopPropagation(),e.preventDefault()}_mouseMove(e){const t=this.mouseDownEvent;this.moving?this._triggerEvent("move",e):Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",e),document.addEventListener("keydown",this._keyEvent)),e.stopPropagation()}_mouseUp(e){this.moving&&(this._triggerEvent("stop",e),document.removeEventListener("keydown",this._keyEvent)),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),an&&(this.el.removeEventListener("touchmove",Bs),this.el.removeEventListener("touchend",zs)),delete this.moving,delete this.mouseDownEvent,e.stopPropagation(),e.preventDefault()}_keyEvent(e){e.key==="Escape"&&(this.host.gridstackNode?.grid?.engine.restoreInitial(),this._mouseUp(this.mouseDownEvent))}_triggerEvent(e,t){return this.option[e]&&this.option[e](t),this}}ho.prefix="ui-resizable-";class nl{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(e,t){this._eventRegister[e]=t}off(e){delete this._eventRegister[e]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(e,t){if(!this.disabled&&this._eventRegister&&this._eventRegister[e])return this._eventRegister[e](t)}}class ji extends nl{constructor(e,t={}){super(),this.el=e,this.option=t,this.rectScale={x:1,y:1},this._ui=()=>{const i=this.el.parentElement.getBoundingClientRect(),s={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},a=this.temporalRect||s;return{position:{left:(a.left-i.left)*this.rectScale.x,top:(a.top-i.top)*this.rectScale.y},size:{width:a.width*this.rectScale.x,height:a.height*this.rectScale.y}}},this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){super.enable(),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,super.destroy()}updateOption(e){const t=e.handles&&e.handles!==this.option.handles,r=e.autoHide&&e.autoHide!==this.option.autoHide;return Object.keys(e).forEach(i=>this.option[i]=e[i]),t&&(this._removeHandlers(),this._setupHandlers()),r&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(e){return e?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),Re.overResizeElement===this&&delete Re.overResizeElement),this}_mouseOver(e){Re.overResizeElement||Re.dragElement||(Re.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(e){Re.overResizeElement===this&&(delete Re.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){return this.handlers=this.option.handles.split(",").map(e=>e.trim()).map(e=>new ho(this.el,e,{start:t=>{this._resizeStart(t)},stop:t=>{this._resizeStop(t)},move:t=>{this._resizing(t,e)}})),this}_resizeStart(e){this.sizeToContent=G.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=G.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=e,this._setupHelper(),this._applyChange();const t=G.initEvent(e,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(t,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",t),this}_resizing(e,t){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(e,t),this._applyChange();const r=G.initEvent(e,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(r,this._ui()),this.triggerEvent("resize",r),this}_resizeStop(e){const t=G.initEvent(e,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(t),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",t),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){this.elOriginStyleVal=ji._originStyleProp.map(r=>this.el.style[r]),this.parentOriginStylePosition=this.el.parentElement.style.position;const e=this.el.parentElement,t=G.getValuesFromTransformedElement(e);return this.rectScale={x:t.xScale,y:t.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return ji._originStyleProp.forEach((e,t)=>{this.el.style[e]=this.elOriginStyleVal[t]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(e,t){const r=this.startEvent,i={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},s=e.clientX-r.clientX,a=this.sizeToContent?0:e.clientY-r.clientY;let l,h;t.indexOf("e")>-1?i.width+=s:t.indexOf("w")>-1&&(i.width-=s,i.left+=s,l=!0),t.indexOf("s")>-1?i.height+=a:t.indexOf("n")>-1&&(i.height-=a,i.top+=a,h=!0);const f=this._constrainSize(i.width,i.height,l,h);return Math.round(i.width)!==Math.round(f.width)&&(t.indexOf("w")>-1&&(i.left+=i.width-f.width),i.width=f.width),Math.round(i.height)!==Math.round(f.height)&&(t.indexOf("n")>-1&&(i.top+=i.height-f.height),i.height=f.height),i}_constrainSize(e,t,r,i){const s=this.option,a=(r?s.maxWidthMoveLeft:s.maxWidth)||Number.MAX_SAFE_INTEGER,l=s.minWidth/this.rectScale.x||e,h=(i?s.maxHeightMoveUp:s.maxHeight)||Number.MAX_SAFE_INTEGER,f=s.minHeight/this.rectScale.y||t,c=Math.min(a,Math.max(l,e)),p=Math.min(h,Math.max(f,t));return{width:c,height:p}}_applyChange(){let e={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){const t=this.el.parentElement,{left:r,top:i}=t.getBoundingClientRect();e={left:r,top:i,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(t=>{const r=this.temporalRect[t],i=t==="width"||t==="left"?this.rectScale.x:t==="height"||t==="top"?this.rectScale.y:1;this.el.style[t]=(r-e[t])*i+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(e=>e.destroy()),delete this.handlers,this}}ji._originStyleProp=["width","height","position","left","top","opacity","zIndex"];const pg='input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle';class $i extends nl{constructor(e,t={}){super(),this.el=e,this.option=t,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};const r=t?.handle?.substring(1),i=e.gridstackNode;this.dragEls=!r||e.classList.contains(r)?[e]:i?.subGrid?[e.querySelector(t.handle)||e]:Array.from(e.querySelectorAll(t.handle)),this.dragEls.length===0&&(this.dragEls=[e]),this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._keyEvent=this._keyEvent.bind(this),this.enable()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){this.disabled!==!1&&(super.enable(),this.dragEls.forEach(e=>{e.addEventListener("mousedown",this._mouseDown),an&&(e.addEventListener("touchstart",Fs),e.addEventListener("pointerdown",Hs))}),this.el.classList.remove("ui-draggable-disabled"))}disable(e=!1){this.disabled!==!0&&(super.disable(),this.dragEls.forEach(t=>{t.removeEventListener("mousedown",this._mouseDown),an&&(t.removeEventListener("touchstart",Fs),t.removeEventListener("pointerdown",Hs))}),e||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(e){return Object.keys(e).forEach(t=>this.option[t]=e[t]),this}_mouseDown(e){if(!Re.mouseHandled)return e.button!==0||!this.dragEls.find(t=>t===e.target)&&e.target.closest(pg)||this.option.cancel&&e.target.closest(this.option.cancel)||(this.mouseDownEvent=e,delete this.dragging,delete Re.dragElement,delete Re.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),an&&(e.currentTarget.addEventListener("touchmove",Bs),e.currentTarget.addEventListener("touchend",zs)),e.preventDefault(),document.activeElement&&document.activeElement.blur(),Re.mouseHandled=!0),!0}_callDrag(e){if(!this.dragging)return;const t=G.initEvent(e,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(t,this.ui()),this.triggerEvent("drag",t)}_mouseMove(e){const t=this.mouseDownEvent;if(this.lastDrag=e,this.dragging)if(this._dragFollow(e),Re.pauseDrag){const r=Number.isInteger(Re.pauseDrag)?Re.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(e),r)}else this._callDrag(e);else if(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)>3){this.dragging=!0,Re.dragElement=this;const r=this.el.gridstackNode?.grid;r?Re.dropElement=r.el.ddElement.ddDroppable:delete Re.dropElement,this.helper=this._createHelper(),this._setupHelperContainmentStyle(),this.dragTransform=G.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(e,this.el,this.helperContainment),this._setupHelperStyle(e);const i=G.initEvent(e,{target:this.el,type:"dragstart"});this.option.start&&this.option.start(i,this.ui()),this.triggerEvent("dragstart",i),document.addEventListener("keydown",this._keyEvent)}return!0}_mouseUp(e){if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),an&&e.currentTarget&&(e.currentTarget.removeEventListener("touchmove",Bs,!0),e.currentTarget.removeEventListener("touchend",zs,!0)),this.dragging){delete this.dragging,delete this.el.gridstackNode?._origRotate,document.removeEventListener("keydown",this._keyEvent),Re.dropElement?.el===this.el.parentElement&&delete Re.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper!==this.el&&this.helper.remove(),this._removeHelperStyle();const t=G.initEvent(e,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(t),this.triggerEvent("dragstop",t),Re.dropElement&&Re.dropElement.drop(e)}delete this.helper,delete this.mouseDownEvent,delete Re.dragElement,delete Re.dropElement,delete Re.mouseHandled,e.preventDefault()}_keyEvent(e){const t=this.el.gridstackNode,r=t?.grid||Re.dropElement?.el?.gridstack;if(e.key==="Escape")t&&t._origRotate&&(t._orig=t._origRotate,delete t._origRotate),r?.cancelDrag(),this._mouseUp(this.mouseDownEvent);else if(t&&r&&(e.key==="r"||e.key==="R")){if(!G.canBeRotated(t))return;t._origRotate=t._origRotate||{...t._orig},delete t._moving,r.setAnimation(!1).rotate(t.el,{top:-this.dragOffset.offsetTop,left:-this.dragOffset.offsetLeft}).setAnimation(),t._moving=!0,this.dragOffset=this._getDragOffset(this.lastDrag,t.el,this.helperContainment),this.helper.style.width=this.dragOffset.width+"px",this.helper.style.height=this.dragOffset.height+"px",G.swap(t._orig,"w","h"),delete t._rect,this._mouseMove(this.lastDrag)}}_createHelper(){let e=this.el;return typeof this.option.helper=="function"?e=this.option.helper(this.el):this.option.helper==="clone"&&(e=G.cloneNode(this.el)),e.parentElement||G.appendTo(e,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),this.dragElementOriginStyle=$i.originStyleProp.map(t=>this.el.style[t]),e}_setupHelperStyle(e){this.helper.classList.add("ui-draggable-dragging");const t=this.helper.style;return t.pointerEvents="none",t.width=this.dragOffset.width+"px",t.height=this.dragOffset.height+"px",t.willChange="left, top",t.position="fixed",this._dragFollow(e),t.transition="none",setTimeout(()=>{this.helper&&(t.transition=null)},0),this}_removeHelperStyle(){if(this.helper.classList.remove("ui-draggable-dragging"),!this.helper?.gridstackNode?._isAboutToRemove&&this.dragElementOriginStyle){const t=this.helper,r=this.dragElementOriginStyle.transition||null;t.style.transition=this.dragElementOriginStyle.transition="none",$i.originStyleProp.forEach(i=>t.style[i]=this.dragElementOriginStyle[i]||null),setTimeout(()=>t.style.transition=r,50)}return delete this.dragElementOriginStyle,this}_dragFollow(e){const t={left:0,top:0},r=this.helper.style,i=this.dragOffset;r.left=(e.clientX+i.offsetLeft-t.left)*this.dragTransform.xScale+"px",r.top=(e.clientY+i.offsetTop-t.top)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(e,t,r){let i=0,s=0;r&&(i=this.dragTransform.xOffset,s=this.dragTransform.yOffset);const a=t.getBoundingClientRect();return{left:a.left,top:a.top,offsetLeft:-e.clientX+a.left-i,offsetTop:-e.clientY+a.top-s,width:a.width*this.dragTransform.xScale,height:a.height*this.dragTransform.yScale}}ui(){const t=this.el.parentElement.getBoundingClientRect(),r=this.helper.getBoundingClientRect();return{position:{top:(r.top-t.top)*this.dragTransform.yScale,left:(r.left-t.left)*this.dragTransform.xScale}}}}$i.originStyleProp=["width","height","transform","transform-origin","transition","pointerEvents","position","left","top","minWidth","willChange"];class gg extends nl{constructor(e,t={}){super(),this.el=e,this.option=t,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(e,t){super.on(e,t)}off(e){super.off(e)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),an&&(this.el.addEventListener("pointerenter",$u),this.el.addEventListener("pointerleave",Lu)))}disable(e=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),e||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),an&&(this.el.removeEventListener("pointerenter",$u),this.el.removeEventListener("pointerleave",Lu)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(e){return Object.keys(e).forEach(t=>this.option[t]=e[t]),this._setupAccept(),this}_mouseEnter(e){if(!Re.dragElement||!this._canDrop(Re.dragElement.el))return;e.preventDefault(),e.stopPropagation(),Re.dropElement&&Re.dropElement!==this&&Re.dropElement._mouseLeave(e,!0),Re.dropElement=this;const t=G.initEvent(e,{target:this.el,type:"dropover"});this.option.over&&this.option.over(t,this._ui(Re.dragElement)),this.triggerEvent("dropover",t),this.el.classList.add("ui-droppable-over")}_mouseLeave(e,t=!1){if(!Re.dragElement||Re.dropElement!==this)return;e.preventDefault(),e.stopPropagation();const r=G.initEvent(e,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(r,this._ui(Re.dragElement)),this.triggerEvent("dropout",r),Re.dropElement===this&&(delete Re.dropElement,!t)){let i,s=this.el.parentElement;for(;!i&&s;)i=s.ddElement?.ddDroppable,s=s.parentElement;i&&i._mouseEnter(e)}}drop(e){e.preventDefault();const t=G.initEvent(e,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(t,this._ui(Re.dragElement)),this.triggerEvent("drop",t)}_canDrop(e){return e&&(!this.accept||this.accept(e))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=e=>e.classList.contains(this.option.accept)||e.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(e){return{draggable:e.el,...e.ui()}}}class rl{static init(e){return e.ddElement||(e.ddElement=new rl(e)),e.ddElement}constructor(e){this.el=e}on(e,t){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1?this.ddDraggable.on(e,t):this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1?this.ddDroppable.on(e,t):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1&&this.ddResizable.on(e,t),this}off(e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(e)>-1?this.ddDraggable.off(e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(e)>-1?this.ddDroppable.off(e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(e)>-1&&this.ddResizable.off(e),this}setupDraggable(e){return this.ddDraggable?this.ddDraggable.updateOption(e):this.ddDraggable=new $i(this.el,e),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(e){return this.ddResizable?this.ddResizable.updateOption(e):this.ddResizable=new ji(this.el,e),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(e){return this.ddDroppable?this.ddDroppable.updateOption(e):this.ddDroppable=new gg(this.el,e),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}}class mg{resizable(e,t,r,i){return this._getDDElements(e,t).forEach(s=>{if(t==="disable"||t==="enable")s.ddResizable&&s.ddResizable[t]();else if(t==="destroy")s.ddResizable&&s.cleanResizable();else if(t==="option")s.setupResizable({[r]:i});else{const l=s.el.gridstackNode.grid;let h=s.el.getAttribute("gs-resize-handles")||l.opts.resizable.handles||"e,s,se";h==="all"&&(h="n,e,s,w,se,sw,ne,nw");const f=!l.opts.alwaysShowResizeHandle;s.setupResizable({...l.opts.resizable,handles:h,autoHide:f,start:t.start,stop:t.stop,resize:t.resize})}}),this}draggable(e,t,r,i){return this._getDDElements(e,t).forEach(s=>{if(t==="disable"||t==="enable")s.ddDraggable&&s.ddDraggable[t]();else if(t==="destroy")s.ddDraggable&&s.cleanDraggable();else if(t==="option")s.setupDraggable({[r]:i});else{const a=s.el.gridstackNode.grid;s.setupDraggable({...a.opts.draggable,start:t.start,stop:t.stop,drag:t.drag})}}),this}dragIn(e,t){return this._getDDElements(e).forEach(r=>r.setupDraggable(t)),this}droppable(e,t,r,i){return typeof t.accept=="function"&&!t._accept&&(t._accept=t.accept,t.accept=s=>t._accept(s)),this._getDDElements(e,t).forEach(s=>{t==="disable"||t==="enable"?s.ddDroppable&&s.ddDroppable[t]():t==="destroy"?s.ddDroppable&&s.cleanDroppable():t==="option"?s.setupDroppable({[r]:i}):s.setupDroppable(t)}),this}isDroppable(e){return!!(e?.ddElement?.ddDroppable&&!e.ddElement.ddDroppable.disabled)}isDraggable(e){return!!(e?.ddElement?.ddDraggable&&!e.ddElement.ddDraggable.disabled)}isResizable(e){return!!(e?.ddElement?.ddResizable&&!e.ddElement.ddResizable.disabled)}on(e,t,r){return this._getDDElements(e).forEach(i=>i.on(t,s=>{r(s,Re.dragElement?Re.dragElement.el:s.target,Re.dragElement?Re.dragElement.helper:null)})),this}off(e,t){return this._getDDElements(e).forEach(r=>r.off(t)),this}_getDDElements(e,t){const r=e.gridstack||t!=="destroy"&&t!=="disable",i=G.getElements(e);return i.length?i.map(a=>a.ddElement||(r?rl.init(a):null)).filter(a=>a):[]}}const It=new mg;class Ae{static init(e={},t=".grid-stack"){if(typeof document>"u")return null;const r=Ae.getGridElement(t);return r?(r.gridstack||(r.gridstack=new Ae(r,G.cloneDeep(e))),r.gridstack):(console.error(typeof t=="string"?'GridStack.initAll() no grid was found with selector "'+t+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(e={},t=".grid-stack"){const r=[];return typeof document>"u"||(Ae.getGridElements(t).forEach(i=>{i.gridstack||(i.gridstack=new Ae(i,G.cloneDeep(e))),r.push(i.gridstack)}),r.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+t+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),r}static addGrid(e,t={}){if(!e)return null;let r=e;if(r.gridstack){const a=r.gridstack;return t&&(a.opts={...a.opts,...t}),t.children!==void 0&&a.load(t.children),a}return(!e.classList.contains("grid-stack")||Ae.addRemoveCB)&&(Ae.addRemoveCB?r=Ae.addRemoveCB(e,t,!0,!0):r=G.createDiv(["grid-stack",t.class],e)),Ae.init(t,r)}static registerEngine(e){Ae.engineClass=e}get placeholder(){if(!this._placeholder){this._placeholder=G.createDiv([this.opts.placeholderClass,Yt.itemClass,this.opts.itemClass]);const e=G.createDiv(["placeholder-content"],this._placeholder);this.opts.placeholderText&&(e.textContent=this.opts.placeholderText)}return this._placeholder}constructor(e,t={}){this.el=e,this.opts=t,this.animationDelay=310,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},e.gridstack=this,this.opts=t=t||{},e.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),t.row&&(t.minRow=t.maxRow=t.row,delete t.row);const r=G.toNumber(e.getAttribute("gs-row"));t.column==="auto"&&delete t.column,t.alwaysShowResizeHandle!==void 0&&(t._alwaysShowResizeHandle=t.alwaysShowResizeHandle);let i=t.columnOpts?.breakpoints;const s=t;if(s.oneColumnModeDomSort&&(delete s.oneColumnModeDomSort,console.log("warning: Gridstack oneColumnModeDomSort no longer supported. Use GridStackOptions.columnOpts instead.")),s.oneColumnSize||s.disableOneColumnMode===!1){const p=s.oneColumnSize||768;delete s.oneColumnSize,delete s.disableOneColumnMode,t.columnOpts=t.columnOpts||{},i=t.columnOpts.breakpoints=t.columnOpts.breakpoints||[];let g=i.find(v=>v.c===1);g?g.w=p:(g={c:1,w:p},i.push(g,{c:12,w:p+1}))}const a=t.columnOpts;a&&(!a.columnWidth&&!a.breakpoints?.length?(delete t.columnOpts,i=void 0):a.columnMax=a.columnMax||12),i?.length>1&&i.sort((p,g)=>(g.w||0)-(p.w||0));const l={...G.cloneDeep(Yt),column:G.toNumber(e.getAttribute("gs-column"))||Yt.column,minRow:r||G.toNumber(e.getAttribute("gs-min-row"))||Yt.minRow,maxRow:r||G.toNumber(e.getAttribute("gs-max-row"))||Yt.maxRow,staticGrid:G.toBool(e.getAttribute("gs-static"))||Yt.staticGrid,sizeToContent:G.toBool(e.getAttribute("gs-size-to-content"))||void 0,draggable:{handle:(t.handleClass?"."+t.handleClass:t.handle?t.handle:"")||Yt.draggable.handle},removableOptions:{accept:t.itemClass||Yt.removableOptions.accept,decline:Yt.removableOptions.decline}};e.getAttribute("gs-animate")&&(l.animate=G.toBool(e.getAttribute("gs-animate"))),t=G.defaults(t,l),this._initMargin(),this.checkDynamicColumn(),this.el.classList.add("gs-"+t.column),t.rtl==="auto"&&(t.rtl=e.style.direction==="rtl"),t.rtl&&this.el.classList.add("grid-stack-rtl");const f=this.el.closest("."+Yt.itemClass)?.gridstackNode;f&&(f.subGrid=this,this.parentGridNode=f,this.el.classList.add("grid-stack-nested"),f.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=t.cellHeight==="auto",this._isAutoCellHeight||t.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof t.cellHeight=="number"&&t.cellHeightUnit&&t.cellHeightUnit!==Yt.cellHeightUnit&&(t.cellHeight=t.cellHeight+t.cellHeightUnit,delete t.cellHeightUnit),this.cellHeight(t.cellHeight,!1)),t.alwaysShowResizeHandle==="mobile"&&(t.alwaysShowResizeHandle=an),this._styleSheetClass="gs-id-"+wn._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();const c=t.engineClass||Ae.engineClass||wn;if(this.engine=new c({column:this.getColumn(),float:t.float,maxRow:t.maxRow,onChange:p=>{let g=0;this.engine.nodes.forEach(v=>{g=Math.max(g,v.y+v.h)}),p.forEach(v=>{const y=v.el;y&&(v._removeDOM?(y&&y.remove(),delete v._removeDOM):this._writePosAttr(y,v))}),this._updateStyles(!1,g)}}),this._updateStyles(!1,0),t.auto&&(this.batchUpdate(),this.engine._loading=!0,this.getGridItems().forEach(p=>this._prepareElement(p)),delete this.engine._loading,this.batchUpdate(!1)),t.children){const p=t.children;delete t.children,p.length&&this.load(p)}this.setAnimation(),t.subGridDynamic&&!Re.pauseDrag&&(Re.pauseDrag=!0),t.draggable?.pause!==void 0&&(Re.pauseDrag=t.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}addWidget(e){if(typeof e=="string"){console.error("V11: GridStack.addWidget() does not support string anymore. see #2736");return}if(e.ELEMENT_NODE)return console.error("V11: GridStack.addWidget() does not support HTMLElement anymore. use makeWidget()"),this.makeWidget(e);let t,r=e;if(r.grid=this,r?.el?t=r.el:Ae.addRemoveCB?t=Ae.addRemoveCB(this.el,e,!0,!1):t=this.createWidgetDivs(r),!t)return;if(r=t.gridstackNode,r&&t.parentElement===this.el&&this.engine.nodes.find(s=>s._id===r._id))return t;const i=this._readAttr(t);return G.defaults(e,i),this.engine.prepareNode(e),this.el.appendChild(t),this.makeWidget(t,e),t}createWidgetDivs(e){const t=G.createDiv(["grid-stack-item",this.opts.itemClass]),r=G.createDiv(["grid-stack-item-content"],t);return G.lazyLoad(e)?e.visibleObservable||(e.visibleObservable=new IntersectionObserver(([i])=>{i.isIntersecting&&(e.visibleObservable?.disconnect(),delete e.visibleObservable,Ae.renderCB(r,e),e.grid?.prepareDragDrop(e.el))}),window.setTimeout(()=>e.visibleObservable?.observe(t))):Ae.renderCB(r,e),t}makeSubGrid(e,t,r,i=!0){let s=e.gridstackNode;if(s||(s=this.makeWidget(e).gridstackNode),s.subGrid?.el)return s.subGrid;let a,l=this;for(;l&&!a;)a=l.opts?.subGridOpts,l=l.parentGridNode?.grid;t=G.cloneDeep({...this.opts,id:void 0,children:void 0,column:"auto",columnOpts:void 0,layout:"list",subGridOpts:void 0,...a||{},...t||s.subGridOpts||{}}),s.subGridOpts=t;let h;t.column==="auto"&&(h=!0,t.column=Math.max(s.w||1,r?.w||1),delete t.columnOpts);let f=s.el.querySelector(".grid-stack-item-content"),c,p;if(i&&(this._removeDD(s.el),p={...s,x:0,y:0},G.removeInternalForSave(p),delete p.subGridOpts,s.content&&(p.content=s.content,delete s.content),Ae.addRemoveCB?c=Ae.addRemoveCB(this.el,p,!0,!1):(c=G.createDiv(["grid-stack-item"]),c.appendChild(f),f=G.createDiv(["grid-stack-item-content"],s.el)),this.prepareDragDrop(s.el)),r){const v=h?t.column:s.w,y=s.h+r.h,w=s.el.style;w.transition="none",this.update(s.el,{w:v,h:y}),setTimeout(()=>w.transition=null)}const g=s.subGrid=Ae.addGrid(f,t);return r?._moving&&(g._isTemp=!0),h&&(g._autoColumn=!0),i&&g.makeWidget(c,p),r&&(r._moving?window.setTimeout(()=>G.simulateMouseEvent(r._event,"mouseenter",g.el),0):g.makeWidget(s.el,s)),this.resizeToContentCheck(!1,s),g}removeAsSubGrid(e){const t=this.parentGridNode?.grid;t&&(t.batchUpdate(),t.removeWidget(this.parentGridNode.el,!0,!0),this.engine.nodes.forEach(r=>{r.x+=this.parentGridNode.x,r.y+=this.parentGridNode.y,t.makeWidget(r.el,r)}),t.batchUpdate(!1),this.parentGridNode&&delete this.parentGridNode.subGrid,delete this.parentGridNode,e&&window.setTimeout(()=>G.simulateMouseEvent(e._event,"mouseenter",t.el),0))}save(e=!0,t=!1,r=Ae.saveCB){const i=this.engine.save(e,r);if(i.forEach(s=>{if(e&&s.el&&!s.subGrid&&!r){const a=s.el.querySelector(".grid-stack-item-content");s.content=a?.innerHTML,s.content||delete s.content}else if(!e&&!r&&delete s.content,s.subGrid?.el){const a=s.subGrid.save(e,t,r);s.subGridOpts=t?a:{children:a},delete s.subGrid}delete s.el}),t){const s=G.cloneDeep(this.opts);s.marginBottom===s.marginTop&&s.marginRight===s.marginLeft&&s.marginTop===s.marginRight&&(s.margin=s.marginTop,delete s.marginTop,delete s.marginRight,delete s.marginBottom,delete s.marginLeft),s.rtl===(this.el.style.direction==="rtl")&&(s.rtl="auto"),this._isAutoCellHeight&&(s.cellHeight="auto"),this._autoColumn&&(s.column="auto");const a=s._alwaysShowResizeHandle;return delete s._alwaysShowResizeHandle,a!==void 0?s.alwaysShowResizeHandle=a:delete s.alwaysShowResizeHandle,G.removeInternalAndSame(s,Yt),s.children=i,s}return i}load(e,t=Ae.addRemoveCB||!0){e=G.cloneDeep(e);const r=this.getColumn();e.forEach(f=>{f.w=f.w||1,f.h=f.h||1}),e=G.sort(e),this.engine.skipCacheUpdate=this._ignoreLayoutsNodeChange=!0;let i=0;e.forEach(f=>{i=Math.max(i,(f.x||0)+f.w)}),i>this.engine.defaultColumn&&(this.engine.defaultColumn=i),i>r&&this.engine.cacheLayout(e,i,!0);const s=Ae.addRemoveCB;typeof t=="function"&&(Ae.addRemoveCB=t);const a=[];this.batchUpdate();const l=!this.engine.nodes.length;l&&this.setAnimation(!1),!l&&t&&[...this.engine.nodes].forEach(c=>{if(!c.id)return;G.find(e,c.id)||(Ae.addRemoveCB&&Ae.addRemoveCB(this.el,c,!1,!1),a.push(c),this.removeWidget(c.el,!0,!1))}),this.engine._loading=!0;const h=[];return this.engine.nodes=this.engine.nodes.filter(f=>G.find(e,f.id)?(h.push(f),!1):!0),e.forEach(f=>{const c=G.find(h,f.id);if(c){if(G.shouldSizeToContent(c)&&(f.h=c.h),this.engine.nodeBoundFix(f),(f.autoPosition||f.x===void 0||f.y===void 0)&&(f.w=f.w||c.w,f.h=f.h||c.h,this.engine.findEmptyPosition(f)),this.engine.nodes.push(c),G.samePos(c,f)&&this.engine.nodes.length>1&&(this.moveNode(c,{...f,forceCollide:!0}),G.copyPos(f,c)),this.update(c.el,f),f.subGridOpts?.children){const p=c.el.querySelector(".grid-stack");p&&p.gridstack&&p.gridstack.load(f.subGridOpts.children)}}else t&&this.addWidget(f)}),delete this.engine._loading,this.engine.removedNodes=a,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this.engine.skipCacheUpdate,s?Ae.addRemoveCB=s:delete Ae.addRemoveCB,l&&this.opts?.animate&&this.setAnimation(this.opts.animate,!0),this}batchUpdate(e=!0){return this.engine.batchUpdate(e),e||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(e=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!e||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;const t=this.el.querySelector("."+this.opts.itemClass);if(t){const i=G.toNumber(t.getAttribute("gs-h"))||1;return Math.round(t.offsetHeight/i)}const r=parseInt(this.el.getAttribute("gs-current-row"));return r?Math.round(this.el.getBoundingClientRect().height/r):this.opts.cellHeight}cellHeight(e,t=!0){if(t&&e!==void 0&&this._isAutoCellHeight!==(e==="auto")&&(this._isAutoCellHeight=e==="auto",this._updateResizeEvent()),(e==="initial"||e==="auto")&&(e=void 0),e===void 0){const i=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;e=this.cellWidth()+i}const r=G.parseHeight(e);return this.opts.cellHeightUnit===r.unit&&this.opts.cellHeight===r.h?this:(this.opts.cellHeightUnit=r.unit,this.opts.cellHeight=r.h,this.resizeToContentCheck(),t&&this._updateStyles(!0),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(e=!1){return e&&this.opts.columnOpts?.breakpointForWindow?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){const e=this.opts.columnOpts;if(!e||!e.columnWidth&&!e.breakpoints?.length)return!1;const t=this.getColumn();let r=t;const i=this._widthOrContainer(!0);if(e.columnWidth)r=Math.min(Math.round(i/e.columnWidth)||1,e.columnMax);else{r=e.columnMax;let s=0;for(;s<e.breakpoints.length&&i<=e.breakpoints[s].w;)r=e.breakpoints[s++].c||t}if(r!==t){const s=e.breakpoints?.find(a=>a.c===r);return this.column(r,s?.layout||e.layout),!0}return!1}compact(e="compact",t=!0){return this.engine.compact(e,t),this._triggerChangeEvent(),this}column(e,t="moveScale"){if(!e||e<1||this.opts.column===e)return this;const r=this.getColumn();return this.opts.column=e,this.engine?(this.engine.column=e,this.el.classList.remove("gs-"+r),this.el.classList.add("gs-"+e),this.engine.columnChanged(r,e,t),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(e=>e.matches("."+this.opts.itemClass)&&!e.matches("."+this.opts.placeholderClass))}isIgnoreChangeCB(){return this._ignoreLayoutsNodeChange}destroy(e=!0){if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),e?this.el.parentNode.removeChild(this.el):(this.removeAll(e),this.el.classList.remove(this._styleSheetClass),this.el.removeAttribute("gs-current-row")),this._removeStylesheet(),delete this.parentGridNode?.subGrid,delete this.parentGridNode,delete this.opts,delete this._placeholder?.gridstackNode,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(e){return this.opts.float!==e&&(this.opts.float=this.engine.float=e,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(e,t=!1){const r=this.el.getBoundingClientRect();let i;t?i={top:r.top+document.documentElement.scrollTop,left:r.left}:i={top:this.el.offsetTop,left:this.el.offsetLeft};const s=e.left-i.left,a=e.top-i.top,l=r.width/this.getColumn(),h=r.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(s/l),y:Math.floor(a/h)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(e,t,r,i){return this.engine.isAreaEmpty(e,t,r,i)}makeWidget(e,t){const r=Ae.getElement(e);if(!r)return;r.parentElement||this.el.appendChild(r),this._prepareElement(r,!0,t);const i=r.gridstackNode;this._updateContainerHeight(),i.subGridOpts&&this.makeSubGrid(r,i.subGridOpts,void 0,!1);let s;return this.opts.column===1&&!this._ignoreLayoutsNodeChange&&(s=this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),s&&delete this._ignoreLayoutsNodeChange,r}on(e,t){return e.indexOf(" ")!==-1?(e.split(" ").forEach(i=>this.on(i,t)),this):(e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable"?(e==="enable"||e==="disable"?this._gsEventHandler[e]=i=>t(i):this._gsEventHandler[e]=i=>{i.detail&&t(i,i.detail)},this.el.addEventListener(e,this._gsEventHandler[e])):e==="drag"||e==="dragstart"||e==="dragstop"||e==="resizestart"||e==="resize"||e==="resizestop"||e==="dropped"||e==="resizecontent"?this._gsEventHandler[e]=t:console.error("GridStack.on("+e+") event not supported"),this)}off(e){return e.indexOf(" ")!==-1?(e.split(" ").forEach(r=>this.off(r)),this):((e==="change"||e==="added"||e==="removed"||e==="enable"||e==="disable")&&this._gsEventHandler[e]&&this.el.removeEventListener(e,this._gsEventHandler[e]),delete this._gsEventHandler[e],this)}offAll(){return Object.keys(this._gsEventHandler).forEach(e=>this.off(e)),this}removeWidget(e,t=!0,r=!0){return e?(Ae.getElements(e).forEach(i=>{if(i.parentElement&&i.parentElement!==this.el)return;let s=i.gridstackNode;s||(s=this.engine.nodes.find(a=>i===a.el)),s&&(t&&Ae.addRemoveCB&&Ae.addRemoveCB(this.el,s,!1,!1),delete i.gridstackNode,this._removeDD(i),this.engine.removeNode(s,t,r),t&&i.parentElement&&i.remove())}),r&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this):(console.error("Error: GridStack.removeWidget(undefined) called"),this)}removeAll(e=!0,t=!0){return this.engine.nodes.forEach(r=>{e&&Ae.addRemoveCB&&Ae.addRemoveCB(this.el,r,!1,!1),delete r.el.gridstackNode,this.opts.staticGrid||this._removeDD(r.el)}),this.engine.removeAll(e,t),t&&this._triggerRemoveEvent(),this}setAnimation(e=this.opts.animate,t){return t?setTimeout(()=>{this.opts&&this.setAnimation(e)}):e?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(e,t=!0,r=!0){return!!this.opts.staticGrid===e?this:(e?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(i=>{this.prepareDragDrop(i.el),i.subGrid&&r&&i.subGrid.setStatic(e,t,r)}),t&&this._setStaticClass(),this)}updateOptions(e){const t=this.opts;return e.acceptWidgets!==void 0&&this._setupAcceptWidget(),e.animate!==void 0&&this.setAnimation(),e.cellHeight&&(this.cellHeight(e.cellHeight,!0),delete e.cellHeight),e.class&&e.class!==t.class&&(t.class&&this.el.classList.remove(t.class),this.el.classList.add(e.class)),typeof e.column=="number"&&!e.columnOpts&&(this.column(e.column),delete e.column),e.margin!==void 0&&this.margin(e.margin),e.staticGrid!==void 0&&this.setStatic(e.staticGrid),e.disableDrag!==void 0&&!e.staticGrid&&this.enableMove(!e.disableDrag),e.disableResize!==void 0&&!e.staticGrid&&this.enableResize(!e.disableResize),e.float!==void 0&&this.float(e.float),e.row!==void 0&&(t.minRow=t.maxRow=e.row),e.children?.length&&(this.load(e.children),delete e.children),this.opts={...this.opts,...e},this}update(e,t){return Ae.getElements(e).forEach(r=>{const i=r?.gridstackNode;if(!i)return;const s={...G.copyPos({},i),...G.cloneDeep(t)};this.engine.nodeBoundFix(s),delete s.autoPosition;const a=["x","y","w","h"];let l;if(a.some(c=>s[c]!==void 0&&s[c]!==i[c])&&(l={},a.forEach(c=>{l[c]=s[c]!==void 0?s[c]:i[c],delete s[c]})),!l&&(s.minW||s.minH||s.maxW||s.maxH)&&(l={}),s.content!==void 0){const c=r.querySelector(".grid-stack-item-content");c&&c.textContent!==s.content&&(i.content=s.content,Ae.renderCB(c,s),i.subGrid?.el&&(c.appendChild(i.subGrid.el),i.subGrid.opts.styleInHead||i.subGrid._updateStyles(!0))),delete s.content}let h=!1,f=!1;for(const c in s)c[0]!=="_"&&i[c]!==s[c]&&(i[c]=s[c],h=!0,f=f||!this.opts.staticGrid&&(c==="noResize"||c==="noMove"||c==="locked"));if(G.sanitizeMinMax(i),l){const c=l.w!==void 0&&l.w!==i.w;this.moveNode(i,l),c&&i.subGrid?i.subGrid.onResize(this.hasAnimationCSS()?i.w:void 0):this.resizeToContentCheck(c,i),delete i._orig}(l||h)&&this._writeAttr(r,i),f&&this.prepareDragDrop(i.el)}),this}moveNode(e,t){const r=e._updating;r||this.engine.cleanNodes().beginUpdate(e),this.engine.moveNode(e,t),this._updateContainerHeight(),r||(this._triggerChangeEvent(),this.engine.endUpdate())}resizeToContent(e){if(!e||(e.classList.remove("size-to-content-max"),!e.clientHeight))return;const t=e.gridstackNode;if(!t)return;const r=t.grid;if(!r||e.parentElement!==r.el)return;const i=r.getCellHeight(!0);if(!i)return;let s=t.h?t.h*i:e.clientHeight,a;if(t.resizeToContentParent&&(a=e.querySelector(t.resizeToContentParent)),a||(a=e.querySelector(Ae.resizeToContentParent)),!a)return;const l=e.clientHeight-a.clientHeight,h=t.h?t.h*i-l:a.clientHeight;let f;if(t.subGrid){f=t.subGrid.getRow()*t.subGrid.getCellHeight(!0);const g=t.subGrid.el.getBoundingClientRect(),v=t.subGrid.el.parentElement.getBoundingClientRect();f+=g.top-v.top}else{if(t.subGridOpts?.children?.length)return;{const g=a.firstElementChild;if(!g){console.error(`Error: GridStack.resizeToContent() widget id:${t.id} '${Ae.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);return}f=g.getBoundingClientRect().height||h}}if(h===f)return;s+=f-h;let c=Math.ceil(s/i);const p=Number.isInteger(t.sizeToContent)?t.sizeToContent:0;p&&c>p&&(c=p,e.classList.add("size-to-content-max")),t.minH&&c<t.minH?c=t.minH:t.maxH&&c>t.maxH&&(c=t.maxH),c!==t.h&&(r._ignoreLayoutsNodeChange=!0,r.moveNode(t,{h:c}),delete r._ignoreLayoutsNodeChange)}resizeToContentCBCheck(e){Ae.resizeToContentCB?Ae.resizeToContentCB(e):this.resizeToContent(e)}rotate(e,t){return Ae.getElements(e).forEach(r=>{const i=r.gridstackNode;if(!G.canBeRotated(i))return;const s={w:i.h,h:i.w,minH:i.minW,minW:i.minH,maxH:i.maxW,maxW:i.maxH};if(t){const l=t.left>0?Math.floor(t.left/this.cellWidth()):0,h=t.top>0?Math.floor(t.top/this.opts.cellHeight):0;s.x=i.x+l-(i.h-(h+1)),s.y=i.y+h-l}Object.keys(s).forEach(l=>{s[l]===void 0&&delete s[l]});const a=i._orig;this.update(r,s),i._orig=a}),this}margin(e){if(!(typeof e=="string"&&e.split(" ").length>1)){const r=G.parseHeight(e);if(this.opts.marginUnit===r.unit&&this.opts.margin===r.h)return}return this.opts.margin=e,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(e){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");const t=arguments;let r=0,i={x:t[r++],y:t[r++],w:t[r++],h:t[r++],autoPosition:t[r++]};return this.willItFit(i)}return this.engine.willItFit(e)}_triggerChangeEvent(){if(this.engine.batchMode)return this;const e=this.engine.getDirtyNodes(!0);return e&&e.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(e),this._triggerEvent("change",e)),this.engine.saveInitial(),this}_triggerAddEvent(){if(this.engine.batchMode)return this;if(this.engine.addedNodes?.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(t=>{delete t._dirty});const e=[...this.engine.addedNodes];this.engine.addedNodes=[],this._triggerEvent("added",e)}return this}_triggerRemoveEvent(){if(this.engine.batchMode)return this;if(this.engine.removedNodes?.length){const e=[...this.engine.removedNodes];this.engine.removedNodes=[],this._triggerEvent("removed",e)}return this}_triggerEvent(e,t){const r=t?new CustomEvent(e,{bubbles:!1,detail:t}):new Event(e);return this.el.dispatchEvent(r),this}_removeStylesheet(){if(this._styles){const e=this.opts.styleInHead?void 0:this.el.parentNode;G.removeStylesheet(this._styleSheetClass,e),delete this._styles}return this}_updateStyles(e=!1,t){if(e&&this._removeStylesheet(),t===void 0&&(t=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;const r=this.opts.cellHeight,i=this.opts.cellHeightUnit,s=`.${this._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){const a=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=G.createStylesheet(this._styleSheetClass,a,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,G.addCSSRule(this._styles,s,`height: ${r}${i}`);const l=this.opts.marginTop+this.opts.marginUnit,h=this.opts.marginBottom+this.opts.marginUnit,f=this.opts.marginRight+this.opts.marginUnit,c=this.opts.marginLeft+this.opts.marginUnit,p=`${s} > .grid-stack-item-content`,g=`.${this._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;G.addCSSRule(this._styles,p,`top: ${l}; right: ${f}; bottom: ${h}; left: ${c};`),G.addCSSRule(this._styles,g,`top: ${l}; right: ${f}; bottom: ${h}; left: ${c};`),G.addCSSRule(this._styles,`${s} > .ui-resizable-n`,`top: ${l};`),G.addCSSRule(this._styles,`${s} > .ui-resizable-s`,`bottom: ${h}`),G.addCSSRule(this._styles,`${s} > .ui-resizable-ne`,`right: ${f}; top: ${l}`),G.addCSSRule(this._styles,`${s} > .ui-resizable-e`,`right: ${f}`),G.addCSSRule(this._styles,`${s} > .ui-resizable-se`,`right: ${f}; bottom: ${h}`),G.addCSSRule(this._styles,`${s} > .ui-resizable-nw`,`left: ${c}; top: ${l}`),G.addCSSRule(this._styles,`${s} > .ui-resizable-w`,`left: ${c}`),G.addCSSRule(this._styles,`${s} > .ui-resizable-sw`,`left: ${c}; bottom: ${h}`)}if(t=t||this._styles._max,t>this._styles._max){const a=l=>r*l+i;for(let l=this._styles._max+1;l<=t;l++)G.addCSSRule(this._styles,`${s}[gs-y="${l}"]`,`top: ${a(l)}`),G.addCSSRule(this._styles,`${s}[gs-h="${l+1}"]`,`height: ${a(l+1)}`);this._styles._max=t}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;const e=this.parentGridNode;let t=this.getRow()+this._extraDragRow;const r=this.opts.cellHeight,i=this.opts.cellHeightUnit;if(!r)return this;if(!e){const s=G.parseHeight(getComputedStyle(this.el).minHeight);if(s.h>0&&s.unit===i){const a=Math.floor(s.h/r);t<a&&(t=a)}}return this.el.setAttribute("gs-current-row",String(t)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),t&&(this.el.style[e?"minHeight":"height"]=t*r+i),e&&!e.grid.engine.batchMode&&G.shouldSizeToContent(e)&&e.grid.resizeToContentCBCheck(e.el),this}_prepareElement(e,t=!1,r){r=r||this._readAttr(e),e.gridstackNode=r,r.el=e,r.grid=this,r=this.engine.addNode(r,t),this._writeAttr(e,r),e.classList.add(Yt.itemClass,this.opts.itemClass);const i=G.shouldSizeToContent(r);return i?e.classList.add("size-to-content"):e.classList.remove("size-to-content"),i&&this.resizeToContentCheck(!1,r),G.lazyLoad(r)||this.prepareDragDrop(r.el),this}_writePosAttr(e,t){return t.x!==void 0&&t.x!==null&&e.setAttribute("gs-x",String(t.x)),t.y!==void 0&&t.y!==null&&e.setAttribute("gs-y",String(t.y)),t.w>1?e.setAttribute("gs-w",String(t.w)):e.removeAttribute("gs-w"),t.h>1?e.setAttribute("gs-h",String(t.h)):e.removeAttribute("gs-h"),this}_writeAttr(e,t){if(!t)return this;this._writePosAttr(e,t);const r={noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id",sizeToContent:"gs-size-to-content"};for(const i in r)t[i]?e.setAttribute(r[i],String(t[i])):e.removeAttribute(r[i]);return this}_readAttr(e,t=!0){const r={};r.x=G.toNumber(e.getAttribute("gs-x")),r.y=G.toNumber(e.getAttribute("gs-y")),r.w=G.toNumber(e.getAttribute("gs-w")),r.h=G.toNumber(e.getAttribute("gs-h")),r.autoPosition=G.toBool(e.getAttribute("gs-auto-position")),r.noResize=G.toBool(e.getAttribute("gs-no-resize")),r.noMove=G.toBool(e.getAttribute("gs-no-move")),r.locked=G.toBool(e.getAttribute("gs-locked"));const i=e.getAttribute("gs-size-to-content");i&&(i==="true"||i==="false"?r.sizeToContent=G.toBool(i):r.sizeToContent=parseInt(i,10)),r.id=e.getAttribute("gs-id"),r.maxW=G.toNumber(e.getAttribute("gs-max-w")),r.minW=G.toNumber(e.getAttribute("gs-min-w")),r.maxH=G.toNumber(e.getAttribute("gs-max-h")),r.minH=G.toNumber(e.getAttribute("gs-min-h")),t&&(r.w===1&&e.removeAttribute("gs-w"),r.h===1&&e.removeAttribute("gs-h"),r.maxW&&e.removeAttribute("gs-max-w"),r.minW&&e.removeAttribute("gs-min-w"),r.maxH&&e.removeAttribute("gs-max-h"),r.minH&&e.removeAttribute("gs-min-h"));for(const s in r){if(!r.hasOwnProperty(s))return;!r[s]&&r[s]!==0&&s!=="gs-size-to-content"&&delete r[s]}return r}_setStaticClass(){const e=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...e),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...e),this.el.removeAttribute("gs-static")),this}onResize(e=this.el?.clientWidth){if(!e||this.prevWidth===e)return;this.prevWidth=e,this.batchUpdate();let t=!1;return this._autoColumn&&this.parentGridNode?this.opts.column!==this.parentGridNode.w&&(this.column(this.parentGridNode.w,this.opts.layout||"list"),t=!0):t=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(r=>{r.subGrid&&r.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(t),delete this._skipInitialResize,this.batchUpdate(!1),this}resizeToContentCheck(e=!1,t=void 0){if(this.engine){if(e&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(!1,t),this.animationDelay);if(t)G.shouldSizeToContent(t)&&this.resizeToContentCBCheck(t.el);else if(this.engine.nodes.some(r=>G.shouldSizeToContent(r))){const r=[...this.engine.nodes];this.batchUpdate(),r.forEach(i=>{G.shouldSizeToContent(i)&&this.resizeToContentCBCheck(i.el)}),this.batchUpdate(!1)}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,t?[t]:this.engine.nodes)}}_updateResizeEvent(e=!1){const t=!this.parentGridNode&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(r=>r.sizeToContent));return!e&&t&&!this.resizeObserver?(this._sizeThrottle=G.throttle(()=>this.onResize(),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle()),this.resizeObserver.observe(this.el),this._skipInitialResize=!0):(e||!t)&&this.resizeObserver&&(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle),this}static getElement(e=".grid-stack-item"){return G.getElement(e)}static getElements(e=".grid-stack-item"){return G.getElements(e)}static getGridElement(e){return Ae.getElement(e)}static getGridElements(e){return G.getElements(e)}_initMargin(){let e,t=0,r=[];return typeof this.opts.margin=="string"&&(r=this.opts.margin.split(" ")),r.length===2?(this.opts.marginTop=this.opts.marginBottom=r[0],this.opts.marginLeft=this.opts.marginRight=r[1]):r.length===4?(this.opts.marginTop=r[0],this.opts.marginRight=r[1],this.opts.marginBottom=r[2],this.opts.marginLeft=r[3]):(e=G.parseHeight(this.opts.margin),this.opts.marginUnit=e.unit,t=this.opts.margin=e.h),this.opts.marginTop===void 0?this.opts.marginTop=t:(e=G.parseHeight(this.opts.marginTop),this.opts.marginTop=e.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=t:(e=G.parseHeight(this.opts.marginBottom),this.opts.marginBottom=e.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=t:(e=G.parseHeight(this.opts.marginRight),this.opts.marginRight=e.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=t:(e=G.parseHeight(this.opts.marginLeft),this.opts.marginLeft=e.h,delete this.opts.margin),this.opts.marginUnit=e.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static getDD(){return It}static setupDragIn(e,t,r,i=document){t?.pause!==void 0&&(Re.pauseDrag=t.pause),t={appendTo:"body",helper:"clone",...t||{}},(typeof e=="string"?G.getElements(e,i):e).forEach((a,l)=>{It.isDraggable(a)||It.dragIn(a,t),r?.[l]&&(a.gridstackNode=r[l])})}movable(e,t){return this.opts.staticGrid?this:(Ae.getElements(e).forEach(r=>{const i=r.gridstackNode;i&&(t?delete i.noMove:i.noMove=!0,this.prepareDragDrop(i.el))}),this)}resizable(e,t){return this.opts.staticGrid?this:(Ae.getElements(e).forEach(r=>{const i=r.gridstackNode;i&&(t?delete i.noResize:i.noResize=!0,this.prepareDragDrop(i.el))}),this)}disable(e=!0){if(!this.opts.staticGrid)return this.enableMove(!1,e),this.enableResize(!1,e),this._triggerEvent("disable"),this}enable(e=!0){if(!this.opts.staticGrid)return this.enableMove(!0,e),this.enableResize(!0,e),this._triggerEvent("enable"),this}enableMove(e,t=!0){return this.opts.staticGrid?this:(e?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(r=>{this.prepareDragDrop(r.el),r.subGrid&&t&&r.subGrid.enableMove(e,t)}),this)}enableResize(e,t=!0){return this.opts.staticGrid?this:(e?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(r=>{this.prepareDragDrop(r.el),r.subGrid&&t&&r.subGrid.enableResize(e,t)}),this)}cancelDrag(){const e=this._placeholder?.gridstackNode;e&&(e._isExternal?(e._isAboutToRemove=!0,this.engine.removeNode(e)):e._isAboutToRemove&&Ae._itemRemoving(e.el,!1),this.engine.restoreInitial())}_removeDD(e){return It.draggable(e,"destroy").resizable(e,"destroy"),e.gridstackNode&&delete e.gridstackNode._initDD,delete e.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return It.droppable(this.el,"destroy"),this;let e,t;const r=(i,s,a)=>{a=a||s;const l=a.gridstackNode;if(!l)return;if(!l.grid?.el){a.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;const g=a.getBoundingClientRect();a.style.left=g.x+(this.dragTransform.xScale-1)*(i.clientX-g.x)/this.dragTransform.xScale+"px",a.style.top=g.y+(this.dragTransform.yScale-1)*(i.clientY-g.y)/this.dragTransform.yScale+"px",a.style.transformOrigin="0px 0px"}let{top:h,left:f}=a.getBoundingClientRect();const c=this.el.getBoundingClientRect();f-=c.left,h-=c.top;const p={position:{top:h*this.dragTransform.xScale,left:f*this.dragTransform.yScale}};if(l._temporaryRemoved){if(l.x=Math.max(0,Math.round(f/t)),l.y=Math.max(0,Math.round(h/e)),delete l.autoPosition,this.engine.nodeBoundFix(l),!this.engine.willItFit(l)){if(l.autoPosition=!0,!this.engine.willItFit(l)){It.off(s,"drag");return}l._willFitPos&&(G.copyPos(l,l._willFitPos),delete l._willFitPos)}this._onStartMoving(a,i,p,l,t,e)}else this._dragOrResize(a,i,p,l,t,e)};return It.droppable(this.el,{accept:i=>{const s=i.gridstackNode||this._readAttr(i,!1);if(s?.grid===this)return!0;if(!this.opts.acceptWidgets)return!1;let a=!0;if(typeof this.opts.acceptWidgets=="function")a=this.opts.acceptWidgets(i);else{const l=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;a=i.matches(l)}if(a&&s&&this.opts.maxRow){const l={w:s.w,h:s.h,minW:s.minW,minH:s.minH};a=this.engine.willItFit(l)}return a}}).on(this.el,"dropover",(i,s,a)=>{let l=a?.gridstackNode||s.gridstackNode;if(l?.grid===this&&!l._temporaryRemoved)return!1;if(l?._sidebarOrig&&(l.w=l._sidebarOrig.w,l.h=l._sidebarOrig.h),l?.grid&&l.grid!==this&&!l._temporaryRemoved&&l.grid._leave(s,a),a=a||s,t=this.cellWidth(),e=this.getCellHeight(!0),!l){const c=a.getAttribute("data-gs-widget")||a.getAttribute("gridstacknode");if(c){try{l=JSON.parse(c)}catch{console.error("Gridstack dropover: Bad JSON format: ",c)}a.removeAttribute("data-gs-widget"),a.removeAttribute("gridstacknode")}l||(l=this._readAttr(a)),l._sidebarOrig={w:l.w,h:l.h}}l.grid||(l.el||(l={...l}),l._isExternal=!0,a.gridstackNode=l);const h=l.w||Math.round(a.offsetWidth/t)||1,f=l.h||Math.round(a.offsetHeight/e)||1;return l.grid&&l.grid!==this?(s._gridstackNodeOrig||(s._gridstackNodeOrig=l),s.gridstackNode=l={...l,w:h,h:f,grid:this},delete l.x,delete l.y,this.engine.cleanupNode(l).nodeBoundFix(l),l._initDD=l._isExternal=l._temporaryRemoved=!0):(l.w=h,l.h=f,l._temporaryRemoved=!0),Ae._itemRemoving(l.el,!1),It.on(s,"drag",r),r(i,s,a),!1}).on(this.el,"dropout",(i,s,a)=>{const l=a?.gridstackNode||s.gridstackNode;return l&&(!l.grid||l.grid===this)&&(this._leave(s,a),this._isTemp&&this.removeAsSubGrid(l)),!1}).on(this.el,"drop",(i,s,a)=>{const l=a?.gridstackNode||s.gridstackNode;if(l?.grid===this&&!l._isExternal)return!1;const h=!!this.placeholder.parentElement,f=s!==a;this.placeholder.remove(),delete this.placeholder.gridstackNode;const c=h&&this.opts.animate;c&&this.setAnimation(!1);const p=s._gridstackNodeOrig;if(delete s._gridstackNodeOrig,h&&p?.grid&&p.grid!==this){const v=p.grid;v.engine.removeNodeFromLayoutCache(p),v.engine.removedNodes.push(p),v._triggerRemoveEvent()._triggerChangeEvent(),v.parentGridNode&&!v.engine.nodes.length&&v.opts.subGridDynamic&&v.removeAsSubGrid()}if(!l||(h&&(this.engine.cleanupNode(l),l.grid=this),delete l.grid?._isTemp,It.off(s,"drag"),a!==s?(a.remove(),s=a):s.remove(),this._removeDD(s),!h))return!1;const g=l.subGrid?.el?.gridstack;return G.copyPos(l,this._readAttr(this.placeholder)),G.removePositioningStyles(s),f&&(l.content||l.subGridOpts||Ae.addRemoveCB)?(delete l.el,s=this.addWidget(l)):(this._prepareElement(s,!0,l),this.el.appendChild(s),this.resizeToContentCheck(!1,l),g&&(g.parentGridNode=l,g.opts.styleInHead||g._updateStyles(!0)),this._updateContainerHeight()),this.engine.addedNodes.push(l),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped({...i,type:"dropped"},p&&p.grid?p:void 0,l),c&&this.setAnimation(this.opts.animate,!0),!1}),this}static _itemRemoving(e,t){if(!e)return;const r=e?e.gridstackNode:void 0;!r?.grid||e.classList.contains(r.grid.opts.removableOptions.decline)||(t?r._isAboutToRemove=!0:delete r._isAboutToRemove,t?e.classList.add("grid-stack-item-removing"):e.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(typeof this.opts.removable!="string")return this;const e=document.querySelector(this.opts.removable);return e?(!this.opts.staticGrid&&!It.isDroppable(e)&&It.droppable(e,this.opts.removableOptions).on(e,"dropover",(t,r)=>Ae._itemRemoving(r,!0)).on(e,"dropout",(t,r)=>Ae._itemRemoving(r,!1)),this):this}prepareDragDrop(e,t=!1){const r=e?.gridstackNode;if(!r)return;const i=r.noMove||this.opts.disableDrag,s=r.noResize||this.opts.disableResize,a=this.opts.staticGrid||i&&s;if((t||a)&&(r._initDD&&(this._removeDD(e),delete r._initDD),a&&e.classList.add("ui-draggable-disabled","ui-resizable-disabled"),!t))return this;if(!r._initDD){let l,h;const f=(g,v)=>{this._gsEventHandler[g.type]&&this._gsEventHandler[g.type](g,g.target),l=this.cellWidth(),h=this.getCellHeight(!0),this._onStartMoving(e,g,v,r,l,h)},c=(g,v)=>{this._dragOrResize(e,g,v,r,l,h)},p=g=>{this.placeholder.remove(),delete this.placeholder.gridstackNode,delete r._moving,delete r._event,delete r._lastTried;const v=r.w!==r._orig.w,y=g.target;if(!(!y.gridstackNode||y.gridstackNode.grid!==this)){if(r.el=y,r._isAboutToRemove){const w=e.gridstackNode.grid;w._gsEventHandler[g.type]&&w._gsEventHandler[g.type](g,y),w.engine.nodes.push(r),w.removeWidget(e,!0,!0)}else G.removePositioningStyles(y),r._temporaryRemoved?(G.copyPos(r,r._orig),this._writePosAttr(y,r),this.engine.addNode(r)):this._writePosAttr(y,r),this._gsEventHandler[g.type]&&this._gsEventHandler[g.type](g,y);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),g.type==="resizestop"&&(Number.isInteger(r.sizeToContent)&&(r.sizeToContent=r.h),this.resizeToContentCheck(v,r))}};It.draggable(e,{start:f,stop:p,drag:c}).resizable(e,{start:f,stop:p,resize:c}),r._initDD=!0}return It.draggable(e,i?"disable":"enable").resizable(e,s?"disable":"enable"),this}_onStartMoving(e,t,r,i,s,a){if(this.engine.cleanNodes().beginUpdate(i),this._writePosAttr(this.placeholder,i),this.el.appendChild(this.placeholder),this.placeholder.gridstackNode=i,i.grid?.el)this.dragTransform=G.getValuesFromTransformedElement(e);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){const l=this.placeholder.closest(".grid-stack");this.dragTransform=G.getValuesFromTransformedElement(l)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};if(i.el=this.placeholder,i._lastUiPosition=r.position,i._prevYPix=r.position.top,i._moving=t.type==="dragstart",delete i._lastTried,t.type==="dropover"&&i._temporaryRemoved&&(this.engine.addNode(i),i._moving=!0),this.engine.cacheRects(s,a,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),t.type==="resizestart"){const l=this.getColumn()-i.x,h=(this.opts.maxRow||Number.MAX_SAFE_INTEGER)-i.y;It.resizable(e,"option","minWidth",s*Math.min(i.minW||1,l)).resizable(e,"option","minHeight",a*Math.min(i.minH||1,h)).resizable(e,"option","maxWidth",s*Math.min(i.maxW||Number.MAX_SAFE_INTEGER,l)).resizable(e,"option","maxWidthMoveLeft",s*Math.min(i.maxW||Number.MAX_SAFE_INTEGER,i.x+i.w)).resizable(e,"option","maxHeight",a*Math.min(i.maxH||Number.MAX_SAFE_INTEGER,h)).resizable(e,"option","maxHeightMoveUp",a*Math.min(i.maxH||Number.MAX_SAFE_INTEGER,i.y+i.h))}}_dragOrResize(e,t,r,i,s,a){const l={...i._orig};let h,f=this.opts.marginLeft,c=this.opts.marginRight,p=this.opts.marginTop,g=this.opts.marginBottom;const v=Math.round(a*.1),y=Math.round(s*.1);if(f=Math.min(f,y),c=Math.min(c,y),p=Math.min(p,v),g=Math.min(g,v),t.type==="drag"){if(i._temporaryRemoved)return;const E=r.position.top-i._prevYPix;i._prevYPix=r.position.top,this.opts.draggable.scroll!==!1&&G.updateScrollPosition(e,r.position,E);const N=r.position.left+(r.position.left>i._lastUiPosition.left?-c:f),_=r.position.top+(r.position.top>i._lastUiPosition.top?-g:p);l.x=Math.round(N/s),l.y=Math.round(_/a);const C=this._extraDragRow;if(this.engine.collide(i,l)){const S=this.getRow();let A=Math.max(0,l.y+i.h-S);this.opts.maxRow&&S+A>this.opts.maxRow&&(A=Math.max(0,this.opts.maxRow-S)),this._extraDragRow=A}else this._extraDragRow=0;if(this._extraDragRow!==C&&this._updateContainerHeight(),i.x===l.x&&i.y===l.y)return}else if(t.type==="resize"){if(l.x<0||(G.updateScrollResize(t,e,a),l.w=Math.round((r.size.width-f)/s),l.h=Math.round((r.size.height-p)/a),i.w===l.w&&i.h===l.h)||i._lastTried&&i._lastTried.w===l.w&&i._lastTried.h===l.h)return;const E=r.position.left+f,N=r.position.top+p;l.x=Math.round(E/s),l.y=Math.round(N/a),h=!0}i._event=t,i._lastTried=l;const w={x:r.position.left+f,y:r.position.top+p,w:(r.size?r.size.width:i.w*s)-f-c,h:(r.size?r.size.height:i.h*a)-p-g};if(this.engine.moveNodeCheck(i,{...l,cellWidth:s,cellHeight:a,rect:w,resizing:h})){i._lastUiPosition=r.position,this.engine.cacheRects(s,a,p,c,g,f),delete i._skipDown,h&&i.subGrid&&i.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();const E=t.target;i._sidebarOrig||this._writePosAttr(E,i),this._gsEventHandler[t.type]&&this._gsEventHandler[t.type](t,E)}}_leave(e,t){t=t||e;const r=t.gridstackNode;if(!r||(t.style.transform=t.style.transformOrigin=null,It.off(e,"drag"),r._temporaryRemoved))return;r._temporaryRemoved=!0,this.engine.removeNode(r),r.el=r._isExternal&&t?t:e;const i=r._sidebarOrig;r._isExternal&&this.engine.cleanupNode(r),r._sidebarOrig=i,this.opts.removable===!0&&Ae._itemRemoving(e,!0),e._gridstackNodeOrig?(e.gridstackNode=e._gridstackNodeOrig,delete e._gridstackNodeOrig):r._isExternal&&this.engine.restoreInitial()}commit(){return dg(this,this.batchUpdate(!1),"commit","batchUpdate","5.2"),this}}Ae.renderCB=(n,e)=>{n&&e?.content&&(n.textContent=e.content)};Ae.resizeToContentParent=".grid-stack-item-content";Ae.Utils=G;Ae.Engine=wn;Ae.GDRev="11.5.1";class vg{googleFaviconUrl="https://www.google.com/s2/favicons";defaultIcon='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23667eea" width="100" height="100" rx="20"/><text x="50" y="65" font-size="50" text-anchor="middle" fill="white">?</text></svg>';getFaviconUrl(e,t=64){try{const r=new URL(e).hostname;return`${this.googleFaviconUrl}?domain=${r}&sz=${t}`}catch{return this.defaultIcon}}async fetchFavicon(e){try{const t=new URL(e).hostname,r=`${this.googleFaviconUrl}?domain=${t}&sz=64`;if(await this.checkImageUrl(r))return r;const a=`${new URL(e).origin}/favicon.ico`;return await this.checkImageUrl(a)?a:this.defaultIcon}catch{return this.defaultIcon}}async checkImageUrl(e){return new Promise(t=>{const r=new Image;r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e,setTimeout(()=>t(!1),3e3)})}generateDefaultIcon(e){const t=(e[0]||"?").toUpperCase(),r=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe","#00f2fe","#43e97b","#fa709a"],i=r[e.charCodeAt(0)%r.length];return`data:image/svg+xml,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="${i}" width="100" height="100" rx="20"/><text x="50" y="68" font-size="50" text-anchor="middle" fill="white" font-family="sans-serif" font-weight="600">${t}</text></svg>`)}`}}const Tr=new vg,yg={key:0,class:"i-lucide-check w-3 h-3 text-white"},bg=["src","alt"],wg=fn({__name:"BookmarkCard",props:{item:{},isEditMode:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1}},emits:["contextmenu","toggleSelect"],setup(n,{emit:e}){const t=n,r=e,i=Ge(()=>t.item.favicon?t.item.favicon:Tr.getFaviconUrl(t.item.url));function s(){t.isEditMode?r("toggleSelect",t.item.id):window.open(t.item.url,"_self")}function a(l){l.preventDefault(),l.stopPropagation(),t.isEditMode||r("contextmenu",l)}return(l,h)=>(Ee(),ke("div",{class:Je(["bookmark-card group flex flex-col items-center cursor-pointer select-none relative",{"edit-mode":n.isEditMode}]),onClick:s,onContextmenu:a},[Ze(Ln,{name:"scale-fade"},{default:Cn(()=>[n.isEditMode?(Ee(),ke("div",{key:0,class:Je(["absolute -top-1 -right-1 z-10 w-5 h-5 rounded-full flex items-center justify-center transition-all duration-200",n.isSelected?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-white/20 border border-white/30"])},[n.isSelected?(Ee(),ke("div",yg)):ut("",!0)],2)):ut("",!0)]),_:1}),B("div",{class:Je(["w-14 h-14 rounded-2xl glass flex items-center justify-center mb-2 transition-all duration-200",[n.isEditMode?n.isSelected?"ring-2 ring-blue-500 ring-offset-2 ring-offset-transparent scale-95":"opacity-80 hover:opacity-100":"glass-hover group-hover:scale-105"]])},[B("img",{src:i.value,alt:n.item.title,class:"w-8 h-8 rounded-lg",onError:h[0]||(h[0]=f=>{f.target.src=Le(Tr).generateDefaultIcon(n.item.title)})},null,40,bg)],2),B("span",{class:Je(["text-xs text-center line-clamp-2 max-w-[72px] text-shadow transition-all duration-200",n.isSelected?"text-white":"text-white/80"])},Qe(n.item.title),3)],34))}}),po=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},xg=po(wg,[["__scopeId","data-v-d0a8b4d4"]]),_g={class:"flex-1 rounded-2xl glass glass-hover p-3 transition-transform group-hover:scale-[1.02] overflow-hidden"},Eg={class:"w-full h-full flex items-center justify-center"},Cg=["src","alt","onError"],Sg={key:1,class:"flex items-center justify-center w-full h-full"},kg={class:"mt-1 text-center leading-tight"},Og={class:"text-xs text-white/80 line-clamp-1 text-shadow"},Ag={key:0,class:"text-xs text-white/50"},Tg=fn({__name:"FolderCard",props:{item:{}},emits:["click","contextmenu"],setup(n,{emit:e}){const t=n,r=e,i=zn(),s=Ge(()=>{switch(t.item.size){case"2x2":return{maxItems:9,cols:3,rows:3,iconSize:"w-6 h-6",gap:"0.5rem"};case"2x1":return{maxItems:3,cols:3,rows:1,iconSize:"w-7 h-7",gap:"0.75rem"};default:return{maxItems:3,cols:1,rows:3,iconSize:"w-7 h-7",gap:"0.5rem"}}}),a=Ge(()=>{switch(t.item.size){case"2x2":return{width:"160px",height:"180px"};case"2x1":return{width:"160px",height:"92px"};default:return{width:"72px",height:"180px"}}}),l=Ge(()=>{const p=i.getFolderChildren(t.item.id),g=s.value;return p.slice(0,g.maxItems).map(v=>ir(v)?{id:v.id,favicon:v.favicon||Tr.getFaviconUrl(v.url),title:v.title,isFolder:!1}:{id:v.id,favicon:"",title:v.title,isFolder:!0})}),h=Ge(()=>t.item.children.length);function f(){r("click")}function c(p){p.preventDefault(),p.stopPropagation(),r("contextmenu",p)}return(p,g)=>(Ee(),ke("div",{style:or(a.value),class:"folder-card group flex flex-col cursor-pointer select-none",onClick:f,onContextmenu:c},[B("div",_g,[B("div",Eg,[l.value.length>0?(Ee(),ke("div",{key:0,class:"grid place-items-center",style:or({gridTemplateColumns:`repeat(${s.value.cols}, 1fr)`,gridTemplateRows:`repeat(${s.value.rows}, 1fr)`,gap:s.value.gap,width:"100%",height:"100%"})},[(Ee(!0),ke(lt,null,ar(l.value,v=>(Ee(),ke("div",{key:v.id,class:"flex items-center justify-center"},[v.isFolder?(Ee(),ke("div",{key:0,class:Je(["i-lucide-folder text-white/60",s.value.iconSize])},null,2)):(Ee(),ke("img",{key:1,src:v.favicon,alt:v.title,class:Je([s.value.iconSize,"rounded object-contain"]),onError:y=>y.target.src=Le(Tr).generateDefaultIcon(v.title)},null,42,Cg))]))),128))],4)):(Ee(),ke("div",Sg,[...g[0]||(g[0]=[B("div",{class:"i-lucide-folder-open w-8 h-8 text-white/30"},null,-1)])]))])]),B("div",kg,[B("span",Og,Qe(n.item.title),1),h.value>s.value.maxItems?(Ee(),ke("span",Ag," +"+Qe(h.value-s.value.maxItems),1)):ut("",!0)])],36))}}),Pg=po(Tg,[["__scopeId","data-v-f5984c74"]]),Rg={class:"bookmark-grid w-full"},Ng={key:0,class:"flex flex-col items-center justify-center py-20 text-white/50"},Dg=fn({__name:"BookmarkGrid",setup(n){const e=zn(),t=fr(),r=De();let i=null;const s=De(8);let a=!1;const l=new Map;function h(C){switch(C){case"2x2":return{w:2,h:2};case"2x1":return{w:2,h:1};default:return{w:1,h:2}}}function f(C,S){let A=1,k=1;if(ot(C)){const I=h(C.size);A=I.w,k=I.h}const D=C.gridPosition;let T=D?.x;return T!==void 0&&T+A>S&&(T=void 0),{id:C.id,x:T,y:T!==void 0?D?.y:void 0,w:D?.w??A,h:D?.h??k,noResize:!0}}function c(){if(!r.value)return;const C=r.value.clientWidth,S=72,A=16,k=Math.floor((C+A)/(S+A)),D=Math.max(4,Math.min(k,12));D!==s.value&&(s.value=D,i&&(i.column(D,"none"),i.compact()))}function p(C,S){if(l.has(C.id)){const A=l.get(C.id);di(null,A)}if(ir(C)){const A=Ta(xg,{item:C,isEditMode:t.isEditMode,isSelected:t.isSelected(C.id),onContextmenu:k=>E(k,C),onToggleSelect:()=>g(C.id)});di(A,S)}else if(ot(C)){const A=Ta(Pg,{item:C,onClick:()=>N(C.id),onContextmenu:k=>E(k,C)});di(A,S)}l.set(C.id,S)}function g(C){t.toggleSelectItem(C)}function v(){!r.value||i||(e.migrateToGridLayout(s.value),i=Ae.init({column:s.value,cellHeight:92,margin:8,float:!1,animate:!1,disableResize:!0,acceptWidgets:!1,staticGrid:!1},r.value),i.on("added",(C,S)=>{for(const A of S){if(!A.id||!A.el)continue;const k=e.bookmarks[A.id];if(!k)continue;const D=A.el.querySelector(".grid-stack-item-content");if(D){D.innerHTML="";const T=document.createElement("div");T.className="grid-item-wrapper",D.appendChild(T),p(k,T)}}}),i.on("change",(C,S)=>{a||w(S)}),y())}function y(){if(i){a=!0,i.batchUpdate(!0),i.removeAll(!1),l.forEach(C=>{di(null,C)}),l.clear();for(const C of e.rootBookmarks){const S=f(C,s.value);i.addWidget(S)}i.batchUpdate(!1),a=!1}}async function w(C){const S=[];for(const A of C)A.id&&A.x!==void 0&&A.y!==void 0&&S.push({id:String(A.id),position:{x:A.x,y:A.y,w:A.w??1,h:A.h??1}});S.length>0&&await e.batchUpdateGridPositions(S)}function E(C,S){C.preventDefault(),C.stopPropagation();const A=ir(S)?"site":"folder";t.openContextMenu(C.clientX,C.clientY,A,S)}function N(C){t.openFolder(C)}En(()=>[e.rootBookmarks,e.rootOrder],()=>{!a&&i&&Ts(()=>{y()})},{deep:!0}),En(()=>[t.isEditMode,t.selectedIds],()=>{for(const C of e.rootBookmarks)if(ir(C)){const S=l.get(C.id);S&&p(C,S)}},{deep:!0});let _=null;return zi(()=>{c(),r.value&&(_=new ResizeObserver(c),_.observe(r.value)),Ts(()=>{v()})}),Zr(()=>{_?.disconnect(),l.forEach(C=>{di(null,C)}),l.clear(),i&&(i.destroy(!1),i=null)}),(C,S)=>(Ee(),ke("div",Rg,[B("div",{ref_key:"gridContainer",ref:r,class:"grid-stack"},null,512),Le(e).rootBookmarks.length===0&&!Le(e).loading?(Ee(),ke("div",Ng,[...S[0]||(S[0]=[B("div",{class:"i-lucide-bookmark-plus w-16 h-16 mb-4"},null,-1),B("p",{class:"text-lg"},"",-1),B("p",{class:"text-sm mt-2"},"",-1)])])):ut("",!0)]))}});var ua={};var Mg={2:n=>{function e(i,s,a){i instanceof RegExp&&(i=t(i,a)),s instanceof RegExp&&(s=t(s,a));var l=r(i,s,a);return l&&{start:l[0],end:l[1],pre:a.slice(0,l[0]),body:a.slice(l[0]+i.length,l[1]),post:a.slice(l[1]+s.length)}}function t(i,s){var a=s.match(i);return a?a[0]:null}function r(i,s,a){var l,h,f,c,p,g=a.indexOf(i),v=a.indexOf(s,g+1),y=g;if(g>=0&&v>0){for(l=[],f=a.length;y>=0&&!p;)y==g?(l.push(y),g=a.indexOf(i,y+1)):l.length==1?p=[l.pop(),v]:((h=l.pop())<f&&(f=h,c=v),v=a.indexOf(s,y+1)),y=g<v&&g>=0?g:v;l.length&&(p=[f,c])}return p}n.exports=e,e.range=r},101:function(n,e,t){var r;n=t.nmd(n),(function(i){n&&n.exports,typeof global=="object"&&global;var s=function(c){this.message=c};(s.prototype=new Error).name="InvalidCharacterError";var a=function(c){throw new s(c)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,f={encode:function(c){c=String(c),/[^\0-\xFF]/.test(c)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var p,g,v,y,w=c.length%3,E="",N=-1,_=c.length-w;++N<_;)p=c.charCodeAt(N)<<16,g=c.charCodeAt(++N)<<8,v=c.charCodeAt(++N),E+=l.charAt((y=p+g+v)>>18&63)+l.charAt(y>>12&63)+l.charAt(y>>6&63)+l.charAt(63&y);return w==2?(p=c.charCodeAt(N)<<8,g=c.charCodeAt(++N),E+=l.charAt((y=p+g)>>10)+l.charAt(y>>4&63)+l.charAt(y<<2&63)+"="):w==1&&(y=c.charCodeAt(N),E+=l.charAt(y>>2)+l.charAt(y<<4&63)+"=="),E},decode:function(c){var p=(c=String(c).replace(h,"")).length;p%4==0&&(p=(c=c.replace(/==?$/,"")).length),(p%4==1||/[^+a-zA-Z0-9/]/.test(c))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var g,v,y=0,w="",E=-1;++E<p;)v=l.indexOf(c.charAt(E)),g=y%4?64*g+v:v,y++%4&&(w+=String.fromCharCode(255&g>>(-2*y&6)));return w},version:"1.0.0"};(r=(function(){return f}).call(e,t,e,n))===void 0||(n.exports=r)})()},172:(n,e)=>{e.d=function(t){if(!t)return 0;for(var r=(t=t.toString()).length,i=t.length;i--;){var s=t.charCodeAt(i);56320<=s&&s<=57343&&i--,127<s&&s<=2047?r++:2047<s&&s<=65535&&(r+=2)}return r}},526:n=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var r=[],i=0;i<t.length;i++)r.push(255&t.charCodeAt(i));return r},bytesToString:function(t){for(var r=[],i=0;i<t.length;i++)r.push(String.fromCharCode(t[i]));return r.join("")}}};n.exports=e},298:n=>{var e,t;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(r,i){return r<<i|r>>>32-i},rotr:function(r,i){return r<<32-i|r>>>i},endian:function(r){if(r.constructor==Number)return 16711935&t.rotl(r,8)|4278255360&t.rotl(r,24);for(var i=0;i<r.length;i++)r[i]=t.endian(r[i]);return r},randomBytes:function(r){for(var i=[];r>0;r--)i.push(Math.floor(256*Math.random()));return i},bytesToWords:function(r){for(var i=[],s=0,a=0;s<r.length;s++,a+=8)i[a>>>5]|=r[s]<<24-a%32;return i},wordsToBytes:function(r){for(var i=[],s=0;s<32*r.length;s+=8)i.push(r[s>>>5]>>>24-s%32&255);return i},bytesToHex:function(r){for(var i=[],s=0;s<r.length;s++)i.push((r[s]>>>4).toString(16)),i.push((15&r[s]).toString(16));return i.join("")},hexToBytes:function(r){for(var i=[],s=0;s<r.length;s+=2)i.push(parseInt(r.substr(s,2),16));return i},bytesToBase64:function(r){for(var i=[],s=0;s<r.length;s+=3)for(var a=r[s]<<16|r[s+1]<<8|r[s+2],l=0;l<4;l++)8*s+6*l<=8*r.length?i.push(e.charAt(a>>>6*(3-l)&63)):i.push("=");return i.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var i=[],s=0,a=0;s<r.length;a=++s%4)a!=0&&i.push((e.indexOf(r.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<2*a|e.indexOf(r.charAt(s))>>>6-2*a);return i}},n.exports=t},635:(n,e,t)=>{const r=t(31),i=t(338),s=t(221);n.exports={XMLParser:i,XMLValidator:r,XMLBuilder:s}},118:n=>{n.exports=function(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(const r of e)if(typeof r=="string"&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}},705:(n,e)=>{const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+t+"]["+t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");e.isExist=function(s){return s!==void 0},e.isEmptyObject=function(s){return Object.keys(s).length===0},e.merge=function(s,a,l){if(a){const h=Object.keys(a),f=h.length;for(let c=0;c<f;c++)s[h[c]]=l==="strict"?[a[h[c]]]:a[h[c]]}},e.getValue=function(s){return e.isExist(s)?s:""},e.isName=function(s){return i.exec(s)!=null},e.getAllMatches=function(s,a){const l=[];let h=a.exec(s);for(;h;){const f=[];f.startIndex=a.lastIndex-h[0].length;const c=h.length;for(let p=0;p<c;p++)f.push(h[p]);l.push(f),h=a.exec(s)}return l},e.nameRegexp=r},31:(n,e,t)=>{const r=t(705),i={allowBooleanAttributes:!1,unpairedTags:[]};function s(_){return _===" "||_==="	"||_===`
`||_==="\r"}function a(_,C){const S=C;for(;C<_.length;C++)if(!(_[C]!="?"&&_[C]!=" ")){const A=_.substr(S,C-S);if(C>5&&A==="xml")return y("InvalidXml","XML declaration allowed only at the start of the document.",E(_,C));if(_[C]=="?"&&_[C+1]==">"){C++;break}}return C}function l(_,C){if(_.length>C+5&&_[C+1]==="-"&&_[C+2]==="-"){for(C+=3;C<_.length;C++)if(_[C]==="-"&&_[C+1]==="-"&&_[C+2]===">"){C+=2;break}}else if(_.length>C+8&&_[C+1]==="D"&&_[C+2]==="O"&&_[C+3]==="C"&&_[C+4]==="T"&&_[C+5]==="Y"&&_[C+6]==="P"&&_[C+7]==="E"){let S=1;for(C+=8;C<_.length;C++)if(_[C]==="<")S++;else if(_[C]===">"&&(S--,S===0))break}else if(_.length>C+9&&_[C+1]==="["&&_[C+2]==="C"&&_[C+3]==="D"&&_[C+4]==="A"&&_[C+5]==="T"&&_[C+6]==="A"&&_[C+7]==="["){for(C+=8;C<_.length;C++)if(_[C]==="]"&&_[C+1]==="]"&&_[C+2]===">"){C+=2;break}}return C}e.validate=function(_,C){C=Object.assign({},i,C);const S=[];let A=!1,k=!1;_[0]==="\uFEFF"&&(_=_.substr(1));for(let T=0;T<_.length;T++)if(_[T]==="<"&&_[T+1]==="?"){if(T+=2,T=a(_,T),T.err)return T}else{if(_[T]!=="<"){if(s(_[T]))continue;return y("InvalidChar","char '"+_[T]+"' is not expected.",E(_,T))}{let I=T;if(T++,_[T]==="!"){T=l(_,T);continue}{let X=!1;_[T]==="/"&&(X=!0,T++);let te="";for(;T<_.length&&_[T]!==">"&&_[T]!==" "&&_[T]!=="	"&&_[T]!==`
`&&_[T]!=="\r";T++)te+=_[T];if(te=te.trim(),te[te.length-1]==="/"&&(te=te.substring(0,te.length-1),T--),D=te,!r.isName(D)){let ne;return ne=te.trim().length===0?"Invalid space after '<'.":"Tag '"+te+"' is an invalid name.",y("InvalidTag",ne,E(_,T))}const J=c(_,T);if(J===!1)return y("InvalidAttr","Attributes for '"+te+"' have open quote.",E(_,T));let F=J.value;if(T=J.index,F[F.length-1]==="/"){const ne=T-F.length;F=F.substring(0,F.length-1);const Z=g(F,C);if(Z!==!0)return y(Z.err.code,Z.err.msg,E(_,ne+Z.err.line));A=!0}else if(X){if(!J.tagClosed)return y("InvalidTag","Closing tag '"+te+"' doesn't have proper closing.",E(_,T));if(F.trim().length>0)return y("InvalidTag","Closing tag '"+te+"' can't have attributes or invalid starting.",E(_,I));if(S.length===0)return y("InvalidTag","Closing tag '"+te+"' has not been opened.",E(_,I));{const ne=S.pop();if(te!==ne.tagName){let Z=E(_,ne.tagStartPos);return y("InvalidTag","Expected closing tag '"+ne.tagName+"' (opened in line "+Z.line+", col "+Z.col+") instead of closing tag '"+te+"'.",E(_,I))}S.length==0&&(k=!0)}}else{const ne=g(F,C);if(ne!==!0)return y(ne.err.code,ne.err.msg,E(_,T-F.length+ne.err.line));if(k===!0)return y("InvalidXml","Multiple possible root nodes found.",E(_,T));C.unpairedTags.indexOf(te)!==-1||S.push({tagName:te,tagStartPos:I}),A=!0}for(T++;T<_.length;T++)if(_[T]==="<"){if(_[T+1]==="!"){T++,T=l(_,T);continue}if(_[T+1]!=="?")break;if(T=a(_,++T),T.err)return T}else if(_[T]==="&"){const ne=v(_,T);if(ne==-1)return y("InvalidChar","char '&' is not expected.",E(_,T));T=ne}else if(k===!0&&!s(_[T]))return y("InvalidXml","Extra text at the end",E(_,T));_[T]==="<"&&T--}}}var D;return A?S.length==1?y("InvalidTag","Unclosed tag '"+S[0].tagName+"'.",E(_,S[0].tagStartPos)):!(S.length>0)||y("InvalidXml","Invalid '"+JSON.stringify(S.map((T=>T.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):y("InvalidXml","Start tag expected.",1)};const h='"',f="'";function c(_,C){let S="",A="",k=!1;for(;C<_.length;C++){if(_[C]===h||_[C]===f)A===""?A=_[C]:A!==_[C]||(A="");else if(_[C]===">"&&A===""){k=!0;break}S+=_[C]}return A===""&&{value:S,index:C,tagClosed:k}}const p=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function g(_,C){const S=r.getAllMatches(_,p),A={};for(let k=0;k<S.length;k++){if(S[k][1].length===0)return y("InvalidAttr","Attribute '"+S[k][2]+"' has no space in starting.",N(S[k]));if(S[k][3]!==void 0&&S[k][4]===void 0)return y("InvalidAttr","Attribute '"+S[k][2]+"' is without value.",N(S[k]));if(S[k][3]===void 0&&!C.allowBooleanAttributes)return y("InvalidAttr","boolean attribute '"+S[k][2]+"' is not allowed.",N(S[k]));const D=S[k][2];if(!w(D))return y("InvalidAttr","Attribute '"+D+"' is an invalid name.",N(S[k]));if(A.hasOwnProperty(D))return y("InvalidAttr","Attribute '"+D+"' is repeated.",N(S[k]));A[D]=1}return!0}function v(_,C){if(_[++C]===";")return-1;if(_[C]==="#")return(function(A,k){let D=/\d/;for(A[k]==="x"&&(k++,D=/[\da-fA-F]/);k<A.length;k++){if(A[k]===";")return k;if(!A[k].match(D))break}return-1})(_,++C);let S=0;for(;C<_.length;C++,S++)if(!(_[C].match(/\w/)&&S<20)){if(_[C]===";")break;return-1}return C}function y(_,C,S){return{err:{code:_,msg:C,line:S.line||S,col:S.col}}}function w(_){return r.isName(_)}function E(_,C){const S=_.substring(0,C).split(/\r?\n/);return{line:S.length,col:S[S.length-1].length+1}}function N(_){return _.startIndex+_[1].length}},221:(n,e,t)=>{const r=t(87),i=t(118),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(c,p){return p},attributeValueProcessor:function(c,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function a(c){this.options=Object.assign({},s,c),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=i(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=f),this.processTextOrObjNode=l,this.options.format?(this.indentate=h,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function l(c,p,g,v){const y=this.j2x(c,g+1,v.concat(p));return c[this.options.textNodeName]!==void 0&&Object.keys(c).length===1?this.buildTextValNode(c[this.options.textNodeName],p,y.attrStr,g):this.buildObjectNode(y.val,p,y.attrStr,g)}function h(c){return this.options.indentBy.repeat(c)}function f(c){return!(!c.startsWith(this.options.attributeNamePrefix)||c===this.options.textNodeName)&&c.substr(this.attrPrefixLen)}a.prototype.build=function(c){return this.options.preserveOrder?r(c,this.options):(Array.isArray(c)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(c={[this.options.arrayNodeName]:c}),this.j2x(c,0,[]).val)},a.prototype.j2x=function(c,p,g){let v="",y="";const w=g.join(".");for(let E in c)if(Object.prototype.hasOwnProperty.call(c,E))if(c[E]===void 0)this.isAttribute(E)&&(y+="");else if(c[E]===null)this.isAttribute(E)?y+="":E[0]==="?"?y+=this.indentate(p)+"<"+E+"?"+this.tagEndChar:y+=this.indentate(p)+"<"+E+"/"+this.tagEndChar;else if(c[E]instanceof Date)y+=this.buildTextValNode(c[E],E,"",p);else if(typeof c[E]!="object"){const N=this.isAttribute(E);if(N&&!this.ignoreAttributesFn(N,w))v+=this.buildAttrPairStr(N,""+c[E]);else if(!N)if(E===this.options.textNodeName){let _=this.options.tagValueProcessor(E,""+c[E]);y+=this.replaceEntitiesValue(_)}else y+=this.buildTextValNode(c[E],E,"",p)}else if(Array.isArray(c[E])){const N=c[E].length;let _="",C="";for(let S=0;S<N;S++){const A=c[E][S];if(A!==void 0)if(A===null)E[0]==="?"?y+=this.indentate(p)+"<"+E+"?"+this.tagEndChar:y+=this.indentate(p)+"<"+E+"/"+this.tagEndChar;else if(typeof A=="object")if(this.options.oneListGroup){const k=this.j2x(A,p+1,g.concat(E));_+=k.val,this.options.attributesGroupName&&A.hasOwnProperty(this.options.attributesGroupName)&&(C+=k.attrStr)}else _+=this.processTextOrObjNode(A,E,p,g);else if(this.options.oneListGroup){let k=this.options.tagValueProcessor(E,A);k=this.replaceEntitiesValue(k),_+=k}else _+=this.buildTextValNode(A,E,"",p)}this.options.oneListGroup&&(_=this.buildObjectNode(_,E,C,p)),y+=_}else if(this.options.attributesGroupName&&E===this.options.attributesGroupName){const N=Object.keys(c[E]),_=N.length;for(let C=0;C<_;C++)v+=this.buildAttrPairStr(N[C],""+c[E][N[C]])}else y+=this.processTextOrObjNode(c[E],E,p,g);return{attrStr:v,val:y}},a.prototype.buildAttrPairStr=function(c,p){return p=this.options.attributeValueProcessor(c,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+c:" "+c+'="'+p+'"'},a.prototype.buildObjectNode=function(c,p,g,v){if(c==="")return p[0]==="?"?this.indentate(v)+"<"+p+g+"?"+this.tagEndChar:this.indentate(v)+"<"+p+g+this.closeTag(p)+this.tagEndChar;{let y="</"+p+this.tagEndChar,w="";return p[0]==="?"&&(w="?",y=""),!g&&g!==""||c.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&w.length===0?this.indentate(v)+`<!--${c}-->`+this.newLine:this.indentate(v)+"<"+p+g+w+this.tagEndChar+c+this.indentate(v)+y:this.indentate(v)+"<"+p+g+w+">"+c+y}},a.prototype.closeTag=function(c){let p="";return this.options.unpairedTags.indexOf(c)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${c}`,p},a.prototype.buildTextValNode=function(c,p,g,v){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(v)+`<![CDATA[${c}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(v)+`<!--${c}-->`+this.newLine;if(p[0]==="?")return this.indentate(v)+"<"+p+g+"?"+this.tagEndChar;{let y=this.options.tagValueProcessor(p,c);return y=this.replaceEntitiesValue(y),y===""?this.indentate(v)+"<"+p+g+this.closeTag(p)+this.tagEndChar:this.indentate(v)+"<"+p+g+">"+y+"</"+p+this.tagEndChar}},a.prototype.replaceEntitiesValue=function(c){if(c&&c.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){const g=this.options.entities[p];c=c.replace(g.regex,g.val)}return c},n.exports=a},87:n=>{function e(a,l,h,f){let c="",p=!1;for(let g=0;g<a.length;g++){const v=a[g],y=t(v);if(y===void 0)continue;let w="";if(w=h.length===0?y:`${h}.${y}`,y===l.textNodeName){let C=v[y];i(w,l)||(C=l.tagValueProcessor(y,C),C=s(C,l)),p&&(c+=f),c+=C,p=!1;continue}if(y===l.cdataPropName){p&&(c+=f),c+=`<![CDATA[${v[y][0][l.textNodeName]}]]>`,p=!1;continue}if(y===l.commentPropName){c+=f+`<!--${v[y][0][l.textNodeName]}-->`,p=!0;continue}if(y[0]==="?"){const C=r(v[":@"],l),S=y==="?xml"?"":f;let A=v[y][0][l.textNodeName];A=A.length!==0?" "+A:"",c+=S+`<${y}${A}${C}?>`,p=!0;continue}let E=f;E!==""&&(E+=l.indentBy);const N=f+`<${y}${r(v[":@"],l)}`,_=e(v[y],l,w,E);l.unpairedTags.indexOf(y)!==-1?l.suppressUnpairedNode?c+=N+">":c+=N+"/>":_&&_.length!==0||!l.suppressEmptyNode?_&&_.endsWith(">")?c+=N+`>${_}${f}</${y}>`:(c+=N+">",_&&f!==""&&(_.includes("/>")||_.includes("</"))?c+=f+l.indentBy+_+f:c+=_,c+=`</${y}>`):c+=N+"/>",p=!0}return c}function t(a){const l=Object.keys(a);for(let h=0;h<l.length;h++){const f=l[h];if(a.hasOwnProperty(f)&&f!==":@")return f}}function r(a,l){let h="";if(a&&!l.ignoreAttributes)for(let f in a){if(!a.hasOwnProperty(f))continue;let c=l.attributeValueProcessor(f,a[f]);c=s(c,l),c===!0&&l.suppressBooleanAttributes?h+=` ${f.substr(l.attributeNamePrefix.length)}`:h+=` ${f.substr(l.attributeNamePrefix.length)}="${c}"`}return h}function i(a,l){let h=(a=a.substr(0,a.length-l.textNodeName.length-1)).substr(a.lastIndexOf(".")+1);for(let f in l.stopNodes)if(l.stopNodes[f]===a||l.stopNodes[f]==="*."+h)return!0;return!1}function s(a,l){if(a&&a.length>0&&l.processEntities)for(let h=0;h<l.entities.length;h++){const f=l.entities[h];a=a.replace(f.regex,f.val)}return a}n.exports=function(a,l){let h="";return l.format&&l.indentBy.length>0&&(h=`
`),e(a,l,"",h)}},193:(n,e,t)=>{const r=t(705);function i(p,g){let v="";for(;g<p.length&&p[g]!=="'"&&p[g]!=='"';g++)v+=p[g];if(v=v.trim(),v.indexOf(" ")!==-1)throw new Error("External entites are not supported");const y=p[g++];let w="";for(;g<p.length&&p[g]!==y;g++)w+=p[g];return[v,w,g]}function s(p,g){return p[g+1]==="!"&&p[g+2]==="-"&&p[g+3]==="-"}function a(p,g){return p[g+1]==="!"&&p[g+2]==="E"&&p[g+3]==="N"&&p[g+4]==="T"&&p[g+5]==="I"&&p[g+6]==="T"&&p[g+7]==="Y"}function l(p,g){return p[g+1]==="!"&&p[g+2]==="E"&&p[g+3]==="L"&&p[g+4]==="E"&&p[g+5]==="M"&&p[g+6]==="E"&&p[g+7]==="N"&&p[g+8]==="T"}function h(p,g){return p[g+1]==="!"&&p[g+2]==="A"&&p[g+3]==="T"&&p[g+4]==="T"&&p[g+5]==="L"&&p[g+6]==="I"&&p[g+7]==="S"&&p[g+8]==="T"}function f(p,g){return p[g+1]==="!"&&p[g+2]==="N"&&p[g+3]==="O"&&p[g+4]==="T"&&p[g+5]==="A"&&p[g+6]==="T"&&p[g+7]==="I"&&p[g+8]==="O"&&p[g+9]==="N"}function c(p){if(r.isName(p))return p;throw new Error(`Invalid entity name ${p}`)}n.exports=function(p,g){const v={};if(p[g+3]!=="O"||p[g+4]!=="C"||p[g+5]!=="T"||p[g+6]!=="Y"||p[g+7]!=="P"||p[g+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{g+=9;let y=1,w=!1,E=!1,N="";for(;g<p.length;g++)if(p[g]!=="<"||E)if(p[g]===">"){if(E?p[g-1]==="-"&&p[g-2]==="-"&&(E=!1,y--):y--,y===0)break}else p[g]==="["?w=!0:N+=p[g];else{if(w&&a(p,g)){let _,C;g+=7,[_,C,g]=i(p,g+1),C.indexOf("&")===-1&&(v[c(_)]={regx:RegExp(`&${_};`,"g"),val:C})}else if(w&&l(p,g))g+=8;else if(w&&h(p,g))g+=8;else if(w&&f(p,g))g+=9;else{if(!s)throw new Error("Invalid DOCTYPE");E=!0}y++,N=""}if(y!==0)throw new Error("Unclosed DOCTYPE")}return{entities:v,i:g}}},63:(n,e)=>{const t={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,i){return i},attributeValueProcessor:function(r,i){return i},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,i,s){return r}};e.buildOptions=function(r){return Object.assign({},t,r)},e.defaultOptions=t},299:(n,e,t)=>{const r=t(705),i=t(365),s=t(193),a=t(494),l=t(118);function h(k){const D=Object.keys(k);for(let T=0;T<D.length;T++){const I=D[T];this.lastEntities[I]={regex:new RegExp("&"+I+";","g"),val:k[I]}}}function f(k,D,T,I,X,te,J){if(k!==void 0&&(this.options.trimValues&&!I&&(k=k.trim()),k.length>0)){J||(k=this.replaceEntitiesValue(k));const F=this.options.tagValueProcessor(D,k,T,X,te);return F==null?k:typeof F!=typeof k||F!==k?F:this.options.trimValues||k.trim()===k?A(k,this.options.parseTagValue,this.options.numberParseOptions):k}}function c(k){if(this.options.removeNSPrefix){const D=k.split(":"),T=k.charAt(0)==="/"?"/":"";if(D[0]==="xmlns")return"";D.length===2&&(k=T+D[1])}return k}const p=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function g(k,D,T){if(this.options.ignoreAttributes!==!0&&typeof k=="string"){const I=r.getAllMatches(k,p),X=I.length,te={};for(let J=0;J<X;J++){const F=this.resolveNameSpace(I[J][1]);if(this.ignoreAttributesFn(F,D))continue;let ne=I[J][4],Z=this.options.attributeNamePrefix+F;if(F.length)if(this.options.transformAttributeName&&(Z=this.options.transformAttributeName(Z)),Z==="__proto__"&&(Z="#__proto__"),ne!==void 0){this.options.trimValues&&(ne=ne.trim()),ne=this.replaceEntitiesValue(ne);const ue=this.options.attributeValueProcessor(F,ne,D);te[Z]=ue==null?ne:typeof ue!=typeof ne||ue!==ne?ue:A(ne,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(te[Z]=!0)}if(!Object.keys(te).length)return;if(this.options.attributesGroupName){const J={};return J[this.options.attributesGroupName]=te,J}return te}}const v=function(k){k=k.replace(/\r\n?/g,`
`);const D=new i("!xml");let T=D,I="",X="";for(let te=0;te<k.length;te++)if(k[te]==="<")if(k[te+1]==="/"){const J=_(k,">",te,"Closing Tag is not closed.");let F=k.substring(te+2,J).trim();if(this.options.removeNSPrefix){const ue=F.indexOf(":");ue!==-1&&(F=F.substr(ue+1))}this.options.transformTagName&&(F=this.options.transformTagName(F)),T&&(I=this.saveTextToParentTag(I,T,X));const ne=X.substring(X.lastIndexOf(".")+1);if(F&&this.options.unpairedTags.indexOf(F)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${F}>`);let Z=0;ne&&this.options.unpairedTags.indexOf(ne)!==-1?(Z=X.lastIndexOf(".",X.lastIndexOf(".")-1),this.tagsNodeStack.pop()):Z=X.lastIndexOf("."),X=X.substring(0,Z),T=this.tagsNodeStack.pop(),I="",te=J}else if(k[te+1]==="?"){let J=C(k,te,!1,"?>");if(!J)throw new Error("Pi Tag is not closed.");if(I=this.saveTextToParentTag(I,T,X),!(this.options.ignoreDeclaration&&J.tagName==="?xml"||this.options.ignorePiTags)){const F=new i(J.tagName);F.add(this.options.textNodeName,""),J.tagName!==J.tagExp&&J.attrExpPresent&&(F[":@"]=this.buildAttributesMap(J.tagExp,X,J.tagName)),this.addChild(T,F,X)}te=J.closeIndex+1}else if(k.substr(te+1,3)==="!--"){const J=_(k,"-->",te+4,"Comment is not closed.");if(this.options.commentPropName){const F=k.substring(te+4,J-2);I=this.saveTextToParentTag(I,T,X),T.add(this.options.commentPropName,[{[this.options.textNodeName]:F}])}te=J}else if(k.substr(te+1,2)==="!D"){const J=s(k,te);this.docTypeEntities=J.entities,te=J.i}else if(k.substr(te+1,2)==="!["){const J=_(k,"]]>",te,"CDATA is not closed.")-2,F=k.substring(te+9,J);I=this.saveTextToParentTag(I,T,X);let ne=this.parseTextData(F,T.tagname,X,!0,!1,!0,!0);ne==null&&(ne=""),this.options.cdataPropName?T.add(this.options.cdataPropName,[{[this.options.textNodeName]:F}]):T.add(this.options.textNodeName,ne),te=J+2}else{let J=C(k,te,this.options.removeNSPrefix),F=J.tagName;const ne=J.rawTagName;let Z=J.tagExp,ue=J.attrExpPresent,_e=J.closeIndex;this.options.transformTagName&&(F=this.options.transformTagName(F)),T&&I&&T.tagname!=="!xml"&&(I=this.saveTextToParentTag(I,T,X,!1));const Oe=T;if(Oe&&this.options.unpairedTags.indexOf(Oe.tagname)!==-1&&(T=this.tagsNodeStack.pop(),X=X.substring(0,X.lastIndexOf("."))),F!==D.tagname&&(X+=X?"."+F:F),this.isItStopNode(this.options.stopNodes,X,F)){let ze="";if(Z.length>0&&Z.lastIndexOf("/")===Z.length-1)F[F.length-1]==="/"?(F=F.substr(0,F.length-1),X=X.substr(0,X.length-1),Z=F):Z=Z.substr(0,Z.length-1),te=J.closeIndex;else if(this.options.unpairedTags.indexOf(F)!==-1)te=J.closeIndex;else{const qe=this.readStopNodeData(k,ne,_e+1);if(!qe)throw new Error(`Unexpected end of ${ne}`);te=qe.i,ze=qe.tagContent}const et=new i(F);F!==Z&&ue&&(et[":@"]=this.buildAttributesMap(Z,X,F)),ze&&(ze=this.parseTextData(ze,F,X,!0,ue,!0,!0)),X=X.substr(0,X.lastIndexOf(".")),et.add(this.options.textNodeName,ze),this.addChild(T,et,X)}else{if(Z.length>0&&Z.lastIndexOf("/")===Z.length-1){F[F.length-1]==="/"?(F=F.substr(0,F.length-1),X=X.substr(0,X.length-1),Z=F):Z=Z.substr(0,Z.length-1),this.options.transformTagName&&(F=this.options.transformTagName(F));const ze=new i(F);F!==Z&&ue&&(ze[":@"]=this.buildAttributesMap(Z,X,F)),this.addChild(T,ze,X),X=X.substr(0,X.lastIndexOf("."))}else{const ze=new i(F);this.tagsNodeStack.push(T),F!==Z&&ue&&(ze[":@"]=this.buildAttributesMap(Z,X,F)),this.addChild(T,ze,X),T=ze}I="",te=_e}}else I+=k[te];return D.child};function y(k,D,T){const I=this.options.updateTag(D.tagname,T,D[":@"]);I===!1||(typeof I=="string"&&(D.tagname=I),k.addChild(D))}const w=function(k){if(this.options.processEntities){for(let D in this.docTypeEntities){const T=this.docTypeEntities[D];k=k.replace(T.regx,T.val)}for(let D in this.lastEntities){const T=this.lastEntities[D];k=k.replace(T.regex,T.val)}if(this.options.htmlEntities)for(let D in this.htmlEntities){const T=this.htmlEntities[D];k=k.replace(T.regex,T.val)}k=k.replace(this.ampEntity.regex,this.ampEntity.val)}return k};function E(k,D,T,I){return k&&(I===void 0&&(I=Object.keys(D.child).length===0),(k=this.parseTextData(k,D.tagname,T,!1,!!D[":@"]&&Object.keys(D[":@"]).length!==0,I))!==void 0&&k!==""&&D.add(this.options.textNodeName,k),k=""),k}function N(k,D,T){const I="*."+T;for(const X in k){const te=k[X];if(I===te||D===te)return!0}return!1}function _(k,D,T,I){const X=k.indexOf(D,T);if(X===-1)throw new Error(I);return X+D.length-1}function C(k,D,T){const I=(function(ue,_e){let Oe,ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",et="";for(let qe=_e;qe<ue.length;qe++){let Ye=ue[qe];if(Oe)Ye===Oe&&(Oe="");else if(Ye==='"'||Ye==="'")Oe=Ye;else if(Ye===ze[0]){if(!ze[1])return{data:et,index:qe};if(ue[qe+1]===ze[1])return{data:et,index:qe}}else Ye==="	"&&(Ye=" ");et+=Ye}})(k,D+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!I)return;let X=I.data;const te=I.index,J=X.search(/\s/);let F=X,ne=!0;J!==-1&&(F=X.substring(0,J),X=X.substring(J+1).trimStart());const Z=F;if(T){const ue=F.indexOf(":");ue!==-1&&(F=F.substr(ue+1),ne=F!==I.data.substr(ue+1))}return{tagName:F,tagExp:X,closeIndex:te,attrExpPresent:ne,rawTagName:Z}}function S(k,D,T){const I=T;let X=1;for(;T<k.length;T++)if(k[T]==="<")if(k[T+1]==="/"){const te=_(k,">",T,`${D} is not closed`);if(k.substring(T+2,te).trim()===D&&(X--,X===0))return{tagContent:k.substring(I,T),i:te};T=te}else if(k[T+1]==="?")T=_(k,"?>",T+1,"StopNode is not closed.");else if(k.substr(T+1,3)==="!--")T=_(k,"-->",T+3,"StopNode is not closed.");else if(k.substr(T+1,2)==="![")T=_(k,"]]>",T,"StopNode is not closed.")-2;else{const te=C(k,T,">");te&&((te&&te.tagName)===D&&te.tagExp[te.tagExp.length-1]!=="/"&&X++,T=te.closeIndex)}}function A(k,D,T){if(D&&typeof k=="string"){const I=k.trim();return I==="true"||I!=="false"&&a(k,T)}return r.isExist(k)?k:""}n.exports=class{constructor(k){this.options=k,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(D,T)=>String.fromCharCode(Number.parseInt(T,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(D,T)=>String.fromCharCode(Number.parseInt(T,16))}},this.addExternalEntities=h,this.parseXml=v,this.parseTextData=f,this.resolveNameSpace=c,this.buildAttributesMap=g,this.isItStopNode=N,this.replaceEntitiesValue=w,this.readStopNodeData=S,this.saveTextToParentTag=E,this.addChild=y,this.ignoreAttributesFn=l(this.options.ignoreAttributes)}}},338:(n,e,t)=>{const{buildOptions:r}=t(63),i=t(299),{prettify:s}=t(728),a=t(31);n.exports=class{constructor(l){this.externalEntities={},this.options=r(l)}parse(l,h){if(typeof l!="string"){if(!l.toString)throw new Error("XML data is accepted in String or Bytes[] form.");l=l.toString()}if(h){h===!0&&(h={});const p=a.validate(l,h);if(p!==!0)throw Error(`${p.err.msg}:${p.err.line}:${p.err.col}`)}const f=new i(this.options);f.addExternalEntities(this.externalEntities);const c=f.parseXml(l);return this.options.preserveOrder||c===void 0?c:s(c,this.options)}addEntity(l,h){if(h.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(l.indexOf("&")!==-1||l.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(h==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[l]=h}}},728:(n,e)=>{function t(a,l,h){let f;const c={};for(let p=0;p<a.length;p++){const g=a[p],v=r(g);let y="";if(y=h===void 0?v:h+"."+v,v===l.textNodeName)f===void 0?f=g[v]:f+=""+g[v];else{if(v===void 0)continue;if(g[v]){let w=t(g[v],l,y);const E=s(w,l);g[":@"]?i(w,g[":@"],y,l):Object.keys(w).length!==1||w[l.textNodeName]===void 0||l.alwaysCreateTextNode?Object.keys(w).length===0&&(l.alwaysCreateTextNode?w[l.textNodeName]="":w=""):w=w[l.textNodeName],c[v]!==void 0&&c.hasOwnProperty(v)?(Array.isArray(c[v])||(c[v]=[c[v]]),c[v].push(w)):l.isArray(v,y,E)?c[v]=[w]:c[v]=w}}}return typeof f=="string"?f.length>0&&(c[l.textNodeName]=f):f!==void 0&&(c[l.textNodeName]=f),c}function r(a){const l=Object.keys(a);for(let h=0;h<l.length;h++){const f=l[h];if(f!==":@")return f}}function i(a,l,h,f){if(l){const c=Object.keys(l),p=c.length;for(let g=0;g<p;g++){const v=c[g];f.isArray(v,h+"."+v,!0,!0)?a[v]=[l[v]]:a[v]=l[v]}}}function s(a,l){const{textNodeName:h}=l,f=Object.keys(a).length;return f===0||!(f!==1||!a[h]&&typeof a[h]!="boolean"&&a[h]!==0)}e.prettify=function(a,l){return t(a,l)}},365:n=>{n.exports=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}},135:n=>{function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}n.exports=function(t){return t!=null&&(e(t)||(function(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&e(r.slice(0,0))})(t)||!!t._isBuffer)}},542:(n,e,t)=>{(function(){var r=t(298),i=t(526).utf8,s=t(135),a=t(526).bin,l=function(h,f){h.constructor==String?h=f&&f.encoding==="binary"?a.stringToBytes(h):i.stringToBytes(h):s(h)?h=Array.prototype.slice.call(h,0):Array.isArray(h)||h.constructor===Uint8Array||(h=h.toString());for(var c=r.bytesToWords(h),p=8*h.length,g=1732584193,v=-271733879,y=-1732584194,w=271733878,E=0;E<c.length;E++)c[E]=16711935&(c[E]<<8|c[E]>>>24)|4278255360&(c[E]<<24|c[E]>>>8);c[p>>>5]|=128<<p%32,c[14+(p+64>>>9<<4)]=p;var N=l._ff,_=l._gg,C=l._hh,S=l._ii;for(E=0;E<c.length;E+=16){var A=g,k=v,D=y,T=w;g=N(g,v,y,w,c[E+0],7,-680876936),w=N(w,g,v,y,c[E+1],12,-389564586),y=N(y,w,g,v,c[E+2],17,606105819),v=N(v,y,w,g,c[E+3],22,-1044525330),g=N(g,v,y,w,c[E+4],7,-176418897),w=N(w,g,v,y,c[E+5],12,1200080426),y=N(y,w,g,v,c[E+6],17,-1473231341),v=N(v,y,w,g,c[E+7],22,-45705983),g=N(g,v,y,w,c[E+8],7,1770035416),w=N(w,g,v,y,c[E+9],12,-1958414417),y=N(y,w,g,v,c[E+10],17,-42063),v=N(v,y,w,g,c[E+11],22,-1990404162),g=N(g,v,y,w,c[E+12],7,1804603682),w=N(w,g,v,y,c[E+13],12,-40341101),y=N(y,w,g,v,c[E+14],17,-1502002290),g=_(g,v=N(v,y,w,g,c[E+15],22,1236535329),y,w,c[E+1],5,-165796510),w=_(w,g,v,y,c[E+6],9,-1069501632),y=_(y,w,g,v,c[E+11],14,643717713),v=_(v,y,w,g,c[E+0],20,-373897302),g=_(g,v,y,w,c[E+5],5,-701558691),w=_(w,g,v,y,c[E+10],9,38016083),y=_(y,w,g,v,c[E+15],14,-660478335),v=_(v,y,w,g,c[E+4],20,-405537848),g=_(g,v,y,w,c[E+9],5,568446438),w=_(w,g,v,y,c[E+14],9,-1019803690),y=_(y,w,g,v,c[E+3],14,-187363961),v=_(v,y,w,g,c[E+8],20,1163531501),g=_(g,v,y,w,c[E+13],5,-1444681467),w=_(w,g,v,y,c[E+2],9,-51403784),y=_(y,w,g,v,c[E+7],14,1735328473),g=C(g,v=_(v,y,w,g,c[E+12],20,-1926607734),y,w,c[E+5],4,-378558),w=C(w,g,v,y,c[E+8],11,-2022574463),y=C(y,w,g,v,c[E+11],16,1839030562),v=C(v,y,w,g,c[E+14],23,-35309556),g=C(g,v,y,w,c[E+1],4,-1530992060),w=C(w,g,v,y,c[E+4],11,1272893353),y=C(y,w,g,v,c[E+7],16,-155497632),v=C(v,y,w,g,c[E+10],23,-1094730640),g=C(g,v,y,w,c[E+13],4,681279174),w=C(w,g,v,y,c[E+0],11,-358537222),y=C(y,w,g,v,c[E+3],16,-722521979),v=C(v,y,w,g,c[E+6],23,76029189),g=C(g,v,y,w,c[E+9],4,-640364487),w=C(w,g,v,y,c[E+12],11,-421815835),y=C(y,w,g,v,c[E+15],16,530742520),g=S(g,v=C(v,y,w,g,c[E+2],23,-995338651),y,w,c[E+0],6,-198630844),w=S(w,g,v,y,c[E+7],10,1126891415),y=S(y,w,g,v,c[E+14],15,-1416354905),v=S(v,y,w,g,c[E+5],21,-57434055),g=S(g,v,y,w,c[E+12],6,1700485571),w=S(w,g,v,y,c[E+3],10,-1894986606),y=S(y,w,g,v,c[E+10],15,-1051523),v=S(v,y,w,g,c[E+1],21,-2054922799),g=S(g,v,y,w,c[E+8],6,1873313359),w=S(w,g,v,y,c[E+15],10,-30611744),y=S(y,w,g,v,c[E+6],15,-1560198380),v=S(v,y,w,g,c[E+13],21,1309151649),g=S(g,v,y,w,c[E+4],6,-145523070),w=S(w,g,v,y,c[E+11],10,-1120210379),y=S(y,w,g,v,c[E+2],15,718787259),v=S(v,y,w,g,c[E+9],21,-343485551),g=g+A>>>0,v=v+k>>>0,y=y+D>>>0,w=w+T>>>0}return r.endian([g,v,y,w])};l._ff=function(h,f,c,p,g,v,y){var w=h+(f&c|~f&p)+(g>>>0)+y;return(w<<v|w>>>32-v)+f},l._gg=function(h,f,c,p,g,v,y){var w=h+(f&p|c&~p)+(g>>>0)+y;return(w<<v|w>>>32-v)+f},l._hh=function(h,f,c,p,g,v,y){var w=h+(f^c^p)+(g>>>0)+y;return(w<<v|w>>>32-v)+f},l._ii=function(h,f,c,p,g,v,y){var w=h+(c^(f|~p))+(g>>>0)+y;return(w<<v|w>>>32-v)+f},l._blocksize=16,l._digestsize=16,n.exports=function(h,f){if(h==null)throw new Error("Illegal argument "+h);var c=r.wordsToBytes(l(h,f));return f&&f.asBytes?c:f&&f.asString?a.bytesToString(c):r.bytesToHex(c)}})()},285:(n,e,t)=>{var r=t(2);n.exports=function(N){return N?(N.substr(0,2)==="{}"&&(N="\\{\\}"+N.substr(2)),E((function(_){return _.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(a).split("\\,").join(l).split("\\.").join(h)})(N),!0).map(c)):[]};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",l="\0COMMA"+Math.random()+"\0",h="\0PERIOD"+Math.random()+"\0";function f(N){return parseInt(N,10)==N?parseInt(N,10):N.charCodeAt(0)}function c(N){return N.split(i).join("\\").split(s).join("{").split(a).join("}").split(l).join(",").split(h).join(".")}function p(N){if(!N)return[""];var _=[],C=r("{","}",N);if(!C)return N.split(",");var S=C.pre,A=C.body,k=C.post,D=S.split(",");D[D.length-1]+="{"+A+"}";var T=p(k);return k.length&&(D[D.length-1]+=T.shift(),D.push.apply(D,T)),_.push.apply(_,D),_}function g(N){return"{"+N+"}"}function v(N){return/^-?0\d/.test(N)}function y(N,_){return N<=_}function w(N,_){return N>=_}function E(N,_){var C=[],S=r("{","}",N);if(!S)return[N];var A=S.pre,k=S.post.length?E(S.post,!1):[""];if(/\$$/.test(S.pre))for(var D=0;D<k.length;D++){var T=A+"{"+S.body+"}"+k[D];C.push(T)}else{var I,X,te=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(S.body),J=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(S.body),F=te||J,ne=S.body.indexOf(",")>=0;if(!F&&!ne)return S.post.match(/,.*\}/)?E(N=S.pre+"{"+S.body+a+S.post):[N];if(F)I=S.body.split(/\.\./);else if((I=p(S.body)).length===1&&(I=E(I[0],!1).map(g)).length===1)return k.map((function(qt){return S.pre+I[0]+qt}));if(F){var Z=f(I[0]),ue=f(I[1]),_e=Math.max(I[0].length,I[1].length),Oe=I.length==3?Math.abs(f(I[2])):1,ze=y;ue<Z&&(Oe*=-1,ze=w);var et=I.some(v);X=[];for(var qe=Z;ze(qe,ue);qe+=Oe){var Ye;if(J)(Ye=String.fromCharCode(qe))==="\\"&&(Ye="");else if(Ye=String(qe),et){var Zt=_e-Ye.length;if(Zt>0){var hr=new Array(Zt+1).join("0");Ye=qe<0?"-"+hr+Ye.slice(1):hr+Ye}}X.push(Ye)}}else{X=[];for(var Kt=0;Kt<I.length;Kt++)X.push.apply(X,E(I[Kt],!1))}for(Kt=0;Kt<X.length;Kt++)for(D=0;D<k.length;D++)T=A+X[Kt]+k[D],(!_||F||T)&&C.push(T)}return C}},829:n=>{function e(f){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(f)}function t(f){var c=typeof Map=="function"?new Map:void 0;return t=function(p){if(p===null||(g=p,Function.toString.call(g).indexOf("[native code]")===-1))return p;var g;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(c!==void 0){if(c.has(p))return c.get(p);c.set(p,v)}function v(){return r(p,arguments,s(this).constructor)}return v.prototype=Object.create(p.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),i(v,p)},t(f)}function r(f,c,p){return r=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}})()?Reflect.construct:function(g,v,y){var w=[null];w.push.apply(w,v);var E=new(Function.bind.apply(g,w));return y&&i(E,y.prototype),E},r.apply(null,arguments)}function i(f,c){return i=Object.setPrototypeOf||function(p,g){return p.__proto__=g,p},i(f,c)}function s(f){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},s(f)}var a=(function(f){function c(p){var g;return(function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,c),(g=(function(v,y){return!y||e(y)!=="object"&&typeof y!="function"?(function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w})(v):y})(this,s(c).call(this,p))).name="ObjectPrototypeMutationError",g}return(function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),g&&i(p,g)})(c,f),c})(t(Error));function l(f,c){for(var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},g=c.split("."),v=g.length,y=function(N){var _=g[N];if(!f)return{v:void 0};if(_==="+"){if(Array.isArray(f))return{v:f.map((function(S,A){var k=g.slice(N+1);return k.length>0?l(S,k.join("."),p):p(f,A,g,N)}))};var C=g.slice(0,N).join(".");throw new Error("Object at wildcard (".concat(C,") is not an array"))}f=p(f,_,g,N)},w=0;w<v;w++){var E=y(w);if(e(E)==="object")return E.v}return f}function h(f,c){return f.length===c+1}n.exports={set:function(f,c,p){if(e(f)!="object"||f===null||c===void 0)return f;if(typeof c=="number")return f[c]=p,f[c];try{return l(f,c,(function(g,v,y,w){if(g===Reflect.getPrototypeOf({}))throw new a("Attempting to mutate Object.prototype");if(!g[v]){var E=Number.isInteger(Number(y[w+1])),N=y[w+1]==="+";g[v]=E||N?[]:{}}return h(y,w)&&(g[v]=p),g[v]}))}catch(g){if(g instanceof a)throw g;return f}},get:function(f,c){if(e(f)!="object"||f===null||c===void 0)return f;if(typeof c=="number")return f[c];try{return l(f,c,(function(p,g){return p[g]}))}catch{return f}},has:function(f,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e(f)!="object"||f===null||c===void 0)return!1;if(typeof c=="number")return c in f;try{var g=!1;return l(f,c,(function(v,y,w,E){if(!h(w,E))return v&&v[y];g=p.own?v.hasOwnProperty(y):y in v})),g}catch{return!1}},hasOwn:function(f,c,p){return this.has(f,c,p||{own:!0})},isIn:function(f,c,p){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(e(f)!="object"||f===null||c===void 0)return!1;try{var v=!1,y=!1;return l(f,c,(function(w,E,N,_){return v=v||w===p||!!w&&w[E]===p,y=h(N,_)&&e(w)==="object"&&E in w,w&&w[E]})),g.validPath?v&&y:v}catch{return!1}},ObjectPrototypeMutationError:a}},47:(n,e,t)=>{var r=t(410),i=function(f){return typeof f=="string"};function s(f,c){for(var p=[],g=0;g<f.length;g++){var v=f[g];v&&v!=="."&&(v===".."?p.length&&p[p.length-1]!==".."?p.pop():c&&p.push(".."):p.push(v))}return p}var a=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,l={};function h(f){return a.exec(f).slice(1)}l.resolve=function(){for(var f="",c=!1,p=arguments.length-1;p>=-1&&!c;p--){var g=p>=0?arguments[p]:process.cwd();if(!i(g))throw new TypeError("Arguments to path.resolve must be strings");g&&(f=g+"/"+f,c=g.charAt(0)==="/")}return(c?"/":"")+(f=s(f.split("/"),!c).join("/"))||"."},l.normalize=function(f){var c=l.isAbsolute(f),p=f.substr(-1)==="/";return(f=s(f.split("/"),!c).join("/"))||c||(f="."),f&&p&&(f+="/"),(c?"/":"")+f},l.isAbsolute=function(f){return f.charAt(0)==="/"},l.join=function(){for(var f="",c=0;c<arguments.length;c++){var p=arguments[c];if(!i(p))throw new TypeError("Arguments to path.join must be strings");p&&(f+=f?"/"+p:p)}return l.normalize(f)},l.relative=function(f,c){function p(_){for(var C=0;C<_.length&&_[C]==="";C++);for(var S=_.length-1;S>=0&&_[S]==="";S--);return C>S?[]:_.slice(C,S+1)}f=l.resolve(f).substr(1),c=l.resolve(c).substr(1);for(var g=p(f.split("/")),v=p(c.split("/")),y=Math.min(g.length,v.length),w=y,E=0;E<y;E++)if(g[E]!==v[E]){w=E;break}var N=[];for(E=w;E<g.length;E++)N.push("..");return(N=N.concat(v.slice(w))).join("/")},l._makeLong=function(f){return f},l.dirname=function(f){var c=h(f),p=c[0],g=c[1];return p||g?(g&&(g=g.substr(0,g.length-1)),p+g):"."},l.basename=function(f,c){var p=h(f)[2];return c&&p.substr(-1*c.length)===c&&(p=p.substr(0,p.length-c.length)),p},l.extname=function(f){return h(f)[3]},l.format=function(f){if(!r.isObject(f))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof f);var c=f.root||"";if(!i(c))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof f.root);return(f.dir?f.dir+l.sep:"")+(f.base||"")},l.parse=function(f){if(!i(f))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof f);var c=h(f);if(!c||c.length!==4)throw new TypeError("Invalid path '"+f+"'");return c[1]=c[1]||"",c[2]=c[2]||"",c[3]=c[3]||"",{root:c[0],dir:c[0]+c[1].slice(0,c[1].length-1),base:c[2],ext:c[3],name:c[2].slice(0,c[2].length-c[3].length)}},l.sep="/",l.delimiter=":",n.exports=l},647:(n,e)=>{var t=Object.prototype.hasOwnProperty;function r(s){try{return decodeURIComponent(s.replace(/\+/g," "))}catch{return null}}function i(s){try{return encodeURIComponent(s)}catch{return null}}e.stringify=function(s,a){a=a||"";var l,h,f=[];for(h in typeof a!="string"&&(a="?"),s)if(t.call(s,h)){if((l=s[h])||l!=null&&!isNaN(l)||(l=""),h=i(h),l=i(l),h===null||l===null)continue;f.push(h+"="+l)}return f.length?a+f.join("&"):""},e.parse=function(s){for(var a,l=/([^=?#&]+)=?([^&]*)/g,h={};a=l.exec(s);){var f=r(a[1]),c=r(a[2]);f===null||c===null||f in h||(h[f]=c)}return h}},670:n=>{n.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}},494:n=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,t=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};n.exports=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s=Object.assign({},r,s),!i||typeof i!="string")return i;let a=i.trim();if(s.skipLike!==void 0&&s.skipLike.test(a))return i;if(s.hex&&e.test(a))return Number.parseInt(a,16);{const h=t.exec(a);if(h){const f=h[1],c=h[2];let p=((l=h[3])&&l.indexOf(".")!==-1&&((l=l.replace(/0+$/,""))==="."?l="0":l[0]==="."?l="0"+l:l[l.length-1]==="."&&(l=l.substr(0,l.length-1))),l);const g=h[4]||h[6];if(!s.leadingZeros&&c.length>0&&f&&a[2]!=="."||!s.leadingZeros&&c.length>0&&!f&&a[1]!==".")return i;{const v=Number(a),y=""+v;return y.search(/[eE]/)!==-1||g?s.eNotation?v:i:a.indexOf(".")!==-1?y==="0"&&p===""||y===p||f&&y==="-"+p?v:i:c?p===y||f+p===y?v:i:a===y||a===f+y?v:i}}return i}var l}},737:(n,e,t)=>{var r=t(670),i=t(647),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,l=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/:\d+$/,f=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function p(_){return(_||"").toString().replace(s,"")}var g=[["#","hash"],["?","query"],function(_,C){return w(C.protocol)?_.replace(/\\/g,"/"):_},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],v={hash:1,query:1};function y(_){var C,S=(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}).location||{},A={},k=typeof(_=_||S);if(_.protocol==="blob:")A=new N(unescape(_.pathname),{});else if(k==="string")for(C in A=new N(_,{}),v)delete A[C];else if(k==="object"){for(C in _)C in v||(A[C]=_[C]);A.slashes===void 0&&(A.slashes=l.test(_.href))}return A}function w(_){return _==="file:"||_==="ftp:"||_==="http:"||_==="https:"||_==="ws:"||_==="wss:"}function E(_,C){_=(_=p(_)).replace(a,""),C=C||{};var S,A=f.exec(_),k=A[1]?A[1].toLowerCase():"",D=!!A[2],T=!!A[3],I=0;return D?T?(S=A[2]+A[3]+A[4],I=A[2].length+A[3].length):(S=A[2]+A[4],I=A[2].length):T?(S=A[3]+A[4],I=A[3].length):S=A[4],k==="file:"?I>=2&&(S=S.slice(2)):w(k)?S=A[4]:k?D&&(S=S.slice(2)):I>=2&&w(C.protocol)&&(S=A[4]),{protocol:k,slashes:D||w(k),slashesCount:I,rest:S}}function N(_,C,S){if(_=(_=p(_)).replace(a,""),!(this instanceof N))return new N(_,C,S);var A,k,D,T,I,X,te=g.slice(),J=typeof C,F=this,ne=0;for(J!=="object"&&J!=="string"&&(S=C,C=null),S&&typeof S!="function"&&(S=i.parse),A=!(k=E(_||"",C=y(C))).protocol&&!k.slashes,F.slashes=k.slashes||A&&C.slashes,F.protocol=k.protocol||C.protocol||"",_=k.rest,(k.protocol==="file:"&&(k.slashesCount!==2||c.test(_))||!k.slashes&&(k.protocol||k.slashesCount<2||!w(F.protocol)))&&(te[3]=[/(.*)/,"pathname"]);ne<te.length;ne++)typeof(T=te[ne])!="function"?(D=T[0],X=T[1],D!=D?F[X]=_:typeof D=="string"?~(I=D==="@"?_.lastIndexOf(D):_.indexOf(D))&&(typeof T[2]=="number"?(F[X]=_.slice(0,I),_=_.slice(I+T[2])):(F[X]=_.slice(I),_=_.slice(0,I))):(I=D.exec(_))&&(F[X]=I[1],_=_.slice(0,I.index)),F[X]=F[X]||A&&T[3]&&C[X]||"",T[4]&&(F[X]=F[X].toLowerCase())):_=T(_,F);S&&(F.query=S(F.query)),A&&C.slashes&&F.pathname.charAt(0)!=="/"&&(F.pathname!==""||C.pathname!=="")&&(F.pathname=(function(Z,ue){if(Z==="")return ue;for(var _e=(ue||"/").split("/").slice(0,-1).concat(Z.split("/")),Oe=_e.length,ze=_e[Oe-1],et=!1,qe=0;Oe--;)_e[Oe]==="."?_e.splice(Oe,1):_e[Oe]===".."?(_e.splice(Oe,1),qe++):qe&&(Oe===0&&(et=!0),_e.splice(Oe,1),qe--);return et&&_e.unshift(""),ze!=="."&&ze!==".."||_e.push(""),_e.join("/")})(F.pathname,C.pathname)),F.pathname.charAt(0)!=="/"&&w(F.protocol)&&(F.pathname="/"+F.pathname),r(F.port,F.protocol)||(F.host=F.hostname,F.port=""),F.username=F.password="",F.auth&&(~(I=F.auth.indexOf(":"))?(F.username=F.auth.slice(0,I),F.username=encodeURIComponent(decodeURIComponent(F.username)),F.password=F.auth.slice(I+1),F.password=encodeURIComponent(decodeURIComponent(F.password))):F.username=encodeURIComponent(decodeURIComponent(F.auth)),F.auth=F.password?F.username+":"+F.password:F.username),F.origin=F.protocol!=="file:"&&w(F.protocol)&&F.host?F.protocol+"//"+F.host:"null",F.href=F.toString()}N.prototype={set:function(_,C,S){var A=this;switch(_){case"query":typeof C=="string"&&C.length&&(C=(S||i.parse)(C)),A[_]=C;break;case"port":A[_]=C,r(C,A.protocol)?C&&(A.host=A.hostname+":"+C):(A.host=A.hostname,A[_]="");break;case"hostname":A[_]=C,A.port&&(C+=":"+A.port),A.host=C;break;case"host":A[_]=C,h.test(C)?(C=C.split(":"),A.port=C.pop(),A.hostname=C.join(":")):(A.hostname=C,A.port="");break;case"protocol":A.protocol=C.toLowerCase(),A.slashes=!S;break;case"pathname":case"hash":if(C){var k=_==="pathname"?"/":"#";A[_]=C.charAt(0)!==k?k+C:C}else A[_]=C;break;case"username":case"password":A[_]=encodeURIComponent(C);break;case"auth":var D=C.indexOf(":");~D?(A.username=C.slice(0,D),A.username=encodeURIComponent(decodeURIComponent(A.username)),A.password=C.slice(D+1),A.password=encodeURIComponent(decodeURIComponent(A.password))):A.username=encodeURIComponent(decodeURIComponent(C))}for(var T=0;T<g.length;T++){var I=g[T];I[4]&&(A[I[1]]=A[I[1]].toLowerCase())}return A.auth=A.password?A.username+":"+A.password:A.username,A.origin=A.protocol!=="file:"&&w(A.protocol)&&A.host?A.protocol+"//"+A.host:"null",A.href=A.toString(),A},toString:function(_){_&&typeof _=="function"||(_=i.stringify);var C,S=this,A=S.host,k=S.protocol;k&&k.charAt(k.length-1)!==":"&&(k+=":");var D=k+(S.protocol&&S.slashes||w(S.protocol)?"//":"");return S.username?(D+=S.username,S.password&&(D+=":"+S.password),D+="@"):S.password?(D+=":"+S.password,D+="@"):S.protocol!=="file:"&&w(S.protocol)&&!A&&S.pathname!=="/"&&(D+="@"),(A[A.length-1]===":"||h.test(S.hostname)&&!S.port)&&(A+=":"),D+=A+S.pathname,(C=typeof S.query=="object"?_(S.query):S.query)&&(D+=C.charAt(0)!=="?"?"?"+C:C),S.hash&&(D+=S.hash),D}},N.extractProtocol=E,N.location=y,N.trimLeft=p,N.qs=i,n.exports=N},410:()=>{},388:()=>{},805:()=>{},345:()=>{},800:()=>{}},Fu={};function nt(n){var e=Fu[n];if(e!==void 0)return e.exports;var t=Fu[n]={id:n,loaded:!1,exports:{}};return Mg[n].call(t.exports,t,t.exports,nt),t.loaded=!0,t.exports}nt.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return nt.d(e,{a:e}),e},nt.d=(n,e)=>{for(var t in e)nt.o(e,t)&&!nt.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},nt.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),nt.nmd=n=>(n.paths=[],n.children||(n.children=[]),n);var on={};nt.d(on,{hT:()=>Bt,O4:()=>Fn,Kd:()=>Ug,YK:()=>Wg,UU:()=>Xm,Gu:()=>Nf,ky:()=>zf,h4:()=>Ui,ch:()=>go,hq:()=>Rr,i5:()=>Hf});var Ig=nt(737),jg=nt.n(Ig);function ca(n){if(!Ma(n))throw new Error("Parameter was not an error")}function Ma(n){return!!n&&typeof n=="object"&&(e=n,Object.prototype.toString.call(e)==="[object Error]")||n instanceof Error;var e}class Wt extends Error{constructor(e,t){const r=[...arguments],{options:i,shortMessage:s}=(function(l){let h,f="";if(l.length===0)h={};else if(Ma(l[0]))h={cause:l[0]},f=l.slice(1).join(" ")||"";else if(l[0]&&typeof l[0]=="object")h=Object.assign({},l[0]),f=l.slice(1).join(" ")||"";else{if(typeof l[0]!="string")throw new Error("Invalid arguments passed to Layerr");h={},f=f=l.join(" ")||""}return{options:h,shortMessage:f}})(r);let a=s;if(i.cause&&(a=`${a}: ${i.cause.message}`),super(a),this.message=a,i.name&&typeof i.name=="string"?this.name=i.name:this.name="Layerr",i.cause&&Object.defineProperty(this,"_cause",{value:i.cause}),Object.defineProperty(this,"_info",{value:{}}),i.info&&typeof i.info=="object"&&Object.assign(this._info,i.info),Error.captureStackTrace){const l=i.constructorOpt||this.constructor;Error.captureStackTrace(this,l)}}static cause(e){return ca(e),e._cause&&Ma(e._cause)?e._cause:null}static fullStack(e){ca(e);const t=Wt.cause(e);return t?`${e.stack}
caused by: ${Wt.fullStack(t)}`:e.stack??""}static info(e){ca(e);const t={},r=Wt.cause(e);return r&&Object.assign(t,Wt.info(r)),e._info&&Object.assign(t,e._info),t}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e=`${e}: ${this.message}`),e}}var $g=nt(47),Us=nt.n($g);const Bu="__PATH_SEPARATOR_POSIX__",zu="__PATH_SEPARATOR_WINDOWS__";function ct(n){try{const e=n.replace(/\//g,Bu).replace(/\\\\/g,zu);return encodeURIComponent(e).split(zu).join("\\\\").split(Bu).join("/")}catch(e){throw new Wt(e,"Failed encoding path")}}function Hu(n){return n.startsWith("/")?n:"/"+n}function Li(n){let e=n;return e[0]!=="/"&&(e="/"+e),/^.+\/$/.test(e)&&(e=e.substr(0,e.length-1)),e}function Lg(n){let e=new(jg())(n).pathname;return e.length<=0&&(e="/"),Li(e)}function ft(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return(function(){return(function(r){var i=[];if(r.length===0)return"";if(typeof r[0]!="string")throw new TypeError("Url must be a string. Received "+r[0]);if(r[0].match(/^[^/:]+:\/*$/)&&r.length>1){var s=r.shift();r[0]=s+r[0]}r[0].match(/^file:\/\/\//)?r[0]=r[0].replace(/^([^/:]+):\/*/,"$1:///"):r[0]=r[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<r.length;a++){var l=r[a];if(typeof l!="string")throw new TypeError("Url must be a string. Received "+l);l!==""&&(a>0&&(l=l.replace(/^[\/]+/,"")),l=a<r.length-1?l.replace(/[\/]+$/,""):l.replace(/[\/]+$/,"/"),i.push(l))}var h=i.join("/"),f=(h=h.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return f.shift()+(f.length>0?"?":"")+f.join("&")})(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))})(e.reduce(((r,i,s)=>((s===0||i!=="/"||i==="/"&&r[r.length-1]!=="/")&&r.push(i),r)),[]))}var Fg=nt(542),pi=nt.n(Fg);const Bg="abcdef0123456789";function Uu(n,e){const t=n.url.replace("//",""),r=t.indexOf("/")==-1?"/":t.slice(t.indexOf("/")),i=n.method?n.method.toUpperCase():"GET",s=!!/(^|,)\s*auth\s*($|,)/.test(e.qop)&&"auth",a=`00000000${e.nc}`.slice(-8),l=(function(g,v,y,w,E,N,_){const C=_||pi()(`${v}:${y}:${w}`);return g&&g.toLowerCase()==="md5-sess"?pi()(`${C}:${E}:${N}`):C})(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce,e.ha1),h=pi()(`${i}:${r}`),f=s?pi()(`${l}:${e.nonce}:${a}:${e.cnonce}:${s}:${h}`):pi()(`${l}:${e.nonce}:${h}`),c={username:e.username,realm:e.realm,nonce:e.nonce,uri:r,qop:s,response:f,nc:a,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},p=[];for(const g in c)c[g]&&(g==="qop"||g==="nc"||g==="algorithm"?p.push(`${g}=${c[g]}`):p.push(`${g}="${c[g]}"`));return`Digest ${p.join(", ")}`}function Tf(n){return(n.headers&&n.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var zg=nt(101),Pf=nt.n(zg);function Wu(n){return Pf().decode(n)}function Ku(n,e){var t;return`Basic ${t=`${n}:${e}`,Pf().encode(t)}`}const Ws=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,Hg=Ws.fetch.bind(Ws),Ug=Ws.Request,Wg=Ws.Response;let Bt=(function(n){return n.Auto="auto",n.Digest="digest",n.None="none",n.Password="password",n.Token="token",n})({}),Fn=(function(n){return n.DataTypeNoLength="data-type-no-length",n.InvalidAuthType="invalid-auth-type",n.InvalidOutputFormat="invalid-output-format",n.LinkUnsupportedAuthType="link-unsupported-auth",n.InvalidUpdateRange="invalid-update-range",n.NotSupported="not-supported",n})({});function Rf(n,e,t,r,i){switch(n.authType){case Bt.Auto:e&&t&&(n.headers.Authorization=Ku(e,t));break;case Bt.Digest:n.digest=(function(a,l,h){return{username:a,password:l,ha1:h,nc:0,algorithm:"md5",hasDigestAuth:!1}})(e,t,i);break;case Bt.None:break;case Bt.Password:n.headers.Authorization=Ku(e,t);break;case Bt.Token:n.headers.Authorization=`${(s=r).token_type} ${s.access_token}`;break;default:throw new Wt({info:{code:Fn.InvalidAuthType}},`Invalid auth type: ${n.authType}`)}var s}nt(345),nt(800);const qu="@@HOTPATCHER",Kg=()=>{};function fa(n){return{original:n,methods:[n],final:!1}}class qg{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=qu}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(e){this.configuration.getEmptyAction=e}control(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!e||e.__type__!==qu)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(e.configuration.registry).forEach((r=>{this.configuration.registry.hasOwnProperty(r)?t&&(this.configuration.registry[r]=Object.assign({},e.configuration.registry[r])):this.configuration.registry[r]=Object.assign({},e.configuration.registry[r])})),e._configuration=this.configuration,this}execute(e){const t=this.get(e)||Kg;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t(...i)}get(e){const t=this.configuration.registry[e];if(!t)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error(`Failed handling method request: No method provided for override: ${e}`);default:throw new Error(`Failed handling request which resulted in an empty method: Invalid empty-action specified: ${this.getEmptyAction}`)}return(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];if(i.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var a=arguments.length,l=new Array(a),h=0;h<a;h++)l[h]=arguments[h];let f=l;const c=this;for(;i.length>0;)f=[i.shift().apply(c,f)];return f[0]}})(...t.methods)}isPatched(e){return!!this.configuration.registry[e]}patch(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:i=!1}=r;if(this.configuration.registry[e]&&this.configuration.registry[e].final)throw new Error(`Failed patching '${e}': Method marked as being final`);if(typeof t!="function")throw new Error(`Failed patching '${e}': Provided method is not a function`);if(i)this.configuration.registry[e]?this.configuration.registry[e].methods.push(t):this.configuration.registry[e]=fa(t);else if(this.isPatched(e)){const{original:s}=this.configuration.registry[e];this.configuration.registry[e]=Object.assign(fa(t),{original:s})}else this.configuration.registry[e]=fa(t);return this}patchInline(e,t){this.isPatched(e)||this.patch(e,t);for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this.execute(e,...i)}plugin(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.forEach((s=>{this.patch(e,s,{chain:!0})})),this}restore(e){if(!this.isPatched(e))throw new Error(`Failed restoring method: No method present for key: ${e}`);if(typeof this.configuration.registry[e].original!="function")throw new Error(`Failed restoring method: Original method not found or of invalid type for key: ${e}`);return this.configuration.registry[e].methods=[this.configuration.registry[e].original],this}setFinal(e){if(!this.configuration.registry.hasOwnProperty(e))throw new Error(`Failed marking '${e}' as final: No method found for key`);return this.configuration.registry[e].final=!0,this}}let ha=null;function Nf(){return ha||(ha=new qg),ha}function Ks(n){return(function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(n)?Object.assign({},n):Object.setPrototypeOf(Object.assign({},n),Object.getPrototypeOf(n))}function Vu(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];let r=null,i=[...e];for(;i.length>0;){const s=i.shift();r=r?Df(r,s):Ks(s)}return r}function Df(n,e){const t=Ks(n);return Object.keys(e).forEach((r=>{t.hasOwnProperty(r)?Array.isArray(e[r])?t[r]=Array.isArray(t[r])?[...t[r],...e[r]]:[...e[r]]:typeof e[r]=="object"&&e[r]?t[r]=typeof t[r]=="object"&&t[r]?Df(t[r],e[r]):Ks(e[r]):t[r]=e[r]:t[r]=e[r]})),t}function Vg(n){const e={};for(const t of n.keys())e[t]=n.get(t);return e}function Ia(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];if(e.length===0)return{};const r={};return e.reduce(((i,s)=>(Object.keys(s).forEach((a=>{const l=a.toLowerCase();r.hasOwnProperty(l)?i[r[l]]=s[a]:(r[l]=a,i[a]=s[a])})),i)),{})}nt(805);const Gg=typeof ArrayBuffer=="function",{toString:Yg}=Object.prototype;function Mf(n){return Gg&&(n instanceof ArrayBuffer||Yg.call(n)==="[object ArrayBuffer]")}function If(n){return n!=null&&n.constructor!=null&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function il(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}}function ja(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const jf=il((function(n){const e=n._digest;return delete n._digest,e.hasDigestAuth&&(n=Vu(n,{headers:{Authorization:Uu(n,e)}})),ja(qs(n),(function(t){let r=!1;return i=function(a){return r?a:t},(s=(function(){if(t.status==401)return e.hasDigestAuth=(function(a,l){if(!Tf(a))return!1;const h=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const f=a.headers&&a.headers.get("www-authenticate")||"",c=h.exec(f);if(!c)break;l[c[1]]=c[2]||c[3]}return l.nc+=1,l.cnonce=(function(){let f="";for(let c=0;c<32;++c)f=`${f}${Bg[Math.floor(16*Math.random())]}`;return f})(),!0})(t,e),(function(){if(e.hasDigestAuth)return ja(qs(n=Vu(n,{headers:{Authorization:Uu(n,e)}})),(function(a){return a.status==401?e.hasDigestAuth=!1:e.nc++,r=!0,a}))})();e.nc++})())&&s.then?s.then(i):i(s);var i,s}))})),Xg=il((function(n,e){return ja(qs(n),(function(t){return t.ok?(e.authType=Bt.Password,t):t.status==401&&Tf(t)?(e.authType=Bt.Digest,Rf(e,e.username,e.password,void 0,void 0),n._digest=e.digest,jf(n)):t}))})),yt=il((function(n,e){return e.authType===Bt.Auto?Xg(n,e):n._digest?jf(n):qs(n)}));function bt(n,e,t){const r=Ks(n);return r.headers=Ia(e.headers,r.headers||{},t.headers||{}),t.data!==void 0&&(r.data=t.data),t.signal&&(r.signal=t.signal),e.httpAgent&&(r.httpAgent=e.httpAgent),e.httpsAgent&&(r.httpsAgent=e.httpsAgent),e.digest&&(r._digest=e.digest),typeof e.withCredentials=="boolean"&&(r.withCredentials=e.withCredentials),r}function qs(n){const e=Nf();return e.patchInline("request",(t=>e.patchInline("fetch",Hg,t.url,(function(r){let i={};const s={method:r.method};if(r.headers&&(i=Ia(i,r.headers)),r.data!==void 0){const[a,l]=(function(h){if(typeof h=="string")return[h,{}];if(If(h))return[h,{}];if(Mf(h))return[h,{}];if(h&&typeof h=="object")return[JSON.stringify(h),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: "+typeof h)})(r.data);s.body=a,i=Ia(i,l)}return r.signal&&(s.signal=r.signal),r.withCredentials&&(s.credentials="include"),s.headers=i,s})(t))),n)}var Jg=nt(285);const Vs=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")},Zg={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},gi=n=>n.replace(/[[\]\\-]/g,"\\$&"),Gu=n=>n.join(""),Qg=(n,e)=>{const t=e;if(n.charAt(t)!=="[")throw new Error("not in a brace expression");const r=[],i=[];let s=t+1,a=!1,l=!1,h=!1,f=!1,c=t,p="";e:for(;s<n.length;){const w=n.charAt(s);if(w!=="!"&&w!=="^"||s!==t+1){if(w==="]"&&a&&!h){c=s+1;break}if(a=!0,w!=="\\"||h){if(w==="["&&!h){for(const[E,[N,_,C]]of Object.entries(Zg))if(n.startsWith(E,s)){if(p)return["$.",!1,n.length-t,!0];s+=E.length,C?i.push(N):r.push(N),l=l||_;continue e}}h=!1,p?(w>p?r.push(gi(p)+"-"+gi(w)):w===p&&r.push(gi(w)),p="",s++):n.startsWith("-]",s+1)?(r.push(gi(w+"-")),s+=2):n.startsWith("-",s+1)?(p=w,s+=2):(r.push(gi(w)),s++)}else h=!0,s++}else f=!0,s++}if(c<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,n.length-t,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!f)return[(g=r[0].length===2?r[0].slice(-1):r[0],g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,c-t,!1];var g;const v="["+(f?"^":"")+Gu(r)+"]",y="["+(f?"":"^")+Gu(i)+"]";return[r.length&&i.length?"("+v+"|"+y+")":r.length?v:y,l,c-t,!0]},vi=function(n){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")},em=new Set(["!","?","+","*","@"]),Yu=n=>em.has(n),da="(?!\\.)",tm=new Set(["[","."]),nm=new Set(["..","."]),rm=new Set("().*{}+?[]^$\\!"),sl="[^/]",Xu=sl+"*?",Ju=sl+"+?";class $t{type;#n;#r;#s=!1;#e=[];#t;#o;#l;#a=!1;#i;#u;#f=!1;constructor(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.type=e,e&&(this.#r=!0),this.#t=t,this.#n=this.#t?this.#t.#n:this,this.#i=this.#n===this?r:this.#n.#i,this.#l=this.#n===this?[]:this.#n.#l,e!=="!"||this.#n.#a||this.#l.push(this),this.#o=this.#t?this.#t.#e.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(const e of this.#e)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#e.map((e=>String(e))).join("|")+")":this.#u=this.#e.map((e=>String(e))).join("")}#d(){if(this!==this.#n)throw new Error("should only call on root");if(this.#a)return this;let e;for(this.toString(),this.#a=!0;e=this.#l.pop();){if(e.type!=="!")continue;let t=e,r=t.#t;for(;r;){for(let i=t.#o+1;!r.type&&i<r.#e.length;i++)for(const s of e.#e){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#e[i])}t=r,r=t.#t}}return this}push(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const i of t)if(i!==""){if(typeof i!="string"&&!(i instanceof $t&&i.#t===this))throw new Error("invalid part: "+i);this.#e.push(i)}}toJSON(){const e=this.type===null?this.#e.slice().map((t=>typeof t=="string"?t:t.toJSON())):[this.type,...this.#e.map((t=>t.toJSON()))];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#n||this.#n.#a&&this.#t?.type==="!")&&e.push({}),e}isStart(){if(this.#n===this)return!0;if(!this.#t?.isStart())return!1;if(this.#o===0)return!0;const e=this.#t;for(let t=0;t<this.#o;t++){const r=e.#e[t];if(!(r instanceof $t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#n===this||this.#t?.type==="!")return!0;if(!this.#t?.isEnd())return!1;if(!this.type)return this.#t?.isEnd();const e=this.#t?this.#t.#e.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const t=new $t(this.type,e);for(const r of this.#e)t.copyIn(r);return t}static#c(e,t,r,i){let s=!1,a=!1,l=-1,h=!1;if(t.type===null){let v=r,y="";for(;v<e.length;){const w=e.charAt(v++);if(s||w==="\\")s=!s,y+=w;else if(a)v===l+1?w!=="^"&&w!=="!"||(h=!0):w!=="]"||v===l+2&&h||(a=!1),y+=w;else if(w!=="[")if(i.noext||!Yu(w)||e.charAt(v)!=="(")y+=w;else{t.push(y),y="";const E=new $t(w,t);v=$t.#c(e,E,v,i),t.push(E)}else a=!0,l=v,h=!1,y+=w}return t.push(y),v}let f=r+1,c=new $t(null,t);const p=[];let g="";for(;f<e.length;){const v=e.charAt(f++);if(s||v==="\\")s=!s,g+=v;else if(a)f===l+1?v!=="^"&&v!=="!"||(h=!0):v!=="]"||f===l+2&&h||(a=!1),g+=v;else if(v!=="[")if(Yu(v)&&e.charAt(f)==="("){c.push(g),g="";const y=new $t(v,c);c.push(y),f=$t.#c(e,y,f,i)}else if(v!=="|"){if(v===")")return g===""&&t.#e.length===0&&(t.#f=!0),c.push(g),g="",t.push(...p,c),f;g+=v}else c.push(g),g="",p.push(c),c=new $t(null,t);else a=!0,l=f,h=!1,g+=v}return t.type=null,t.#r=void 0,t.#e=[e.substring(r-1)],f}static fromGlob(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new $t(null,void 0,t);return $t.#c(e,r,0,t),r}toMMPattern(){if(this!==this.#n)return this.#n.toMMPattern();const e=this.toString(),[t,r,i,s]=this.toRegExpSource();if(!(i||this.#r||this.#i.nocase&&!this.#i.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;const a=(this.#i.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#i}toRegExpSource(e){const t=e??!!this.#i.dot;if(this.#n===this&&this.#d(),!this.type){const h=this.isStart()&&this.isEnd(),f=this.#e.map((g=>{const[v,y,w,E]=typeof g=="string"?$t.#p(g,this.#r,h):g.toRegExpSource(e);return this.#r=this.#r||w,this.#s=this.#s||E,v})).join("");let c="";if(this.isStart()&&typeof this.#e[0]=="string"&&(this.#e.length!==1||!nm.has(this.#e[0]))){const g=tm,v=t&&g.has(f.charAt(0))||f.startsWith("\\.")&&g.has(f.charAt(2))||f.startsWith("\\.\\.")&&g.has(f.charAt(4)),y=!t&&!e&&g.has(f.charAt(0));c=v?"(?!(?:^|/)\\.\\.?(?:$|/))":y?da:""}let p="";return this.isEnd()&&this.#n.#a&&this.#t?.type==="!"&&(p="(?:$|\\/)"),[c+f+p,vi(f),this.#r=!!this.#r,this.#s]}const r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:";let s=this.#h(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){const h=this.toString();return this.#e=[h],this.type=null,this.#r=void 0,[h,vi(this.toString()),!1,!1]}let a=!r||e||t?"":this.#h(!0);a===s&&(a=""),a&&(s=`(?:${s})(?:${a})*?`);let l="";return l=this.type==="!"&&this.#f?(this.isStart()&&!t?da:"")+Ju:i+s+(this.type==="!"?"))"+(!this.isStart()||t||e?"":da)+Xu+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`),[l,vi(s),this.#r=!!this.#r,this.#s]}#h(e){return this.#e.map((t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");const[r,i,s,a]=t.toRegExpSource(e);return this.#s=this.#s||a,r})).filter((t=>!(this.isStart()&&this.isEnd()&&!t))).join("|")}static#p(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=!1,s="",a=!1;for(let l=0;l<e.length;l++){const h=e.charAt(l);if(i)i=!1,s+=(rm.has(h)?"\\":"")+h;else if(h!=="\\"){if(h==="["){const[f,c,p,g]=Qg(e,l);if(p){s+=f,a=a||c,l+=p-1,t=t||g;continue}}h!=="*"?h!=="?"?s+=h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(s+=sl,t=!0):(s+=r&&e==="*"?Ju:Xu,t=!0)}else l===e.length-1?s+="\\\\":i=!0}return[s,vi(e),!!t,a]}}const Nt=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Vs(e),!(!t.nocomment&&e.charAt(0)==="#")&&new Gs(e,t).match(n)},im=/^\*+([^+@!?\*\[\(]*)$/,sm=n=>e=>!e.startsWith(".")&&e.endsWith(n),om=n=>e=>e.endsWith(n),am=n=>(n=n.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(n)),lm=n=>(n=n.toLowerCase(),e=>e.toLowerCase().endsWith(n)),um=/^\*+\.\*+$/,cm=n=>!n.startsWith(".")&&n.includes("."),fm=n=>n!=="."&&n!==".."&&n.includes("."),hm=/^\.\*+$/,dm=n=>n!=="."&&n!==".."&&n.startsWith("."),pm=/^\*+$/,gm=n=>n.length!==0&&!n.startsWith("."),mm=n=>n.length!==0&&n!=="."&&n!=="..",vm=/^\?+([^+@!?\*\[\(]*)?$/,ym=n=>{let[e,t=""]=n;const r=$f([e]);return t?(t=t.toLowerCase(),i=>r(i)&&i.toLowerCase().endsWith(t)):r},bm=n=>{let[e,t=""]=n;const r=Lf([e]);return t?(t=t.toLowerCase(),i=>r(i)&&i.toLowerCase().endsWith(t)):r},wm=n=>{let[e,t=""]=n;const r=Lf([e]);return t?i=>r(i)&&i.endsWith(t):r},xm=n=>{let[e,t=""]=n;const r=$f([e]);return t?i=>r(i)&&i.endsWith(t):r},$f=n=>{let[e]=n;const t=e.length;return r=>r.length===t&&!r.startsWith(".")},Lf=n=>{let[e]=n;const t=e.length;return r=>r.length===t&&r!=="."&&r!==".."},Ff=typeof process=="object"&&process?typeof ua=="object"&&ua&&ua.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";Nt.sep=Ff==="win32"?"\\":"/";const nn=Symbol("globstar **");Nt.GLOBSTAR=nn,Nt.filter=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=>Nt(t,n,e)};const tn=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},n,e)};Nt.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return Nt;const e=Nt;return Object.assign((function(t,r){return e(t,r,tn(n,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))}),{Minimatch:class extends e.Minimatch{constructor(t){super(t,tn(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(t){return e.defaults(tn(n,t)).Minimatch}},AST:class extends e.AST{constructor(t,r){super(t,r,tn(n,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))}static fromGlob(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.AST.fromGlob(t,tn(n,r))}},unescape:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.unescape(t,tn(n,r))},escape:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.escape(t,tn(n,r))},filter:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.filter(t,tn(n,r))},defaults:t=>e.defaults(tn(n,t)),makeRe:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.makeRe(t,tn(n,r))},braceExpand:function(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.braceExpand(t,tn(n,r))},match:function(t,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.match(t,r,tn(n,i))},sep:e.sep,GLOBSTAR:nn})};const Bf=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vs(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Jg(n)};Nt.braceExpand=Bf,Nt.makeRe=function(n){return new Gs(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},Nt.match=function(n,e){const t=new Gs(e,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return n=n.filter((r=>t.match(r))),t.options.nonull&&!n.length&&n.push(e),n};const Zu=/[?*]|[+@!]\(.*?\)|\[|\]/;class Gs{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Vs(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||Ff,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if(typeof t!="string")return!0;return!1}debug(){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#")return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const r=this.globSet.map((s=>this.slashSplit(s)));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map(((s,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){const h=!(s[0]!==""||s[1]!==""||s[2]!=="?"&&Zu.test(s[2])||Zu.test(s[3])),f=/^[a-z]:/i.test(s[0]);if(h)return[...s.slice(0,4),...s.slice(4).map((c=>this.parse(c)))];if(f)return[s[0],...s.slice(1).map((c=>this.parse(c)))]}return s.map((h=>this.parse(h)))}));if(this.debug(this.pattern,i),this.set=i.filter((s=>s.indexOf(!1)===-1)),this.isWindows)for(let s=0;s<this.set.length;s++){const a=this.set[s];a[0]===""&&a[1]===""&&this.globParts[s][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map((t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let i=r;for(;t[i+1]==="**";)i++;i!==r&&t.splice(r,i-r)}return t}))}levelOneOptimize(e){return e.map((t=>(t=t.reduce(((r,i)=>{const s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)}),[])).length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){const s=e[i];i===1&&s===""&&e[0]===""||s!=="."&&s!==""||(t=!0,e.splice(i,1),i--)}e[0]!=="."||e.length!==2||e[1]!=="."&&e[1]!==""||(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){const i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let a=i;for(;r[a+1]==="**";)a++;a>i&&r.splice(i+1,a-i);let l=r[i+1];const h=r[i+2],f=r[i+3];if(l!==".."||!h||h==="."||h===".."||!f||f==="."||f==="..")continue;t=!0,r.splice(i,1);const c=r.slice(0);c[i]="**",e.push(c),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<r.length-1;a++){const l=r[a];a===1&&l===""&&r[0]===""||l!=="."&&l!==""||(t=!0,r.splice(a,1),a--)}r[0]!=="."||r.length!==2||r[1]!=="."&&r[1]!==""||(t=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){const a=r[s-1];if(a&&a!=="."&&a!==".."&&a!=="**"){t=!0;const l=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...l),r.length===0&&r.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){const i=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);if(i){e[t]=[],e[r]=i;break}}return e.filter((t=>t.length))}partsMatch(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],i=0,s=0,a=[],l="";for(;i<e.length&&s<t.length;)if(e[i]===t[s])a.push(l==="b"?t[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&t[s]===e[i+1])a.push(e[i]),i++;else if(r&&t[s]==="**"&&e[i]===t[s+1])a.push(t[s]),s++;else if(e[i]!=="*"||!t[s]||!this.options.dot&&t[s].startsWith(".")||t[s]==="**"){if(t[s]!=="*"||!e[i]||!this.options.dot&&e[i].startsWith(".")||e[i]==="**"||l==="a")return!1;l="b",a.push(t[s]),i++,s++}else{if(l==="b")return!1;l="a",a.push(e[i]),i++,s++}return e.length===t.length&&a}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=this.options;if(this.isWindows){const w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),E=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),N=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),_=E?3:w?0:void 0,C=!N&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3])?3:N?0:void 0;if(typeof _=="number"&&typeof C=="number"){const[S,A]=[e[_],t[C]];S.toLowerCase()===A.toLowerCase()&&(t[C]=S,C>_?t=t.slice(C):_>C&&(e=e.slice(_)))}}const{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var a=0,l=0,h=e.length,f=t.length;a<h&&l<f;a++,l++){this.debug("matchOne loop");var c=t[l],p=e[a];if(this.debug(t,c,p),c===!1)return!1;if(c===nn){this.debug("GLOBSTAR",[t,c,p]);var g=a,v=l+1;if(v===f){for(this.debug("** at the end");a<h;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<h;){var y=e[g];if(this.debug(`
globstar while`,e,g,t,v,y),this.matchOne(e.slice(g),t.slice(v),r))return this.debug("globstar found match!",g,h,y),!0;if(y==="."||y===".."||!i.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,g,t,v);break}this.debug("globstar swallow a segment, and continue"),g++}return!(!r||(this.debug(`
>>> no match, partial?`,e,g,t,v),g!==h))}let w;if(typeof c=="string"?(w=p===c,this.debug("string match",c,p,w)):(w=c.test(p),this.debug("pattern match",c,p,w)),!w)return!1}if(a===h&&l===f)return!0;if(a===h)return r;if(l===f)return a===h-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return Bf(this.pattern,this.options)}parse(e){Vs(e);const t=this.options;if(e==="**")return nn;if(e==="")return"";let r,i=null;(r=e.match(pm))?i=t.dot?mm:gm:(r=e.match(im))?i=(t.nocase?t.dot?lm:am:t.dot?om:sm)(r[1]):(r=e.match(vm))?i=(t.nocase?t.dot?bm:ym:t.dot?wm:xm)(r):(r=e.match(um))?i=t.dot?fm:cm:(r=e.match(hm))&&(i=dm);const s=$t.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,r=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=new Set(t.nocase?["i"]:[]);let s=e.map((h=>{const f=h.map((c=>{if(c instanceof RegExp)for(const p of c.flags.split(""))i.add(p);return typeof c=="string"?c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):c===nn?nn:c._src}));return f.forEach(((c,p)=>{const g=f[p+1],v=f[p-1];c===nn&&v!==nn&&(v===void 0?g!==void 0&&g!==nn?f[p+1]="(?:\\/|"+r+"\\/)?"+g:f[p]=r:g===void 0?f[p-1]=v+"(?:\\/|"+r+")?":g!==nn&&(f[p-1]=v+"(?:\\/|\\/"+r+"\\/)"+g,f[p+1]=nn))})),f.filter((c=>c!==nn)).join("/")})).join("|");const[a,l]=e.length>1?["(?:",")"]:["",""];s="^"+a+s+l+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;const r=this.options;this.isWindows&&(e=e.split("\\").join("/"));const i=this.slashSplit(e);this.debug(this.pattern,"split",i);const s=this.set;this.debug(this.pattern,"set",s);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<s.length;l++){const h=s[l];let f=i;if(r.matchBase&&h.length===1&&(f=[a]),this.matchOne(f,h,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(e){return Nt.defaults(e).Minimatch}}function ol(n){const e=new Error(`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:""}Invalid response: ${n.status} ${n.statusText}`);return e.status=n.status,e.response=n,e}function wt(n,e){const{status:t}=e;if(t===401&&n.digest)return e;if(t>=400)throw ol(e);return e}function Rr(n,e){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:e,headers:n.headers?Vg(n.headers):{},status:n.status,statusText:n.statusText}:e}Nt.AST=$t,Nt.Minimatch=Gs,Nt.escape=function(n){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&")},Nt.unescape=vi;const _m=(Qu=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=bt({url:ft(n.remoteURL,ct(e)),method:"COPY",headers:{Destination:ft(n.remoteURL,ct(t)),Overwrite:r.overwrite===!1?"F":"T",Depth:r.shallow?"0":"infinity"}},n,r);return a=function(l){wt(n,l)},(s=yt(i,n))&&s.then||(s=Promise.resolve(s)),a?s.then(a):s;var s,a},function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];try{return Promise.resolve(Qu.apply(this,n))}catch(t){return Promise.reject(t)}});var Qu,al=nt(635),Em=nt(829),Rn=nt.n(Em),Kr=(function(n){return n.Array="array",n.Object="object",n.Original="original",n})(Kr||{});function ws(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kr.Original;const r=Rn().get(n,e);return t==="array"&&Array.isArray(r)===!1?[r]:t==="object"&&Array.isArray(r)?r[0]:r}function Ui(n){return new Promise((e=>{e((function(t){const{multistatus:r}=t;if(r==="")return{multistatus:{response:[]}};if(!r)throw new Error("Invalid response: No root multistatus found");const i={multistatus:Array.isArray(r)?r[0]:r};return Rn().set(i,"multistatus.response",ws(i,"multistatus.response",Kr.Array)),Rn().set(i,"multistatus.response",Rn().get(i,"multistatus.response").map((s=>(function(a){const l=Object.assign({},a);return l.status?Rn().set(l,"status",ws(l,"status",Kr.Object)):(Rn().set(l,"propstat",ws(l,"propstat",Kr.Object)),Rn().set(l,"propstat.prop",ws(l,"propstat.prop",Kr.Object))),l})(s)))),i})(new al.XMLParser({allowBooleanAttributes:!0,attributeNamePrefix:"",textNodeName:"text",ignoreAttributes:!1,removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1},attributeValueProcessor:(t,r,i)=>r==="true"||r==="false"?r==="true":r,tagValueProcessor(t,r,i){if(!i.endsWith("propstat.prop.displayname"))return r}}).parse(n)))}))}function go(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:r=null,getcontentlength:i="0",resourcetype:s=null,getcontenttype:a=null,getetag:l=null}=n,h=s&&typeof s=="object"&&s.collection!==void 0?"directory":"file",f={filename:e,basename:Us().basename(e),lastmod:r,size:parseInt(i,10),type:h,etag:typeof l=="string"?l.replace(/"/g,""):null};return h==="file"&&(f.mime=a&&typeof a=="string"?a.split(";")[0]:""),t&&(n.displayname!==void 0&&(n.displayname=String(n.displayname)),f.props=n),f}function zf(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=null;try{n.multistatus.response[0].propstat&&(r=n.multistatus.response[0])}catch{}if(!r)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:i,status:s}}=r,[a,l,h]=s.split(" ",3),f=parseInt(l,10);if(f>=400){const c=new Error(`Invalid response: ${f} ${h}`);throw c.status=f,c}return go(i,Li(e),t)}function Hf(n){switch(String(n)){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(String(n),10)}}function pa(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const ll=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=t,i=bt({url:ft(n.remoteURL,ct(e)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},n,t);return pa(yt(i,n),(function(s){return wt(n,s),pa(s.text(),(function(a){return pa(Ui(a),(function(l){const h=zf(l,e,r);return Rr(s,h,r)}))}))}))}));function Uf(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const Cm=Wf((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=(function(s){if(!s||s==="/")return[];let a=s;const l=[];do l.push(a),a=Us().dirname(a);while(a&&a!=="/");return l})(Li(e));r.sort(((s,a)=>s.length>a.length?1:a.length>s.length?-1:0));let i=!1;return(function(s,a,l){if(typeof s[tc]=="function"){let w=function(E){try{for(;!(h=p.next()).done;)if((E=a(h.value))&&E.then){if(!nc(E))return void E.then(w,c||(c=zt.bind(null,f=new qr,2)));E=E.v}f?zt(f,1,E):f=E}catch(N){zt(f||(f=new qr),2,N)}};var h,f,c,p=s[tc]();if(w(),p.return){var g=function(E){try{h.done||p.return()}catch{}return E};if(f&&f.then)return f.then(g,(function(E){throw g(E)}));g()}return f}if(!("length"in s))throw new TypeError("Object is not iterable");for(var v=[],y=0;y<s.length;y++)v.push(s[y]);return(function(w,E,N){var _,C,S=-1;return(function A(k){try{for(;++S<w.length&&(!N||!N());)if((k=E(S))&&k.then){if(!nc(k))return void k.then(A,C||(C=zt.bind(null,_=new qr,2)));k=k.v}_?zt(_,1,k):_=k}catch(D){zt(_||(_=new qr),2,D)}})(),_})(v,(function(w){return a(v[w])}),l)})(r,(function(s){return a=function(){return(function(h,f){try{var c=Uf(ll(n,s),(function(p){if(p.type!=="directory")throw new Error(`Path includes a file: ${e}`)}))}catch(p){return f(p)}return c&&c.then?c.then(void 0,f):c})(0,(function(h){const f=h;return(function(){if(f.status===404)return i=!0,ec($a(n,s,{...t,recursive:!1}));throw h})()}))},(l=(function(){if(i)return ec($a(n,s,{...t,recursive:!1}))})())&&l.then?l.then(a):a();var a,l}),(function(){return!1}))}));function Wf(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}}function Sm(){}function ec(n,e){return n&&n.then?n.then(Sm):Promise.resolve()}const tc=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function zt(n,e,t){if(!n.s){if(t instanceof qr){if(!t.s)return void(t.o=zt.bind(null,n,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(zt.bind(null,n,e),zt.bind(null,n,2));n.s=e,n.v=t;const r=n.o;r&&r(n)}}const qr=(function(){function n(){}return n.prototype.then=function(e,t){const r=new n,i=this.s;if(i){const s=1&i?e:t;if(s){try{zt(r,1,s(this.v))}catch(a){zt(r,2,a)}return r}return this}return this.o=function(s){try{const a=s.v;1&s.s?zt(r,1,e?e(a):a):t?zt(r,1,t(a)):zt(r,2,a)}catch(a){zt(r,2,a)}},r},n})();function nc(n){return n instanceof qr&&1&n.s}const $a=Wf((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t.recursive===!0)return Cm(n,e,t);const r=bt({url:ft(n.remoteURL,(i=ct(e),i.endsWith("/")?i:i+"/")),method:"MKCOL"},n,t);var i;return Uf(yt(r,n),(function(s){wt(n,s)}))}));var km=nt(388),rc=nt.n(km);const Om=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r={};if(typeof t.range=="object"&&typeof t.range.start=="number"){let l=`bytes=${t.range.start}-`;typeof t.range.end=="number"&&(l=`${l}${t.range.end}`),r.Range=l}const i=bt({url:ft(n.remoteURL,ct(e)),method:"GET",headers:r},n,t);return a=function(l){if(wt(n,l),r.Range&&l.status!==206){const h=new Error(`Invalid response code for partial request: ${l.status}`);throw h.status=l.status,h}return t.callback&&setTimeout((()=>{t.callback(l)}),0),l.body},(s=yt(i,n))&&s.then||(s=Promise.resolve(s)),a?s.then(a):s;var s,a})),Am=()=>{},Tm=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e,t){t.url||(t.url=ft(n.remoteURL,ct(e)));const r=bt(t,n,{});return s=function(a){return wt(n,a),a},(i=yt(r,n))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s})),Pm=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=bt({url:ft(n.remoteURL,ct(e)),method:"DELETE"},n,t);return s=function(a){wt(n,a)},(i=yt(r,n))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s})),Rm=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function(r,i){try{var s=(a=ll(n,e,t),l=function(){return!0},h?l?l(a):a:(a&&a.then||(a=Promise.resolve(a)),l?a.then(l):a))}catch(f){return i(f)}var a,l,h;return s&&s.then?s.then(void 0,i):s})(0,(function(r){if(r.status===404)return!1;throw r}))}));function ga(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const Nm=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=bt({url:ft(n.remoteURL,ct(e),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:t.deep?"infinity":"1"}},n,t);return ga(yt(r,n),(function(i){return wt(n,i),ga(i.text(),(function(s){if(!s)throw new Error("Failed parsing directory contents: Empty response");return ga(Ui(s),(function(a){const l=Hu(e);let h=(function(f,c,p){let g=arguments.length>3&&arguments[3]!==void 0&&arguments[3],v=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const y=Us().join(c,"/"),{multistatus:{response:w}}=f,E=w.map((N=>{const _=(function(S){try{return S.replace(/^https?:\/\/[^\/]+/,"")}catch(A){throw new Wt(A,"Failed normalising HREF")}})(N.href),{propstat:{prop:C}}=N;return go(C,y==="/"?decodeURIComponent(Li(_)):Li(Us().relative(decodeURIComponent(y),decodeURIComponent(_))),g)}));return v?E:E.filter((N=>N.basename&&(N.type==="file"||N.filename!==p.replace(/\/$/,""))))})(a,Hu(n.remoteBasePath||n.remotePath),l,t.details,t.includeSelf);return t.glob&&(h=(function(f,c){return f.filter((p=>Nt(p.filename,c,{matchBase:!0})))})(h,t.glob)),Rr(i,h,t.details)}))}))}))}));function ul(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}}const Dm=ul((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=bt({url:ft(n.remoteURL,ct(e)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[jm]},n,t);return Ys(yt(r,n),(function(i){return wt(n,i),Ys(i.text(),(function(s){return Rr(i,s,t.details)}))}))}));function Ys(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const Mm=ul((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=bt({url:ft(n.remoteURL,ct(e)),method:"GET"},n,t);return Ys(yt(r,n),(function(i){let s;return wt(n,i),(function(a,l){var h=a();return h&&h.then?h.then(l):l()})((function(){return Ys(i.arrayBuffer(),(function(a){s=a}))}),(function(){return Rr(i,s,t.details)}))}))})),Im=ul((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:r="binary"}=t;if(r!=="binary"&&r!=="text")throw new Wt({info:{code:Fn.InvalidOutputFormat}},`Invalid output format: ${r}`);return r==="text"?Dm(n,e,t):Mm(n,e,t)})),jm=n=>n;function $m(n){return new al.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(Kf({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:n}}},"d"))}function Kf(n,e){const t={...n};for(const r in t)t.hasOwnProperty(r)&&(t[r]&&typeof t[r]=="object"&&r.indexOf(":")===-1?(t[`${e}:${r}`]=Kf(t[r],e),delete t[r]):/^@_/.test(r)===!1&&(t[`${e}:${r}`]=t[r],delete t[r]));return t}function La(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}function qf(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}}const Lm=qf((function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=bt({url:ft(n.remoteURL,ct(e)),method:"UNLOCK",headers:{"Lock-Token":t}},n,r);return La(yt(i,n),(function(s){if(wt(n,s),s.status!==204&&s.status!==200)throw ol(s)}))})),Fm=qf((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:r,timeout:i=Bm}=t,s={Accept:"text/plain,application/xml",Timeout:i};r&&(s.If=r);const a=bt({url:ft(n.remoteURL,ct(e)),method:"LOCK",headers:s,data:$m(n.contactHref)},n,t);return La(yt(a,n),(function(l){return wt(n,l),La(l.text(),(function(h){const f=(g=h,new al.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(g)),c=Rn().get(f,"prop.lockdiscovery.activelock.locktoken.href"),p=Rn().get(f,"prop.lockdiscovery.activelock.timeout");var g;if(!c)throw ol(l,"No lock token received: ");return{token:c,serverTimeout:p}}))}))})),Bm="Infinite, Second-4100000000";function ma(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const zm=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=e.path||"/",r=bt({url:ft(n.remoteURL,t),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},n,e);return ma(yt(r,n),(function(i){return wt(n,i),ma(i.text(),(function(s){return ma(Ui(s),(function(a){const l=(function(h){try{const[f]=h.multistatus.response,{propstat:{prop:{"quota-used-bytes":c,"quota-available-bytes":p}}}=f;return c!==void 0&&p!==void 0?{used:parseInt(String(c),10),available:Hf(p)}:null}catch{}return null})(a);return Rr(i,l,e.details)}))}))}))}));function va(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const Hm=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=t,i=bt({url:ft(n.remoteURL,ct(e)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":n.headers["Content-Type"]||"application/xml; charset=utf-8"}},n,t);return va(yt(i,n),(function(s){return wt(n,s),va(s.text(),(function(a){return va(Ui(a),(function(l){const h=(function(f,c,p){const g={truncated:!1,results:[]};return g.truncated=f.multistatus.response.some((v=>(v.status||v.propstat?.status).split(" ",3)?.[1]==="507"&&v.href.replace(/\/$/,"").endsWith(ct(c).replace(/\/$/,"")))),f.multistatus.response.forEach((v=>{if(v.propstat===void 0)return;const y=v.href.split("/").map(decodeURIComponent).join("/");g.results.push(go(v.propstat.prop,y,p))})),g})(l,e,r);return Rr(s,h,r)}))}))}))})),Um=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=bt({url:ft(n.remoteURL,ct(e)),method:"MOVE",headers:{Destination:ft(n.remoteURL,ct(t)),Overwrite:r.overwrite===!1?"F":"T"}},n,r);return a=function(l){wt(n,l)},(s=yt(i,n))&&s.then||(s=Promise.resolve(s)),a?s.then(a):s;var s,a}));var Wm=nt(172);const Km=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{contentLength:i=!0,overwrite:s=!0}=r,a={"Content-Type":"application/octet-stream"};i===!1||(a["Content-Length"]=typeof i=="number"?`${i}`:`${(function(c){if(Mf(c))return c.byteLength;if(If(c))return c.length;if(typeof c=="string")return(0,Wm.d)(c);throw new Wt({info:{code:Fn.DataTypeNoLength}},"Cannot calculate data length: Invalid type")})(t)}`),s||(a["If-None-Match"]="*");const l=bt({url:ft(n.remoteURL,ct(e)),method:"PUT",headers:a,data:t},n,r);return f=function(c){try{wt(n,c)}catch(p){const g=p;if(g.status!==412||s)throw g;return!1}return!0},(h=yt(l,n))&&h.then||(h=Promise.resolve(h)),f?h.then(f):h;var h,f})),Vf=(function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}})((function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=bt({url:ft(n.remoteURL,ct(e)),method:"OPTIONS"},n,t);return s=function(a){try{wt(n,a)}catch(l){throw l}return{compliance:(a.headers.get("DAV")??"").split(",").map((l=>l.trim())),server:a.headers.get("Server")??""}},(i=yt(r,n))&&i.then||(i=Promise.resolve(i)),s?i.then(s):i;var i,s}));function Ai(n,e,t){return t?e?e(n):n:(n&&n.then||(n=Promise.resolve(n)),e?n.then(e):n)}const qm=cl((function(n,e,t,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(t>r||t<0)throw new Wt({info:{code:Fn.InvalidUpdateRange}},`Invalid update range ${t} for partial update`);const a={"Content-Type":"application/octet-stream","Content-Length":""+(r-t+1),"Content-Range":`bytes ${t}-${r}/*`},l=bt({url:ft(n.remoteURL,ct(e)),method:"PUT",headers:a,data:i},n,s);return Ai(yt(l,n),(function(h){wt(n,h)}))}));function ic(n,e){var t=n();return t&&t.then?t.then(e):e(t)}const Vm=cl((function(n,e,t,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(t>r||t<0)throw new Wt({info:{code:Fn.InvalidUpdateRange}},`Invalid update range ${t} for partial update`);const a={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":""+(r-t+1),"X-Update-Range":`bytes=${t}-${r}`},l=bt({url:ft(n.remoteURL,ct(e)),method:"PATCH",headers:a,data:i},n,s);return Ai(yt(l,n),(function(h){wt(n,h)}))}));function cl(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(n.apply(this,e))}catch(r){return Promise.reject(r)}}}const Gm=cl((function(n,e,t,r,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return Ai(Vf(n,e,s),(function(a){let l=!1;return ic((function(){if(a.compliance.includes("sabredav-partialupdate"))return Ai(Vm(n,e,t,r,i,s),(function(h){return l=!0,h}))}),(function(h){let f=!1;return l?h:ic((function(){if(a.server.includes("Apache")&&a.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return Ai(qm(n,e,t,r,i,s),(function(c){return f=!0,c}))}),(function(c){if(f)return c;throw new Wt({info:{code:Fn.NotSupported}},"Not supported")}))}))}))})),Ym="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function Xm(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:t=null,remoteBasePath:r,contactHref:i=Ym,ha1:s,headers:a={},httpAgent:l,httpsAgent:h,password:f,token:c,username:p,withCredentials:g}=e;let v=t;v||(v=p||f?Bt.Password:Bt.None);const y={authType:v,remoteBasePath:r,contactHref:i,ha1:s,headers:Object.assign({},a),httpAgent:l,httpsAgent:h,password:f,remotePath:Lg(n),remoteURL:n,token:c,username:p,withCredentials:g};return Rf(y,p,f,c,s),{copyFile:(w,E,N)=>_m(y,w,E,N),createDirectory:(w,E)=>$a(y,w,E),createReadStream:(w,E)=>(function(N,_){let C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const S=new(rc()).PassThrough;return Om(N,_,C).then((A=>{A.pipe(S)})).catch((A=>{S.emit("error",A)})),S})(y,w,E),createWriteStream:(w,E,N)=>(function(_,C){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Am;const k=new(rc()).PassThrough,D={};S.overwrite===!1&&(D["If-None-Match"]="*");const T=bt({url:ft(_.remoteURL,ct(C)),method:"PUT",headers:D,data:k,maxRedirects:0},_,S);return yt(T,_).then((I=>wt(_,I))).then((I=>{setTimeout((()=>{A(I)}),0)})).catch((I=>{k.emit("error",I)})),k})(y,w,E,N),customRequest:(w,E)=>Tm(y,w,E),deleteFile:(w,E)=>Pm(y,w,E),exists:(w,E)=>Rm(y,w,E),getDirectoryContents:(w,E)=>Nm(y,w,E),getFileContents:(w,E)=>Im(y,w,E),getFileDownloadLink:w=>(function(E,N){let _=ft(E.remoteURL,ct(N));const C=/^https:/i.test(_)?"https":"http";switch(E.authType){case Bt.None:break;case Bt.Password:{const S=Wu(E.headers.Authorization.replace(/^Basic /i,"").trim());_=_.replace(/^https?:\/\//,`${C}://${S}@`);break}default:throw new Wt({info:{code:Fn.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${E.authType}`)}return _})(y,w),getFileUploadLink:w=>(function(E,N){let _=`${ft(E.remoteURL,ct(N))}?Content-Type=application/octet-stream`;const C=/^https:/i.test(_)?"https":"http";switch(E.authType){case Bt.None:break;case Bt.Password:{const S=Wu(E.headers.Authorization.replace(/^Basic /i,"").trim());_=_.replace(/^https?:\/\//,`${C}://${S}@`);break}default:throw new Wt({info:{code:Fn.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${E.authType}`)}return _})(y,w),getHeaders:()=>Object.assign({},y.headers),getQuota:w=>zm(y,w),lock:(w,E)=>Fm(y,w,E),moveFile:(w,E,N)=>Um(y,w,E,N),putFileContents:(w,E,N)=>Km(y,w,E,N),partialUpdateFileContents:(w,E,N,_,C)=>Gm(y,w,E,N,_,C),getDAVCompliance:w=>Vf(y,w),search:(w,E)=>Hm(y,w,E),setHeaders:w=>{y.headers=Object.assign({},w)},stat:(w,E)=>ll(y,w,E),unlock:(w,E,N)=>Lm(y,w,E,N)}}on.hT;on.O4;on.Kd;on.YK;var sc=on.UU;on.Gu;on.ky;on.h4;on.ch;on.hq;on.i5;const Jm="new-tab-extension-v1";async function Zm(n){const t=new TextEncoder().encode(n),r=await Gf(),i=crypto.getRandomValues(new Uint8Array(12)),s=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},r,t),a=new Uint8Array(i.length+s.byteLength);return a.set(i,0),a.set(new Uint8Array(s),i.length),btoa(String.fromCharCode(...a))}async function Qm(n){try{const e=Uint8Array.from(atob(n),a=>a.charCodeAt(0)),t=e.slice(0,12),r=e.slice(12),i=await Gf(),s=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},i,r);return new TextDecoder().decode(s)}catch{return""}}async function Gf(){const n=new TextEncoder,e=await crypto.subtle.importKey("raw",n.encode(Jm),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n.encode("salt"),iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}class ev{client=null;backupPath="/new-tab-backups";async connect(e,t,r){try{return this.client=sc(e,{username:t,password:r}),await this.client.exists("/"),!0}catch{return this.client=null,!1}}async testConnection(e,t,r){try{return await sc(e,{username:t,password:r}).exists("/"),{success:!0,message:""}}catch(i){return{success:!1,message:i instanceof Error?i.message:""}}}async ensureBackupDir(){if(!this.client)return;await this.client.exists(this.backupPath)||await this.client.createDirectory(this.backupPath)}async backup(){if(!this.client)return{success:!1,message:" WebDAV "};try{await this.ensureBackupDir();const e=await Rt.exportData(),r=`new-tab-backup-${new Date().toISOString().replace(/[:.]/g,"-").slice(0,19)}.json`,i=`${this.backupPath}/${r}`;return await this.client.putFileContents(i,e,{contentLength:new Blob([e]).size}),{success:!0,filename:r}}catch(e){return{success:!1,message:e instanceof Error?e.message:""}}}async listBackups(){if(!this.client)return[];try{return await this.ensureBackupDir(),(await this.client.getDirectoryContents(this.backupPath)).filter(t=>t.type==="file"&&t.basename.endsWith(".json")).map(t=>({name:t.basename,path:t.filename,lastModified:new Date(t.lastmod),size:t.size})).sort((t,r)=>r.lastModified.getTime()-t.lastModified.getTime())}catch{return[]}}async restore(e){if(!this.client)return{success:!1,message:" WebDAV "};try{const t=await this.client.getFileContents(e,{format:"text"});return await Rt.importData(t)?{success:!0}:{success:!1,message:""}}catch(t){return{success:!1,message:t instanceof Error?t.message:""}}}async deleteBackup(e){if(!this.client)return!1;try{return await this.client.deleteFile(e),!0}catch{return!1}}async saveConfig(e){const t=await Zm(e.password);await Rt.saveWebDAVConfig(e.url,e.username,t)}async autoConnect(){try{const e=await Rt.getWebDAVConfig();if(!e?.url||!e?.username||!e?.encryptedPassword)return!1;const t=await Qm(e.encryptedPassword);return await this.connect(e.url,e.username,t)}catch{return!1}}disconnect(){this.client=null}isConnected(){return this.client!==null}}const Zn=new ev,tv={class:"w-full max-w-2xl max-h-[80vh] mx-4 rounded-2xl glass overflow-hidden flex flex-col"},nv={class:"flex border-b border-white/10"},rv=["onClick"],iv={class:"flex-1 overflow-y-auto p-6"},sv={class:"space-y-6"},ov={class:"space-y-3"},av={class:"flex gap-3"},lv={class:"flex items-center justify-between"},uv={class:"space-y-6"},cv={class:"flex items-center justify-between"},fv={class:"space-y-2"},hv=["value"],dv=["disabled"],pv={class:"space-y-6"},gv={class:"space-y-3"},mv={class:"flex gap-3"},vv=["disabled"],yv={key:0,class:"i-lucide-loader-2 w-4 h-4 animate-spin"},bv={key:1,class:"i-lucide-check w-4 h-4"},wv={key:2,class:"i-lucide-plug w-4 h-4"},xv={key:0,class:"space-y-3"},_v={class:"flex items-center justify-between"},Ev=["disabled"],Cv={class:"max-h-48 overflow-y-auto rounded-xl bg-white/5"},Sv={key:0,class:"p-4 text-center text-white/50"},kv={key:1,class:"p-4 text-center text-white/50"},Ov={class:"text-sm text-white/80"},Av={class:"text-xs text-white/50"},Tv={class:"flex gap-2"},Pv=["onClick"],Rv=["onClick"],Nv=fn({__name:"SettingsPanel",setup(n){const e=fr(),t=Sr(),r=Of(),i=zn(),s=De("general"),a=De(""),l=De(""),h=De(""),f=De(!1),c=De(!1),p=De(""),g=De([]),v=De(!1),y=Ge(()=>e.settingsPanelOpen);function w(){e.closeSettingsPanel()}async function E(ne){await t.setSearchEngine(ne)}async function N(){await t.toggleSearchBar()}async function _(ne){await t.updateWallpaperSettings({enabled:ne}),ne&&await r.loadWallpaper()}async function C(ne){await t.updateWallpaperSettings({interval:ne})}async function S(){await r.switchToNext()}async function A(){f.value=!0,p.value="";const ne=await Zn.testConnection(a.value,l.value,h.value);f.value=!1,c.value=ne.success,p.value=ne.message,ne.success&&(await Zn.saveConfig({url:a.value,username:l.value,password:h.value}),await t.updateWebDAVSettings({enabled:!0,url:a.value,username:l.value}),await Zn.connect(a.value,l.value,h.value),await k())}async function k(){v.value=!0,g.value=await Zn.listBackups(),v.value=!1}async function D(){v.value=!0;const ne=await Zn.backup();ne.success?(p.value=`: ${ne.filename}`,await k()):p.value=ne.message||"",v.value=!1}async function T(ne){if(!confirm(""))return;v.value=!0;const Z=await Zn.restore(ne);Z.success?(p.value="",await i.loadBookmarks(),await t.loadSettings()):p.value=Z.message||"",v.value=!1}async function I(ne){if(!confirm(""))return;await Zn.deleteBackup(ne)&&await k()}async function X(){const ne=await Rt.exportData(),Z=new Blob([ne],{type:"application/json"}),ue=URL.createObjectURL(Z),_e=document.createElement("a");_e.href=ue,_e.download=`new-tab-backup-${new Date().toISOString().slice(0,10)}.json`,_e.click(),URL.revokeObjectURL(ue)}async function te(){const ne=document.createElement("input");ne.type="file",ne.accept=".json",ne.onchange=async Z=>{const ue=Z.target.files?.[0];if(!ue)return;const _e=await ue.text();await Rt.importData(_e)?(await i.loadBookmarks(),await t.loadSettings(),alert("")):alert("")},ne.click()}En(y,async ne=>{if(ne&&t.settings.webdav.enabled){a.value=t.settings.webdav.url,l.value=t.settings.webdav.username;const Z=await Zn.autoConnect();c.value=Z,Z&&await k()}});function J(ne){return ne<1024?`${ne} B`:ne<1024*1024?`${(ne/1024).toFixed(1)} KB`:`${(ne/1024/1024).toFixed(2)} MB`}function F(ne){return ne.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}return(ne,Z)=>(Ee(),Pr(Bi,{to:"body"},[Ze(Ln,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Cn(()=>[y.value?(Ee(),ke("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Jr(w,["self"])},[B("div",tv,[B("div",{class:"flex items-center justify-between px-6 py-4 border-b border-white/10"},[Z[8]||(Z[8]=B("h2",{class:"text-xl font-semibold text-white"},"",-1)),B("button",{class:"p-2 rounded-lg hover:bg-white/10 transition-colors",onClick:w},[...Z[7]||(Z[7]=[B("div",{class:"i-lucide-x w-5 h-5 text-white/70"},null,-1)])])]),B("div",nv,[(Ee(),ke(lt,null,ar([{key:"general",label:"",icon:"i-lucide-settings"},{key:"wallpaper",label:"",icon:"i-lucide-image"},{key:"backup",label:"",icon:"i-lucide-cloud"}],ue=>B("button",{key:ue.key,class:Je(["flex-1 px-4 py-3 flex items-center justify-center gap-2 text-sm transition-colors",s.value===ue.key?"text-white bg-white/10":"text-white/60 hover:text-white/80"]),onClick:_e=>s.value=ue.key},[B("div",{class:Je([ue.icon,"w-4 h-4"])},null,2),rn(" "+Qe(ue.label),1)],10,rv)),64))]),B("div",iv,[yn(B("div",sv,[B("div",ov,[Z[11]||(Z[11]=B("label",{class:"text-sm text-white/70"},"",-1)),B("div",av,[B("button",{class:Je(["flex-1 px-4 py-3 rounded-xl flex items-center justify-center gap-2 transition-all",Le(t).settings.searchEngine==="google"?"bg-white/20 ring-2 ring-white/30":"bg-white/5 hover:bg-white/10"]),onClick:Z[0]||(Z[0]=ue=>E("google"))},[...Z[9]||(Z[9]=[B("div",{class:"i-logos-google-icon w-5 h-5"},null,-1),B("span",{class:"text-white"},"Google",-1)])],2),B("button",{class:Je(["flex-1 px-4 py-3 rounded-xl flex items-center justify-center gap-2 transition-all",Le(t).settings.searchEngine==="bing"?"bg-white/20 ring-2 ring-white/30":"bg-white/5 hover:bg-white/10"]),onClick:Z[1]||(Z[1]=ue=>E("bing"))},[...Z[10]||(Z[10]=[B("div",{class:"i-logos-bing w-5 h-5"},null,-1),B("span",{class:"text-white"},"Bing",-1)])],2)])]),B("div",lv,[Z[12]||(Z[12]=B("div",null,[B("label",{class:"text-sm text-white/70"},""),B("p",{class:"text-xs text-white/50"},"")],-1)),B("button",{class:Je(["w-12 h-6 rounded-full transition-colors relative",Le(t).settings.showSearchBar?"bg-blue-500":"bg-white/20"]),onClick:N},[B("div",{class:Je(["absolute top-1 w-4 h-4 rounded-full bg-white transition-transform",Le(t).settings.showSearchBar?"left-7":"left-1"])},null,2)],2)])],512),[[ra,s.value==="general"]]),yn(B("div",uv,[B("div",cv,[Z[13]||(Z[13]=B("div",null,[B("label",{class:"text-sm text-white/70"},""),B("p",{class:"text-xs text-white/50"}," Picsum ")],-1)),B("button",{class:Je(["w-12 h-6 rounded-full transition-colors relative",Le(t).settings.wallpaper.enabled?"bg-blue-500":"bg-white/20"]),onClick:Z[2]||(Z[2]=ue=>_(!Le(t).settings.wallpaper.enabled))},[B("div",{class:Je(["absolute top-1 w-4 h-4 rounded-full bg-white transition-transform",Le(t).settings.wallpaper.enabled?"left-7":"left-1"])},null,2)],2)]),Le(t).settings.wallpaper.enabled?(Ee(),ke(lt,{key:0},[B("div",fv,[Z[15]||(Z[15]=B("label",{class:"text-sm text-white/70"},"",-1)),B("select",{class:"w-full px-4 py-2 rounded-xl bg-white/10 text-white border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20",value:Le(t).settings.wallpaper.interval,onChange:Z[3]||(Z[3]=ue=>C(Number(ue.target.value)))},[...Z[14]||(Z[14]=[B("option",{value:"15"},"15 ",-1),B("option",{value:"30"},"30 ",-1),B("option",{value:"60"},"1 ",-1),B("option",{value:"180"},"3 ",-1),B("option",{value:"360"},"6 ",-1),B("option",{value:"720"},"12 ",-1),B("option",{value:"1440"},"24 ",-1)])],40,hv)]),B("button",{class:"w-full px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors flex items-center justify-center gap-2",disabled:Le(r).loading,onClick:S},[B("div",{class:Je(["i-lucide-refresh-cw w-4 h-4",{"animate-spin":Le(r).loading}])},null,2),Z[16]||(Z[16]=rn("  ",-1))],8,dv)],64)):ut("",!0)],512),[[ra,s.value==="wallpaper"]]),yn(B("div",pv,[B("div",{class:"space-y-3"},[Z[19]||(Z[19]=B("label",{class:"text-sm text-white/70"},"",-1)),B("div",{class:"flex gap-3"},[B("button",{class:"flex-1 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors flex items-center justify-center gap-2",onClick:X},[...Z[17]||(Z[17]=[B("div",{class:"i-lucide-download w-4 h-4"},null,-1),rn("  ",-1)])]),B("button",{class:"flex-1 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors flex items-center justify-center gap-2",onClick:te},[...Z[18]||(Z[18]=[B("div",{class:"i-lucide-upload w-4 h-4"},null,-1),rn("  ",-1)])])])]),B("div",gv,[Z[20]||(Z[20]=B("label",{class:"text-sm text-white/70"},"WebDAV ",-1)),yn(B("input",{"onUpdate:modelValue":Z[4]||(Z[4]=ue=>a.value=ue),type:"url",placeholder:"WebDAV ",class:"w-full px-4 py-2 rounded-xl bg-white/10 text-white placeholder-white/40 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20"},null,512),[[Ar,a.value]]),B("div",mv,[yn(B("input",{"onUpdate:modelValue":Z[5]||(Z[5]=ue=>l.value=ue),type:"text",placeholder:"",class:"flex-1 px-4 py-2 rounded-xl bg-white/10 text-white placeholder-white/40 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20"},null,512),[[Ar,l.value]]),yn(B("input",{"onUpdate:modelValue":Z[6]||(Z[6]=ue=>h.value=ue),type:"password",placeholder:"",class:"flex-1 px-4 py-2 rounded-xl bg-white/10 text-white placeholder-white/40 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20"},null,512),[[Ar,h.value]])]),B("button",{class:"w-full px-4 py-3 rounded-xl bg-blue-500 hover:bg-blue-600 text-white transition-colors flex items-center justify-center gap-2 disabled:opacity-50",disabled:f.value||!a.value||!l.value||!h.value,onClick:A},[f.value?(Ee(),ke("div",yv)):c.value?(Ee(),ke("div",bv)):(Ee(),ke("div",wv)),rn(" "+Qe(f.value?"...":c.value?"":""),1)],8,vv),p.value?(Ee(),ke("p",{key:0,class:Je(["text-xs",c.value?"text-green-400":"text-red-400"])},Qe(p.value),3)):ut("",!0)]),c.value?(Ee(),ke("div",xv,[B("div",_v,[Z[22]||(Z[22]=B("label",{class:"text-sm text-white/70"},"",-1)),B("button",{class:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white text-sm transition-colors flex items-center gap-2",disabled:v.value,onClick:D},[...Z[21]||(Z[21]=[B("div",{class:"i-lucide-cloud-upload w-4 h-4"},null,-1),rn("  ",-1)])],8,Ev)]),B("div",Cv,[v.value?(Ee(),ke("div",Sv," ... ")):g.value.length===0?(Ee(),ke("div",kv,"  ")):ut("",!0),(Ee(!0),ke(lt,null,ar(g.value,ue=>(Ee(),ke("div",{key:ue.path,class:"px-4 py-3 flex items-center justify-between border-b border-white/5 last:border-0 hover:bg-white/5"},[B("div",null,[B("p",Ov,Qe(ue.name),1),B("p",Av,Qe(F(ue.lastModified))+"  "+Qe(J(ue.size)),1)]),B("div",Tv,[B("button",{class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"",onClick:_e=>T(ue.path)},[...Z[23]||(Z[23]=[B("div",{class:"i-lucide-download w-4 h-4 text-white/70"},null,-1)])],8,Pv),B("button",{class:"p-2 rounded-lg hover:bg-white/10 transition-colors",title:"",onClick:_e=>I(ue.path)},[...Z[24]||(Z[24]=[B("div",{class:"i-lucide-trash-2 w-4 h-4 text-red-400"},null,-1)])],8,Rv)])]))),128))])])):ut("",!0)],512),[[ra,s.value==="backup"]])])])])):ut("",!0)]),_:1})]))}}),Dv=po(Nv,[["__scopeId","data-v-f8136c71"]]),Mv={key:0,class:"my-1.5 border-t border-white/10"},Iv={key:1,class:"group relative px-3 py-2 flex items-center gap-3 hover:bg-white/10 cursor-pointer"},jv={class:"flex-1 text-sm text-white/90"},$v={class:"absolute left-full top-0 ml-1 min-w-[120px] max-w-[200px] max-h-[240px] overflow-y-auto py-2 rounded-xl glass shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all"},Lv=["title","onClick"],Fv=["onClick"],Bv=fn({__name:"ContextMenu",setup(n){const e=fr(),t=zn(),r=De(),i=Ge(()=>e.contextMenu.visible),s=Ge(()=>e.contextMenu.target),a=Ge(()=>e.contextMenu.targetItem),l=Ge(()=>{const v=[];for(const y of Object.values(t.bookmarks))if(ot(y)){if(a.value&&y.children.includes(a.value.id)||a.value&&y.id===a.value.id)continue;v.push(y)}return v}),h=Ge(()=>{let v=e.contextMenu.x,y=e.contextMenu.y;return typeof window<"u"&&(v+180>window.innerWidth&&(v=window.innerWidth-180-10),y+250>window.innerHeight&&(y=window.innerHeight-250-10)),{left:`${v}px`,top:`${y}px`}}),f=Ge(()=>{if(s.value==="blank")return[{icon:"i-lucide-plus",label:"",action:"addSite"},{icon:"i-lucide-folder-plus",label:"",action:"addFolder"},{type:"divider"},{icon:"i-lucide-settings",label:"",action:"openSettings"}];if(s.value==="site"){const v=[{icon:"i-lucide-pencil",label:"",action:"editSite"}];return l.value.length>0&&v.push({type:"submenu",icon:"i-lucide-folder-input",label:"",submenu:l.value.map(y=>({label:y.title,action:"moveToFolder",value:y.id}))}),a.value?.parentId&&v.push({icon:"i-lucide-folder-output",label:"",action:"moveOutOfFolder"}),v.push({type:"divider"},{icon:"i-lucide-trash-2",label:"",action:"deleteSite",danger:!0}),v}return s.value==="folder"?[{icon:"i-lucide-pencil",label:"",action:"editFolder"},{type:"submenu",icon:"i-lucide-maximize-2",label:"",submenu:[{label:"12",action:"resizeFolder",value:"1x2"},{label:"22",action:"resizeFolder",value:"2x2"},{label:"21",action:"resizeFolder",value:"2x1"}]},{type:"divider"},{icon:"i-lucide-trash-2",label:"",action:"deleteFolder",danger:!0}]:[]});async function c(v,y){const w=a.value;switch(e.closeContextMenu(),v){case"addSite":e.openModal("addSite");break;case"addFolder":e.openModal("addFolder");break;case"openSettings":e.openSettingsPanel();break;case"editSite":w&&e.openModal("editSite",w);break;case"deleteSite":w&&confirm("")&&await t.deleteBookmark(w.id);break;case"editFolder":w&&e.openModal("editFolder",w);break;case"deleteFolder":w&&confirm("")&&await t.deleteBookmark(w.id);break;case"resizeFolder":w&&ot(w)&&y&&await t.updateFolderSize(w.id,y);break;case"moveToFolder":if(w&&y){const E=t.bookmarks[y];E&&ot(E)&&await t.moveBookmark(w.id,y,E.children.length)}break;case"moveOutOfFolder":w&&await t.moveBookmark(w.id,null,t.rootOrder.length);break}}function p(v){r.value&&!r.value.contains(v.target)&&e.closeContextMenu()}function g(v){v.key==="Escape"&&e.closeContextMenu()}return En(i,v=>{v?(document.addEventListener("click",p),document.addEventListener("keydown",g)):(document.removeEventListener("click",p),document.removeEventListener("keydown",g))}),Zr(()=>{document.removeEventListener("click",p),document.removeEventListener("keydown",g)}),(v,y)=>(Ee(),Pr(Bi,{to:"body"},[Ze(Ln,{"enter-active-class":"transition-all duration-150 ease-out","leave-active-class":"transition-all duration-100 ease-in","enter-from-class":"opacity-0 scale-95","leave-to-class":"opacity-0 scale-95"},{default:Cn(()=>[i.value?(Ee(),ke("div",{key:0,ref_key:"menuRef",ref:r,class:"fixed z-50 min-w-[180px] py-2 rounded-xl glass shadow-xl",style:or(h.value)},[(Ee(!0),ke(lt,null,ar(f.value,(w,E)=>(Ee(),ke(lt,{key:E},[w.type==="divider"?(Ee(),ke("div",Mv)):w.type==="submenu"?(Ee(),ke("div",Iv,[B("div",{class:Je([w.icon,"w-4 h-4 text-white/70"])},null,2),B("span",jv,Qe(w.label),1),y[0]||(y[0]=B("div",{class:"i-lucide-chevron-right w-4 h-4 text-white/50"},null,-1)),B("div",$v,[(Ee(!0),ke(lt,null,ar(w.submenu,N=>(Ee(),ke("button",{key:N.value,class:"w-full px-3 py-2 text-left text-sm text-white/90 hover:bg-white/10 truncate",title:N.label,onClick:_=>c(N.action,N.value)},Qe(N.label),9,Lv))),128))])])):(Ee(),ke("button",{key:2,class:Je(["w-full px-3 py-2 flex items-center gap-3 hover:bg-white/10 transition-colors",{"text-red-400 hover:text-red-300":w.danger}]),onClick:N=>c(w.action)},[B("div",{class:Je([w.icon,"w-4 h-4",w.danger?"":"text-white/70"])},null,2),B("span",{class:Je(["text-sm",w.danger?"":"text-white/90"])},Qe(w.label),3)],10,Fv))],64))),128))],4)):ut("",!0)]),_:1})]))}}),zv={class:"w-full max-w-md mx-4 rounded-2xl glass overflow-hidden"},Hv={class:"flex items-center justify-between px-6 py-4 border-b border-white/10"},Uv={class:"text-lg font-semibold text-white"},Wv={class:"p-6"},Kv={class:"grid grid-cols-4 gap-4"},qv=["onDragstart","onDragover","onDrop","onClick","onContextmenu"],Vv={class:"w-14 h-14 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center mb-2 transition-all group-hover:scale-105"},Gv=["src","alt","onError"],Yv={class:"text-xs text-white/80 text-center line-clamp-2 max-w-[72px]"},Xv={key:0,class:"text-center py-8 text-white/50"},Jv=fn({__name:"FolderModal",setup(n){const e=fr(),t=zn(),r=Ge(()=>e.openFolderId!==null),i=Ge(()=>{if(!e.openFolderId)return null;const E=t.bookmarks[e.openFolderId];return E&&ot(E)?E:null}),s=Ge(()=>i.value?t.getFolderChildren(i.value.id):[]),a=De(null),l=De(null);function h(E,N){a.value=N,E.dataTransfer&&(E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("text/plain",N))}function f(E,N){E.preventDefault(),a.value&&a.value!==N&&(l.value=N)}function c(){l.value=null}async function p(E,N){if(E.preventDefault(),l.value=null,!a.value||!i.value||a.value===N){a.value=null;return}const _=[...i.value.children],C=_.indexOf(a.value),S=_.indexOf(N);C!==-1&&S!==-1&&(_.splice(C,1),_.splice(S,0,a.value),await t.reorder(_,i.value.id)),a.value=null}function g(){a.value=null,l.value=null}function v(){e.closeFolder()}function y(E,N){E.preventDefault(),E.stopPropagation();const _=ir(N)?"site":"folder";e.openContextMenu(E.clientX,E.clientY,_,N)}function w(E){window.open(E.url,"_self")}return(E,N)=>(Ee(),Pr(Bi,{to:"body"},[Ze(Ln,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Cn(()=>[r.value&&i.value?(Ee(),ke("div",{key:0,class:"fixed inset-0 z-40 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Jr(v,["self"])},[B("div",zv,[B("div",Hv,[B("h2",Uv,Qe(i.value.title),1),B("button",{class:"p-2 rounded-lg hover:bg-white/10 transition-colors",onClick:v},[...N[0]||(N[0]=[B("div",{class:"i-lucide-x w-5 h-5 text-white/70"},null,-1)])])]),B("div",Wv,[B("div",Kv,[(Ee(!0),ke(lt,null,ar(s.value,_=>(Ee(),ke(lt,{key:_.id},[Le(ir)(_)?(Ee(),ke("div",{key:0,class:Je(["group flex flex-col items-center cursor-pointer select-none transition-all",{"opacity-50":a.value===_.id,"scale-105":l.value===_.id}]),draggable:"true",onDragstart:C=>h(C,_.id),onDragover:C=>f(C,_.id),onDragleave:c,onDrop:C=>p(C,_.id),onDragend:g,onClick:C=>w(_),onContextmenu:C=>y(C,_)},[B("div",Vv,[B("img",{src:_.favicon||Le(Tr).getFaviconUrl(_.url),alt:_.title,class:"w-8 h-8 rounded pointer-events-none",onError:C=>C.target.src=Le(Tr).generateDefaultIcon(_.title)},null,40,Gv)]),B("span",Yv,Qe(_.title),1)],42,qv)):ut("",!0)],64))),128))]),s.value.length===0?(Ee(),ke("div",Xv,[...N[1]||(N[1]=[B("div",{class:"i-lucide-folder-open w-12 h-12 mx-auto mb-3"},null,-1),B("p",null,"",-1),B("p",{class:"text-xs mt-1"},"",-1)])])):ut("",!0)])])])):ut("",!0)]),_:1})]))}}),Zv={class:"w-full max-w-md mx-4 rounded-2xl glass overflow-hidden"},Qv={class:"flex items-center justify-between px-6 py-4 border-b border-white/10"},ey={class:"text-lg font-semibold text-white"},ty={class:"flex items-center gap-4 p-4 rounded-xl bg-white/5"},ny={class:"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center"},ry=["src"],iy={key:1,class:"i-lucide-globe w-6 h-6 text-white/50"},sy={class:"flex-1 min-w-0"},oy={class:"text-white truncate"},ay={class:"text-xs text-white/50 truncate"},ly={class:"space-y-2"},uy={class:"space-y-2"},cy={class:"flex gap-3 pt-2"},fy=["disabled"],hy=fn({__name:"AddSiteModal",setup(n){const e=fr(),t=zn(),r=Ge(()=>e.modalType==="addSite"||e.modalType==="editSite"),i=Ge(()=>e.modalType==="editSite"),s=De(""),a=De(""),l=De(""),h=De(!1);function f(){s.value="",a.value="",l.value=""}En(r,v=>{v&&i.value&&e.modalData&&ir(e.modalData)?(s.value=e.modalData.title,a.value=e.modalData.url,l.value=e.modalData.favicon):v||f()});function c(){e.closeModal(),f()}async function p(){if(a.value)try{let v=a.value;if(!v.startsWith("http://")&&!v.startsWith("https://")&&(v=`https://${v}`,a.value=v),!s.value)try{const y=new URL(v).hostname.replace("www.","");s.value=y.charAt(0).toUpperCase()+y.slice(1).split(".")[0]}catch{}l.value=await Tr.fetchFavicon(v)}catch{}}async function g(){if(!(!s.value.trim()||!a.value.trim())){h.value=!0;try{let v=a.value;!v.startsWith("http://")&&!v.startsWith("https://")&&(v=`https://${v}`),i.value&&e.modalData?await t.updateBookmark(e.modalData.id,{title:s.value.trim(),url:v,favicon:l.value}):await t.addSite({title:s.value.trim(),url:v,favicon:l.value,parentId:null}),c()}finally{h.value=!1}}}return(v,y)=>(Ee(),Pr(Bi,{to:"body"},[Ze(Ln,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Cn(()=>[r.value?(Ee(),ke("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Jr(c,["self"])},[B("div",Zv,[B("div",Qv,[B("h2",ey,Qe(i.value?"":""),1),B("button",{class:"p-2 rounded-lg hover:bg-white/10 transition-colors",onClick:c},[...y[3]||(y[3]=[B("div",{class:"i-lucide-x w-5 h-5 text-white/70"},null,-1)])])]),B("form",{class:"p-6 space-y-4",onSubmit:Jr(g,["prevent"])},[B("div",ty,[B("div",ny,[l.value?(Ee(),ke("img",{key:0,src:l.value,class:"w-8 h-8 rounded",onError:y[0]||(y[0]=w=>l.value="")},null,40,ry)):(Ee(),ke("div",iy))]),B("div",sy,[B("p",oy,Qe(s.value||""),1),B("p",ay,Qe(a.value||"https://example.com"),1)])]),B("div",ly,[y[4]||(y[4]=B("label",{class:"text-sm text-white/70"},"",-1)),yn(B("input",{"onUpdate:modelValue":y[1]||(y[1]=w=>a.value=w),type:"text",placeholder:"https://example.com",class:"w-full px-4 py-3 rounded-xl bg-white/10 text-white placeholder-white/40 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20",onBlur:p},null,544),[[Ar,a.value]])]),B("div",uy,[y[5]||(y[5]=B("label",{class:"text-sm text-white/70"},"",-1)),yn(B("input",{"onUpdate:modelValue":y[2]||(y[2]=w=>s.value=w),type:"text",placeholder:"",class:"w-full px-4 py-3 rounded-xl bg-white/10 text-white placeholder-white/40 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20"},null,512),[[Ar,s.value]])]),B("div",cy,[B("button",{type:"button",class:"flex-1 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",onClick:c},"  "),B("button",{type:"submit",class:"flex-1 px-4 py-3 rounded-xl bg-blue-500 hover:bg-blue-600 text-white transition-colors disabled:opacity-50",disabled:h.value||!s.value.trim()||!a.value.trim()},Qe(h.value?"...":i.value?"":""),9,fy)])],32)])])):ut("",!0)]),_:1})]))}}),dy={class:"w-full max-w-md mx-4 rounded-2xl glass overflow-hidden"},py={class:"flex items-center justify-between px-6 py-4 border-b border-white/10"},gy={class:"text-lg font-semibold text-white"},my={class:"flex items-center gap-4 p-4 rounded-xl bg-white/5"},vy={class:"flex-1"},yy={class:"text-white"},by={class:"text-xs text-white/50"},wy={class:"space-y-2"},xy={class:"space-y-2"},_y={class:"grid grid-cols-3 gap-3"},Ey=["onClick"],Cy={class:"text-white font-medium"},Sy={class:"text-xs text-white/50"},ky={class:"flex gap-3 pt-2"},Oy=["disabled"],Ay=fn({__name:"AddFolderModal",setup(n){const e=fr(),t=zn(),r=Ge(()=>e.modalType==="addFolder"||e.modalType==="editFolder"),i=Ge(()=>e.modalType==="editFolder"),s=De(""),a=De("2x2"),l=De(!1),h=[{value:"1x2",label:"12",desc:""},{value:"2x2",label:"22",desc:""},{value:"2x1",label:"21",desc:""}];function f(){s.value="",a.value="2x2"}En(r,g=>{g&&i.value&&e.modalData&&ot(e.modalData)?(s.value=e.modalData.title,a.value=e.modalData.size):g||f()});function c(){e.closeModal(),f()}async function p(){if(s.value.trim()){l.value=!0;try{i.value&&e.modalData?(await t.updateBookmark(e.modalData.id,{title:s.value.trim()}),ot(e.modalData)&&await t.updateFolderSize(e.modalData.id,a.value)):await t.addFolder({title:s.value.trim(),size:a.value,parentId:null}),c()}finally{l.value=!1}}}return(g,v)=>(Ee(),Pr(Bi,{to:"body"},[Ze(Ln,{"enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Cn(()=>[r.value?(Ee(),ke("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:Jr(c,["self"])},[B("div",dy,[B("div",py,[B("h2",gy,Qe(i.value?"":""),1),B("button",{class:"p-2 rounded-lg hover:bg-white/10 transition-colors",onClick:c},[...v[1]||(v[1]=[B("div",{class:"i-lucide-x w-5 h-5 text-white/70"},null,-1)])])]),B("form",{class:"p-6 space-y-4",onSubmit:Jr(p,["prevent"])},[B("div",my,[v[2]||(v[2]=B("div",{class:"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center"},[B("div",{class:"i-lucide-folder w-6 h-6 text-white/50"})],-1)),B("div",vy,[B("p",yy,Qe(s.value||""),1),B("p",by,": "+Qe(a.value),1)])]),B("div",wy,[v[3]||(v[3]=B("label",{class:"text-sm text-white/70"},"",-1)),yn(B("input",{"onUpdate:modelValue":v[0]||(v[0]=y=>s.value=y),type:"text",placeholder:"",class:"w-full px-4 py-3 rounded-xl bg-white/10 text-white placeholder-white/40 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20"},null,512),[[Ar,s.value]])]),B("div",xy,[v[4]||(v[4]=B("label",{class:"text-sm text-white/70"},"",-1)),B("div",_y,[(Ee(),ke(lt,null,ar(h,y=>B("button",{key:y.value,type:"button",class:Je(["px-3 py-4 rounded-xl flex flex-col items-center gap-1 transition-all",a.value===y.value?"bg-white/20 ring-2 ring-white/30":"bg-white/5 hover:bg-white/10"]),onClick:w=>a.value=y.value},[B("span",Cy,Qe(y.label),1),B("span",Sy,Qe(y.desc),1)],10,Ey)),64))])]),B("div",ky,[B("button",{type:"button",class:"flex-1 px-4 py-3 rounded-xl bg-white/10 hover:bg-white/20 text-white transition-colors",onClick:c},"  "),B("button",{type:"submit",class:"flex-1 px-4 py-3 rounded-xl bg-blue-500 hover:bg-blue-600 text-white transition-colors disabled:opacity-50",disabled:l.value||!s.value.trim()},Qe(l.value?"...":i.value?"":""),9,Oy)])],32)])])):ut("",!0)]),_:1})]))}}),Ty={key:0,class:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50"},Py={class:"flex items-center gap-3 px-6 py-3 rounded-2xl bg-black/60 backdrop-blur-xl border border-white/10 shadow-2xl"},Ry={class:"flex items-center gap-2 text-white/80 text-sm pr-3 border-r border-white/20"},Ny={class:"font-medium"},Dy={class:"relative"},My=["disabled"],Iy={key:0,class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 min-w-[180px] max-h-[240px] overflow-y-auto bg-black/80 backdrop-blur-xl rounded-xl border border-white/10 shadow-2xl py-2"},jy=["onClick"],$y={class:"truncate"},Ly=["disabled"],Fy=fn({__name:"EditToolbar",setup(n){const e=fr(),t=zn(),r=De(!1),i=Ge(()=>t.rootBookmarks.filter(ir)),s=Ge(()=>i.value.length===0?!1:i.value.every(p=>e.isSelected(p.id)));function a(){if(s.value)e.clearSelection();else{const p=i.value.map(g=>g.id);e.selectAll(p)}}async function l(){if(e.selectedCount===0||!confirm(` ${e.selectedCount} `))return;const g=Array.from(e.selectedIds);await t.batchDeleteBookmarks(g),e.clearSelection()}async function h(p){if(e.selectedCount===0)return;const g=Array.from(e.selectedIds);await t.batchMoveToFolder(g,p),e.clearSelection(),r.value=!1}function f(){r.value=!1,e.openModal("addFolder")}function c(){r.value=!1}return(p,g)=>(Ee(),ke(lt,null,[Ze(Ln,{name:"slide-up"},{default:Cn(()=>[Le(e).isEditMode?(Ee(),ke("div",Ty,[B("div",Py,[B("div",Ry,[B("span",Ny,Qe(Le(e).selectedCount),1),g[2]||(g[2]=B("span",null,"",-1))]),B("button",{class:Je(["toolbar-btn",{active:s.value}]),title:"",onClick:a},[...g[3]||(g[3]=[B("div",{class:"i-lucide-check-square w-5 h-5"},null,-1),B("span",{class:"text-xs"},"",-1)])],2),B("div",Dy,[B("button",{class:"toolbar-btn",disabled:Le(e).selectedCount===0,title:"",onClick:g[0]||(g[0]=v=>r.value=!r.value)},[...g[4]||(g[4]=[B("div",{class:"i-lucide-folder-input w-5 h-5"},null,-1),B("span",{class:"text-xs"},"",-1)])],8,My),Ze(Ln,{name:"fade-scale"},{default:Cn(()=>[r.value?(Ee(),ke("div",Iy,[Le(t).allFolders.length>0?(Ee(),ke(lt,{key:0},[(Ee(!0),ke(lt,null,ar(Le(t).allFolders,v=>(Ee(),ke("button",{key:v.id,class:"folder-menu-item",onClick:y=>h(v.id)},[g[5]||(g[5]=B("div",{class:"i-lucide-folder w-4 h-4 text-yellow-400"},null,-1)),B("span",$y,Qe(v.title),1)],8,jy))),128)),g[6]||(g[6]=B("div",{class:"border-t border-white/10 my-2"},null,-1))],64)):ut("",!0),B("button",{class:"folder-menu-item text-blue-400",onClick:f},[...g[7]||(g[7]=[B("div",{class:"i-lucide-folder-plus w-4 h-4"},null,-1),B("span",null,"",-1)])])])):ut("",!0)]),_:1})]),B("button",{class:"toolbar-btn text-red-400 hover:text-red-300",disabled:Le(e).selectedCount===0,title:"",onClick:l},[...g[8]||(g[8]=[B("div",{class:"i-lucide-trash-2 w-5 h-5"},null,-1),B("span",{class:"text-xs"},"",-1)])],8,Ly),g[9]||(g[9]=B("div",{class:"w-px h-8 bg-white/20"},null,-1)),B("button",{class:"px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-medium transition-all",onClick:g[1]||(g[1]=(...v)=>Le(e).exitEditMode&&Le(e).exitEditMode(...v))},"  ")])])):ut("",!0)]),_:1}),r.value?(Ee(),ke("div",{key:0,class:"fixed inset-0 z-40",onClick:c})):ut("",!0)],64))}}),By=po(Fy,[["__scopeId","data-v-3cd0a4d6"]]),zy={class:"fixed top-4 right-4 z-20 flex items-center gap-2"},Hy=["disabled"],Uy={class:"relative z-10 min-h-screen flex flex-col items-center pt-[15vh] px-4"},Wy={key:1,class:"fixed bottom-4 right-4 text-white/60 text-xs"},Ky=["href"],qy="linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",Vy=fn({__name:"App",setup(n){const e=zn(),t=Sr(),r=Of(),i=fr(),s=Ge(()=>!t.settings.wallpaper.enabled||!r.currentWallpaperUrl?null:{backgroundImage:`url(${r.currentWallpaperUrl})`,backgroundSize:"cover",backgroundPosition:"center"}),a=Ge(()=>t.settings.wallpaper.enabled&&r.isReady&&r.currentWallpaperUrl);zi(async()=>{await Promise.all([e.loadBookmarks(),t.loadSettings()]),t.settings.wallpaper.enabled&&await r.loadWallpaper()});function l(h){h.preventDefault();const f=h.target,c=f.closest(".bookmark-card"),p=f.closest(".folder-card");!c&&!p&&i.openContextMenu(h.clientX,h.clientY,"blank")}return(h,f)=>(Ee(),ke("div",{id:"app",class:"min-h-screen w-full overflow-hidden relative font-sans",onContextmenu:l},[B("div",{class:"absolute inset-0",style:or({background:qy})},null,4),Ze(Ln,{name:"wallpaper-fade"},{default:Cn(()=>[a.value?(Ee(),ke("div",{key:0,class:"absolute inset-0",style:or(s.value)},null,4)):ut("",!0)]),_:1}),f[6]||(f[6]=B("div",{class:"absolute inset-0 bg-black/30"},null,-1)),B("div",zy,[Le(t).settings.wallpaper.enabled?(Ee(),ke("button",{key:0,class:"p-3 rounded-xl bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200 group",title:"",disabled:Le(r).loading,onClick:f[0]||(f[0]=c=>Le(r).switchToNext())},[B("div",{class:Je(["i-lucide-refresh-cw w-5 h-5 text-white/70 group-hover:text-white transition-colors duration-300",{"animate-spin":Le(r).loading}])},null,2)],8,Hy)):ut("",!0),B("button",{class:Je(["p-3 rounded-xl bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200 group",{"bg-white/25":Le(i).isEditMode}]),title:"",onClick:f[1]||(f[1]=c=>Le(i).toggleEditMode())},[B("div",{class:Je(["i-lucide-pencil w-5 h-5 text-white/70 group-hover:text-white transition-colors duration-300",{"text-white":Le(i).isEditMode}])},null,2)],2),B("button",{class:"p-3 rounded-xl bg-white/10 hover:bg-white/20 backdrop-blur-sm transition-all duration-200 group",title:"",onClick:f[2]||(f[2]=c=>Le(i).openSettingsPanel())},[...f[3]||(f[3]=[B("div",{class:"i-lucide-settings w-5 h-5 text-white/70 group-hover:text-white transition-colors duration-300"},null,-1)])])]),B("div",Uy,[Le(t).settings.showSearchBar?(Ee(),Pr(hg,{key:0,class:"mb-12"})):ut("",!0),Ze(Dg,{class:"w-full max-w-6xl"}),Le(r).currentWallpaper&&Le(t).settings.wallpaper.enabled?(Ee(),ke("div",Wy,[f[4]||(f[4]=rn(" Photo by ",-1)),B("a",{href:Le(r).currentWallpaper.authorUrl,target:"_blank",class:"hover:text-white/90 underline"},Qe(Le(r).currentWallpaper.author),9,Ky),f[5]||(f[5]=rn(" on Picsum ",-1))])):ut("",!0)]),Ze(Dv),Ze(Bv),Ze(Jv),Ze(hy),Ze(Ay),Ze(By)],32))}}),Yf=qp(Vy),Gy=Yp();Yf.use(Gy);Yf.mount("#app");
